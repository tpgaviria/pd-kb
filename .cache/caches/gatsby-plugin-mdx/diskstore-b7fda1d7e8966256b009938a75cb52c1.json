{"expireTime":9007200861686579000,"key":"gatsby-plugin-mdx-entire-payload-3c9f45cd4215b5099272af7e41d66ed9-","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"ServiceNow Enterprise is a powerful platform-as-a-service, which offers advanced automation and process workflow for the enterprise environment. With this integration, you can leverage PagerDuty's robust event management, on-call scheduling, escalation and notification functionality and keep PagerDuty incidents in sync with your ServiceNow tickets. ","position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":352,"offset":351},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":352,"offset":351},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For installation instructions, please refer to the ","position":{"start":{"line":3,"column":3,"offset":355},"end":{"line":3,"column":54,"offset":406},"indent":[]}},{"type":"link","title":null,"url":"servicenow-integration-guide","children":[{"type":"text","value":"Integration Guide","position":{"start":{"line":3,"column":55,"offset":407},"end":{"line":3,"column":72,"offset":424},"indent":[]}}],"position":{"start":{"line":3,"column":54,"offset":406},"end":{"line":3,"column":103,"offset":455},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":3,"column":103,"offset":455},"end":{"line":3,"column":104,"offset":456},"indent":[]}}],"position":{"start":{"line":3,"column":3,"offset":355},"end":{"line":3,"column":104,"offset":456},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":353},"end":{"line":3,"column":104,"offset":456},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For a guide to addressing some common issues, see the ","position":{"start":{"line":4,"column":3,"offset":459},"end":{"line":4,"column":57,"offset":513},"indent":[]}},{"type":"link","title":null,"url":"doc:servicenow-troubleshooting-guide","children":[{"type":"text","value":"Troubleshooting Guide","position":{"start":{"line":4,"column":58,"offset":514},"end":{"line":4,"column":79,"offset":535},"indent":[]}}],"position":{"start":{"line":4,"column":57,"offset":513},"end":{"line":4,"column":118,"offset":574},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":4,"column":118,"offset":574},"end":{"line":4,"column":119,"offset":575},"indent":[]}}],"position":{"start":{"line":4,"column":3,"offset":459},"end":{"line":4,"column":119,"offset":575},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":457},"end":{"line":4,"column":119,"offset":575},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For more in-depth information on the topic of customizing how the ServiceNow integration behaves, refer to our guide on ","position":{"start":{"line":5,"column":3,"offset":578},"end":{"line":5,"column":123,"offset":698},"indent":[]}},{"type":"link","title":null,"url":"doc:advanced-servicenow-configuration","children":[{"type":"text","value":"Advanced ServiceNow Configuration","position":{"start":{"line":5,"column":124,"offset":699},"end":{"line":5,"column":157,"offset":732},"indent":[]}}],"position":{"start":{"line":5,"column":123,"offset":698},"end":{"line":5,"column":197,"offset":772},"indent":[]}}],"position":{"start":{"line":5,"column":3,"offset":578},"end":{"line":5,"column":197,"offset":772},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":576},"end":{"line":5,"column":197,"offset":772},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":353},"end":{"line":5,"column":197,"offset":772},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In the ServiceNow Enterprise integration app for PagerDuty, the source code of many of the components are not only visible, but can also be modified.","position":{"start":{"line":7,"column":1,"offset":774},"end":{"line":7,"column":150,"offset":923},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":774},"end":{"line":7,"column":150,"offset":923},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All of the source code that performs the actions underpinning the integration is in the JavaScript language, and can be viewed by going to the ","position":{"start":{"line":9,"column":1,"offset":925},"end":{"line":9,"column":144,"offset":1068},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Advanced","position":{"start":{"line":9,"column":146,"offset":1070},"end":{"line":9,"column":154,"offset":1078},"indent":[]}}],"position":{"start":{"line":9,"column":144,"offset":1068},"end":{"line":9,"column":156,"offset":1080},"indent":[]}},{"type":"text","value":" section or tab of any component's view. The application's components can be accessed by going to ","position":{"start":{"line":9,"column":156,"offset":1080},"end":{"line":9,"column":254,"offset":1178},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":9,"column":256,"offset":1180},"end":{"line":9,"column":265,"offset":1189},"indent":[]}}],"position":{"start":{"line":9,"column":254,"offset":1178},"end":{"line":9,"column":267,"offset":1191},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":9,"column":267,"offset":1191},"end":{"line":9,"column":268,"offset":1192},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":9,"column":268,"offset":1192},"end":{"line":9,"column":274,"offset":1198},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":9,"column":274,"offset":1198},"end":{"line":9,"column":275,"offset":1199},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration","position":{"start":{"line":9,"column":277,"offset":1201},"end":{"line":9,"column":290,"offset":1214},"indent":[]}}],"position":{"start":{"line":9,"column":275,"offset":1199},"end":{"line":9,"column":292,"offset":1216},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":9,"column":292,"offset":1216},"end":{"line":9,"column":293,"offset":1217},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":9,"column":293,"offset":1217},"end":{"line":9,"column":299,"offset":1223},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":9,"column":299,"offset":1223},"end":{"line":9,"column":300,"offset":1224},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration files","position":{"start":{"line":9,"column":302,"offset":1226},"end":{"line":9,"column":321,"offset":1245},"indent":[]}}],"position":{"start":{"line":9,"column":300,"offset":1224},"end":{"line":9,"column":323,"offset":1247},"indent":[]}},{"type":"text","value":". There you will find a page with the following tabs:","position":{"start":{"line":9,"column":323,"offset":1247},"end":{"line":9,"column":376,"offset":1300},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":925},"end":{"line":9,"column":376,"offset":1300},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Business Rules","position":{"start":{"line":11,"column":3,"offset":1304},"end":{"line":11,"column":17,"offset":1318},"indent":[]}}],"position":{"start":{"line":11,"column":3,"offset":1304},"end":{"line":11,"column":17,"offset":1318},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":1302},"end":{"line":11,"column":17,"offset":1318},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Script Actions ","position":{"start":{"line":12,"column":3,"offset":1321},"end":{"line":12,"column":18,"offset":1336},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":1321},"end":{"line":12,"column":18,"offset":1336},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1319},"end":{"line":12,"column":18,"offset":1336},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Script Includes ","position":{"start":{"line":13,"column":3,"offset":1339},"end":{"line":13,"column":19,"offset":1355},"indent":[]}}],"position":{"start":{"line":13,"column":3,"offset":1339},"end":{"line":13,"column":19,"offset":1355},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":1337},"end":{"line":13,"column":19,"offset":1355},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"UI Actions ","position":{"start":{"line":14,"column":3,"offset":1358},"end":{"line":14,"column":14,"offset":1369},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":1358},"end":{"line":14,"column":14,"offset":1369},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1356},"end":{"line":14,"column":14,"offset":1369},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Processors","position":{"start":{"line":15,"column":3,"offset":1372},"end":{"line":15,"column":13,"offset":1382},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":1372},"end":{"line":15,"column":13,"offset":1382},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1370},"end":{"line":15,"column":13,"offset":1382},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"UI Pages","position":{"start":{"line":16,"column":3,"offset":1385},"end":{"line":16,"column":11,"offset":1393},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":1385},"end":{"line":16,"column":11,"offset":1393},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1383},"end":{"line":16,"column":11,"offset":1393},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Macros","position":{"start":{"line":17,"column":3,"offset":1396},"end":{"line":17,"column":9,"offset":1402},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":1396},"end":{"line":17,"column":9,"offset":1402},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1394},"end":{"line":17,"column":9,"offset":1402},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Application Files\n","position":{"start":{"line":18,"column":3,"offset":1405},"end":{"line":19,"column":1,"offset":1423},"indent":[1]}},{"type":"linkReference","identifier":"block:callout","label":"block:callout","referenceType":"shortcut","children":[{"type":"text","value":"block:callout","position":{"start":{"line":19,"column":2,"offset":1424},"end":{"line":19,"column":15,"offset":1437},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1423},"end":{"line":19,"column":16,"offset":1438},"indent":[]}},{"type":"text","value":"\n{\n  \"type\": \"info\",\n  \"body\": \"If you are having trouble with your ServiceNow integration, it is recommended that you first review the ","position":{"start":{"line":19,"column":16,"offset":1438},"end":{"line":22,"column":116,"offset":1574},"indent":[1,1,1]}},{"type":"link","title":null,"url":"/docs/servicenow-troubleshooting-guide","children":[{"type":"text","value":"ServiceNow Troubleshooting Guide","position":{"start":{"line":22,"column":117,"offset":1575},"end":{"line":22,"column":149,"offset":1607},"indent":[]}}],"position":{"start":{"line":22,"column":116,"offset":1574},"end":{"line":22,"column":190,"offset":1648},"indent":[]}},{"type":"text","value":".\"\n}\n","position":{"start":{"line":22,"column":190,"offset":1648},"end":{"line":24,"column":1,"offset":1653},"indent":[1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":24,"column":2,"offset":1654},"end":{"line":24,"column":8,"offset":1660},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1653},"end":{"line":24,"column":9,"offset":1661},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":1405},"end":{"line":24,"column":9,"offset":1661},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":18,"column":1,"offset":1403},"end":{"line":24,"column":9,"offset":1661},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":11,"column":1,"offset":1302},"end":{"line":24,"column":9,"offset":1661},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":26,"column":2,"offset":1664},"end":{"line":26,"column":18,"offset":1680},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1663},"end":{"line":26,"column":19,"offset":1681},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Introduction and Terminology\"\n}\n","position":{"start":{"line":26,"column":19,"offset":1681},"end":{"line":30,"column":1,"offset":1728},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":30,"column":2,"offset":1729},"end":{"line":30,"column":8,"offset":1735},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1728},"end":{"line":30,"column":9,"offset":1736},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1663},"end":{"line":30,"column":9,"offset":1736},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Assignment versus Escalation and Delegation","position":{"start":{"line":31,"column":4,"offset":1740},"end":{"line":31,"column":47,"offset":1783},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1737},"end":{"line":31,"column":47,"offset":1783},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The term ","position":{"start":{"line":33,"column":1,"offset":1785},"end":{"line":33,"column":10,"offset":1794},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"assignment","position":{"start":{"line":33,"column":12,"offset":1796},"end":{"line":33,"column":22,"offset":1806},"indent":[]}}],"position":{"start":{"line":33,"column":10,"offset":1794},"end":{"line":33,"column":24,"offset":1808},"indent":[]}},{"type":"text","value":" has a slightly different meaning in PagerDuty than it does in ServiceNow. When an incident is \"assigned\" to a user in PagerDuty, it is escalated to them and they are the agents who will be notified. When an incident is first triggered, it is considered to be assigned to the first targets in the escalation policy until escalated. However, it will not assign the incident to anyone in ServiceNow until someone acknowledges it, in which case the corresponding ServiceNow incident will be assigned to them.","position":{"start":{"line":33,"column":24,"offset":1808},"end":{"line":33,"column":529,"offset":2313},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1785},"end":{"line":33,"column":529,"offset":2313},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When an incident in ServiceNow is assigned to a user, that similarly escalates the incident to that user in PagerDuty.","position":{"start":{"line":35,"column":1,"offset":2315},"end":{"line":35,"column":119,"offset":2433},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2315},"end":{"line":35,"column":119,"offset":2433},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The integration will also assign the ServiceNow incident to the user who acknowledged it in PagerDuty, since it is assumed that the user who acknowledged it is the one who will be working on it.","position":{"start":{"line":37,"column":1,"offset":2435},"end":{"line":37,"column":195,"offset":2629},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2435},"end":{"line":37,"column":195,"offset":2629},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The term ","position":{"start":{"line":39,"column":1,"offset":2631},"end":{"line":39,"column":10,"offset":2640},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"delegation","position":{"start":{"line":39,"column":12,"offset":2642},"end":{"line":39,"column":22,"offset":2652},"indent":[]}}],"position":{"start":{"line":39,"column":10,"offset":2640},"end":{"line":39,"column":24,"offset":2654},"indent":[]}},{"type":"text","value":" refers to the act of reassigning a PagerDuty incident to a different escalation policy, or level of an escalation policy, removing it from the current escalation policy flow and starting a new escalation process.","position":{"start":{"line":39,"column":24,"offset":2654},"end":{"line":39,"column":237,"offset":2867},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2631},"end":{"line":39,"column":237,"offset":2867},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Provisioned versus Linked","position":{"start":{"line":41,"column":4,"offset":2872},"end":{"line":41,"column":29,"offset":2897},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2869},"end":{"line":41,"column":29,"offset":2897},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The term ","position":{"start":{"line":43,"column":1,"offset":2899},"end":{"line":43,"column":10,"offset":2908},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"provisioned","position":{"start":{"line":43,"column":12,"offset":2910},"end":{"line":43,"column":23,"offset":2921},"indent":[]}}],"position":{"start":{"line":43,"column":10,"offset":2908},"end":{"line":43,"column":25,"offset":2923},"indent":[]}},{"type":"text","value":" refers to when the item in ServiceNow has an analogous record in PagerDuty, identified by one or more metadata fields, referred to as the ","position":{"start":{"line":43,"column":25,"offset":2923},"end":{"line":43,"column":164,"offset":3062},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"integration fields","position":{"start":{"line":43,"column":166,"offset":3064},"end":{"line":43,"column":184,"offset":3082},"indent":[]}}],"position":{"start":{"line":43,"column":164,"offset":3062},"end":{"line":43,"column":186,"offset":3084},"indent":[]}},{"type":"text","value":". For assignment groups, these will be ","position":{"start":{"line":43,"column":186,"offset":3084},"end":{"line":43,"column":225,"offset":3123},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Service","position":{"start":{"line":43,"column":226,"offset":3124},"end":{"line":43,"column":243,"offset":3141},"indent":[]}}],"position":{"start":{"line":43,"column":225,"offset":3123},"end":{"line":43,"column":244,"offset":3142},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":43,"column":244,"offset":3142},"end":{"line":43,"column":249,"offset":3147},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Escalation","position":{"start":{"line":43,"column":250,"offset":3148},"end":{"line":43,"column":270,"offset":3168},"indent":[]}}],"position":{"start":{"line":43,"column":249,"offset":3147},"end":{"line":43,"column":271,"offset":3169},"indent":[]}},{"type":"text","value":", which will contain the IDs of a PagerDuty ","position":{"start":{"line":43,"column":271,"offset":3169},"end":{"line":43,"column":315,"offset":3213},"indent":[]}},{"type":"link","title":null,"url":"/docs/services-and-integrations","children":[{"type":"text","value":"Service","position":{"start":{"line":43,"column":316,"offset":3214},"end":{"line":43,"column":323,"offset":3221},"indent":[]}}],"position":{"start":{"line":43,"column":315,"offset":3213},"end":{"line":43,"column":357,"offset":3255},"indent":[]}},{"type":"text","value":" / ","position":{"start":{"line":43,"column":357,"offset":3255},"end":{"line":43,"column":360,"offset":3258},"indent":[]}},{"type":"link","title":null,"url":"/docs/escalation-policies","children":[{"type":"text","value":"Escalation Policy","position":{"start":{"line":43,"column":361,"offset":3259},"end":{"line":43,"column":378,"offset":3276},"indent":[]}}],"position":{"start":{"line":43,"column":360,"offset":3258},"end":{"line":43,"column":406,"offset":3304},"indent":[]}},{"type":"text","value":" pair, and in version 3.5 and later, the ","position":{"start":{"line":43,"column":406,"offset":3304},"end":{"line":43,"column":447,"offset":3345},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Webhook","position":{"start":{"line":43,"column":448,"offset":3346},"end":{"line":43,"column":465,"offset":3363},"indent":[]}}],"position":{"start":{"line":43,"column":447,"offset":3345},"end":{"line":43,"column":466,"offset":3364},"indent":[]}},{"type":"text","value":", which will contain the ID of the ","position":{"start":{"line":43,"column":466,"offset":3364},"end":{"line":43,"column":501,"offset":3399},"indent":[]}},{"type":"link","title":null,"url":"/docs/extensions-and-add-ons#section-extensions","children":[{"type":"text","value":"extension","position":{"start":{"line":43,"column":502,"offset":3400},"end":{"line":43,"column":511,"offset":3409},"indent":[]}}],"position":{"start":{"line":43,"column":501,"offset":3399},"end":{"line":43,"column":561,"offset":3459},"indent":[]}},{"type":"text","value":" used for the two-way integration. Users are provisioned if their ","position":{"start":{"line":43,"column":561,"offset":3459},"end":{"line":43,"column":627,"offset":3525},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty User","position":{"start":{"line":43,"column":628,"offset":3526},"end":{"line":43,"column":642,"offset":3540},"indent":[]}}],"position":{"start":{"line":43,"column":627,"offset":3525},"end":{"line":43,"column":643,"offset":3541},"indent":[]}},{"type":"text","value":" field refers to the ID of a currently-existing user in PagerDuty. Un-provisioned records will have these fields blank, or referencing nonexistent records if the records were deleted in PagerDuty.","position":{"start":{"line":43,"column":643,"offset":3541},"end":{"line":43,"column":839,"offset":3737},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2899},"end":{"line":43,"column":839,"offset":3737},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"An incident is considered ","position":{"start":{"line":45,"column":1,"offset":3739},"end":{"line":45,"column":27,"offset":3765},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"linked","position":{"start":{"line":45,"column":29,"offset":3767},"end":{"line":45,"column":35,"offset":3773},"indent":[]}}],"position":{"start":{"line":45,"column":27,"offset":3765},"end":{"line":45,"column":37,"offset":3775},"indent":[]}},{"type":"text","value":" if it is associated with a PagerDuty incident, in which case its status, work notes and other information pertaining to the incident can be synchronized between systems.","position":{"start":{"line":45,"column":37,"offset":3775},"end":{"line":45,"column":207,"offset":3945},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3739},"end":{"line":45,"column":207,"offset":3945},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Troubleshooting With Verbose Logging","position":{"start":{"line":47,"column":4,"offset":3950},"end":{"line":47,"column":40,"offset":3986},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3947},"end":{"line":47,"column":40,"offset":3986},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To get the most detailed information about what is happening and in what order, set \"Logging verbosity level\" to ","position":{"start":{"line":49,"column":1,"offset":3988},"end":{"line":49,"column":114,"offset":4101},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"debug","position":{"start":{"line":49,"column":115,"offset":4102},"end":{"line":49,"column":120,"offset":4107},"indent":[]}}],"position":{"start":{"line":49,"column":114,"offset":4101},"end":{"line":49,"column":121,"offset":4108},"indent":[]}},{"type":"text","value":" in ","position":{"start":{"line":49,"column":121,"offset":4108},"end":{"line":49,"column":125,"offset":4112},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":49,"column":127,"offset":4114},"end":{"line":49,"column":136,"offset":4123},"indent":[]}}],"position":{"start":{"line":49,"column":125,"offset":4112},"end":{"line":49,"column":138,"offset":4125},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":138,"offset":4125},"end":{"line":49,"column":139,"offset":4126},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":49,"column":139,"offset":4126},"end":{"line":49,"column":145,"offset":4132},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":145,"offset":4132},"end":{"line":49,"column":146,"offset":4133},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration","position":{"start":{"line":49,"column":148,"offset":4135},"end":{"line":49,"column":161,"offset":4148},"indent":[]}}],"position":{"start":{"line":49,"column":146,"offset":4133},"end":{"line":49,"column":163,"offset":4150},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":163,"offset":4150},"end":{"line":49,"column":164,"offset":4151},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":49,"column":164,"offset":4151},"end":{"line":49,"column":170,"offset":4157},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":170,"offset":4157},"end":{"line":49,"column":171,"offset":4158},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Properties","position":{"start":{"line":49,"column":173,"offset":4160},"end":{"line":49,"column":183,"offset":4170},"indent":[]}}],"position":{"start":{"line":49,"column":171,"offset":4158},"end":{"line":49,"column":185,"offset":4172},"indent":[]}},{"type":"text","value":". Each call to ","position":{"start":{"line":49,"column":185,"offset":4172},"end":{"line":49,"column":200,"offset":4187},"indent":[]}},{"type":"inlineCode","value":"gs.debug","position":{"start":{"line":49,"column":200,"offset":4187},"end":{"line":49,"column":210,"offset":4197},"indent":[]}},{"type":"text","value":" in the script source will then show up in the application-scope logs, which can be viewed  under ","position":{"start":{"line":49,"column":210,"offset":4197},"end":{"line":49,"column":308,"offset":4295},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":49,"column":310,"offset":4297},"end":{"line":49,"column":319,"offset":4306},"indent":[]}}],"position":{"start":{"line":49,"column":308,"offset":4295},"end":{"line":49,"column":321,"offset":4308},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":321,"offset":4308},"end":{"line":49,"column":322,"offset":4309},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":49,"column":322,"offset":4309},"end":{"line":49,"column":328,"offset":4315},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":328,"offset":4315},"end":{"line":49,"column":329,"offset":4316},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Support","position":{"start":{"line":49,"column":331,"offset":4318},"end":{"line":49,"column":338,"offset":4325},"indent":[]}}],"position":{"start":{"line":49,"column":329,"offset":4316},"end":{"line":49,"column":340,"offset":4327},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":340,"offset":4327},"end":{"line":49,"column":341,"offset":4328},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":49,"column":341,"offset":4328},"end":{"line":49,"column":347,"offset":4334},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":49,"column":347,"offset":4334},"end":{"line":49,"column":348,"offset":4335},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Logs","position":{"start":{"line":49,"column":350,"offset":4337},"end":{"line":49,"column":354,"offset":4341},"indent":[]}}],"position":{"start":{"line":49,"column":348,"offset":4335},"end":{"line":49,"column":356,"offset":4343},"indent":[]}},{"type":"text","value":".\n","position":{"start":{"line":49,"column":356,"offset":4343},"end":{"line":50,"column":1,"offset":4345},"indent":[1]}},{"type":"linkReference","identifier":"block:callout","label":"block:callout","referenceType":"shortcut","children":[{"type":"text","value":"block:callout","position":{"start":{"line":50,"column":2,"offset":4346},"end":{"line":50,"column":15,"offset":4359},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":4345},"end":{"line":50,"column":16,"offset":4360},"indent":[]}},{"type":"text","value":"\n{\n  \"type\": \"warning\",\n  \"title\": \"Disclaimer\",\n  \"body\": \"If you modify any core component of the integration, note that upgrading the application will not work as expected, and customizations are generally not supported by PagerDuty.\\n\\nPlease see ","position":{"start":{"line":50,"column":16,"offset":4360},"end":{"line":54,"column":203,"offset":4611},"indent":[1,1,1,1]}},{"type":"link","title":null,"url":"https://community.pagerduty.com/t/upgrading-a-servicenow-app-with-manual-changes/257","children":[{"type":"text","value":"Upgrading a ServiceNow App With Manual Changes","position":{"start":{"line":54,"column":204,"offset":4612},"end":{"line":54,"column":250,"offset":4658},"indent":[]}}],"position":{"start":{"line":54,"column":203,"offset":4611},"end":{"line":54,"column":337,"offset":4745},"indent":[]}},{"type":"text","value":" for more information on this process.\"\n}\n","position":{"start":{"line":54,"column":337,"offset":4745},"end":{"line":56,"column":1,"offset":4787},"indent":[1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":56,"column":2,"offset":4788},"end":{"line":56,"column":8,"offset":4794},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":4787},"end":{"line":56,"column":9,"offset":4795},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3988},"end":{"line":56,"column":9,"offset":4795},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":58,"column":2,"offset":4798},"end":{"line":58,"column":18,"offset":4814},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":4797},"end":{"line":58,"column":19,"offset":4815},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"The Core Components\"\n}\n","position":{"start":{"line":58,"column":19,"offset":4815},"end":{"line":62,"column":1,"offset":4853},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":62,"column":2,"offset":4854},"end":{"line":62,"column":8,"offset":4860},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":4853},"end":{"line":62,"column":9,"offset":4861},"indent":[]}},{"type":"text","value":"\nMost of the tasks performed to synchronize data between PagerDuty and ServiceNow are taken in the following application files, under ","position":{"start":{"line":62,"column":9,"offset":4861},"end":{"line":63,"column":134,"offset":4995},"indent":[1]}},{"type":"emphasis","children":[{"type":"text","value":"Script Includes","position":{"start":{"line":63,"column":135,"offset":4996},"end":{"line":63,"column":150,"offset":5011},"indent":[]}}],"position":{"start":{"line":63,"column":134,"offset":4995},"end":{"line":63,"column":151,"offset":5012},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":63,"column":151,"offset":5012},"end":{"line":63,"column":152,"offset":5013},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":4797},"end":{"line":63,"column":152,"offset":5013},"indent":[1,1,1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PagerDuty:","position":{"start":{"line":65,"column":5,"offset":5019},"end":{"line":65,"column":15,"offset":5029},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":5017},"end":{"line":65,"column":17,"offset":5031},"indent":[]}},{"type":"text","value":" Utilities for obtaining PagerDuty metadata, and functions for performing actions on  incidents, i.e. assigning to a user, synchronizing worknotes, and triggering new incidents.","position":{"start":{"line":65,"column":17,"offset":5031},"end":{"line":65,"column":194,"offset":5208},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":5017},"end":{"line":65,"column":194,"offset":5208},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":5015},"end":{"line":65,"column":194,"offset":5208},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PagerDutyInbound:","position":{"start":{"line":66,"column":5,"offset":5213},"end":{"line":66,"column":22,"offset":5230},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":5211},"end":{"line":66,"column":24,"offset":5232},"indent":[]}},{"type":"text","value":" Functions that handle receipt and processing of webhooks from PagerDuty","position":{"start":{"line":66,"column":24,"offset":5232},"end":{"line":66,"column":96,"offset":5304},"indent":[]}}],"position":{"start":{"line":66,"column":3,"offset":5211},"end":{"line":66,"column":96,"offset":5304},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":5209},"end":{"line":66,"column":96,"offset":5304},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PagerDutyProvisioning:","position":{"start":{"line":67,"column":5,"offset":5309},"end":{"line":67,"column":27,"offset":5331},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":5307},"end":{"line":67,"column":29,"offset":5333},"indent":[]}},{"type":"text","value":" Handles the creation of objects in PagerDuty from ServiceNow, or in the case of users, finding existing ones that match analogous ones in ServiceNow.","position":{"start":{"line":67,"column":29,"offset":5333},"end":{"line":67,"column":179,"offset":5483},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":5307},"end":{"line":67,"column":179,"offset":5483},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":5305},"end":{"line":67,"column":179,"offset":5483},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PagerDuty_REST:","position":{"start":{"line":68,"column":5,"offset":5488},"end":{"line":68,"column":20,"offset":5503},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":5486},"end":{"line":68,"column":22,"offset":5505},"indent":[]}},{"type":"text","value":" Core functions for making REST API requests, and in version 3.2.1 and earlier, Events API requests.","position":{"start":{"line":68,"column":22,"offset":5505},"end":{"line":68,"column":122,"offset":5605},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":5486},"end":{"line":68,"column":122,"offset":5605},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":5484},"end":{"line":68,"column":122,"offset":5605},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":5015},"end":{"line":68,"column":122,"offset":5605},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Each of the above defines a class constructor named after the script include. Methods of these classes are called throughout the rest of the application.","position":{"start":{"line":70,"column":1,"offset":5607},"end":{"line":70,"column":154,"offset":5760},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":5607},"end":{"line":70,"column":154,"offset":5760},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Another important file, which handles the importing of webhook data into ServiceNow incidents, is the ","position":{"start":{"line":72,"column":1,"offset":5762},"end":{"line":72,"column":103,"offset":5864},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Webhook Import","position":{"start":{"line":72,"column":105,"offset":5866},"end":{"line":72,"column":129,"offset":5890},"indent":[]}}],"position":{"start":{"line":72,"column":103,"offset":5864},"end":{"line":72,"column":131,"offset":5892},"indent":[]}},{"type":"text","value":" Table Transform Map, which can be found under the ","position":{"start":{"line":72,"column":131,"offset":5892},"end":{"line":72,"column":182,"offset":5943},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Application Files","position":{"start":{"line":72,"column":183,"offset":5944},"end":{"line":72,"column":200,"offset":5961},"indent":[]}}],"position":{"start":{"line":72,"column":182,"offset":5943},"end":{"line":72,"column":201,"offset":5962},"indent":[]}},{"type":"text","value":" tab.","position":{"start":{"line":72,"column":201,"offset":5962},"end":{"line":72,"column":206,"offset":5967},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":5762},"end":{"line":72,"column":206,"offset":5967},"indent":[]}},{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":75,"column":2,"offset":5971},"end":{"line":75,"column":18,"offset":5987},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":5970},"end":{"line":75,"column":19,"offset":5988},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Provisioning: Linking Objects Between Systems\"\n}\n","position":{"start":{"line":75,"column":19,"offset":5988},"end":{"line":79,"column":1,"offset":6052},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":79,"column":2,"offset":6053},"end":{"line":79,"column":8,"offset":6059},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":6052},"end":{"line":79,"column":9,"offset":6060},"indent":[]}},{"type":"text","value":"\nFor any user or assignment group, user or CI in ServiceNow to be recognized by the integration, it must be provisioned.","position":{"start":{"line":79,"column":9,"offset":6060},"end":{"line":80,"column":120,"offset":6180},"indent":[1]}}],"position":{"start":{"line":75,"column":1,"offset":5970},"end":{"line":80,"column":120,"offset":6180},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Objects can be provisioned by clicking \"Provision PagerDuty Service\" or \"Provision PagerDuty User\" under ","position":{"start":{"line":82,"column":1,"offset":6182},"end":{"line":82,"column":106,"offset":6287},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Related Links","position":{"start":{"line":82,"column":107,"offset":6288},"end":{"line":82,"column":120,"offset":6301},"indent":[]}}],"position":{"start":{"line":82,"column":106,"offset":6287},"end":{"line":82,"column":121,"offset":6302},"indent":[]}},{"type":"text","value":" in the view of the group, user, or configuration item, or by selecting several from the list view and selecting the option to provision them under the menu “actions on selected rows”.","position":{"start":{"line":82,"column":121,"offset":6302},"end":{"line":82,"column":305,"offset":6486},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":6182},"end":{"line":82,"column":305,"offset":6486},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This process will make the necessary REST API calls in the ","position":{"start":{"line":84,"column":1,"offset":6488},"end":{"line":84,"column":60,"offset":6547},"indent":[]}},{"type":"inlineCode","value":"PagerDutyProvisioning","position":{"start":{"line":84,"column":60,"offset":6547},"end":{"line":84,"column":83,"offset":6570},"indent":[]}},{"type":"text","value":" object, note the ID of the created (or existing) records, and save them in one of the following fields:","position":{"start":{"line":84,"column":83,"offset":6570},"end":{"line":84,"column":187,"offset":6674},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":6488},"end":{"line":84,"column":187,"offset":6674},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"User:","position":{"start":{"line":86,"column":3,"offset":6678},"end":{"line":86,"column":8,"offset":6683},"indent":[]}}],"position":{"start":{"line":86,"column":3,"offset":6678},"end":{"line":86,"column":8,"offset":6683},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PagerDuty ID","position":{"start":{"line":87,"column":6,"offset":6689},"end":{"line":87,"column":18,"offset":6701},"indent":[]}}],"position":{"start":{"line":87,"column":5,"offset":6688},"end":{"line":87,"column":19,"offset":6702},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":87,"column":19,"offset":6702},"end":{"line":87,"column":21,"offset":6704},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_id","position":{"start":{"line":87,"column":21,"offset":6704},"end":{"line":87,"column":52,"offset":6735},"indent":[]}},{"type":"text","value":": ID of a user in PagerDuty. When provisioning, if a user with identical login email to the user being provisioned is found, that user will be used, rather than creating a new user.","position":{"start":{"line":87,"column":52,"offset":6735},"end":{"line":87,"column":233,"offset":6916},"indent":[]}}],"position":{"start":{"line":87,"column":5,"offset":6688},"end":{"line":87,"column":233,"offset":6916},"indent":[]}}],"position":{"start":{"line":87,"column":3,"offset":6686},"end":{"line":87,"column":233,"offset":6916},"indent":[]}}],"position":{"start":{"line":87,"column":3,"offset":6686},"end":{"line":87,"column":233,"offset":6916},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":6676},"end":{"line":87,"column":233,"offset":6916},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Assignment Group:","position":{"start":{"line":88,"column":3,"offset":6919},"end":{"line":88,"column":20,"offset":6936},"indent":[]}}],"position":{"start":{"line":88,"column":3,"offset":6919},"end":{"line":88,"column":20,"offset":6936},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PagerDuty escalation","position":{"start":{"line":89,"column":6,"offset":6942},"end":{"line":89,"column":26,"offset":6962},"indent":[]}}],"position":{"start":{"line":89,"column":5,"offset":6941},"end":{"line":89,"column":27,"offset":6963},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":89,"column":27,"offset":6963},"end":{"line":89,"column":29,"offset":6965},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_escalation","position":{"start":{"line":89,"column":29,"offset":6965},"end":{"line":89,"column":68,"offset":7004},"indent":[]}},{"type":"text","value":": ID of an escalation policy in PagerDuty.","position":{"start":{"line":89,"column":68,"offset":7004},"end":{"line":89,"column":110,"offset":7046},"indent":[]}}],"position":{"start":{"line":89,"column":5,"offset":6941},"end":{"line":89,"column":110,"offset":7046},"indent":[]}}],"position":{"start":{"line":89,"column":3,"offset":6939},"end":{"line":89,"column":110,"offset":7046},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PagerDuty service","position":{"start":{"line":90,"column":6,"offset":7052},"end":{"line":90,"column":23,"offset":7069},"indent":[]}}],"position":{"start":{"line":90,"column":5,"offset":7051},"end":{"line":90,"column":24,"offset":7070},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":90,"column":24,"offset":7070},"end":{"line":90,"column":26,"offset":7072},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_service","position":{"start":{"line":90,"column":26,"offset":7072},"end":{"line":90,"column":62,"offset":7108},"indent":[]}},{"type":"text","value":": ID of a service in PagerDuty","position":{"start":{"line":90,"column":62,"offset":7108},"end":{"line":90,"column":92,"offset":7138},"indent":[]}}],"position":{"start":{"line":90,"column":5,"offset":7051},"end":{"line":90,"column":92,"offset":7138},"indent":[]}}],"position":{"start":{"line":90,"column":3,"offset":7049},"end":{"line":90,"column":92,"offset":7138},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"PagerDuty webhook","position":{"start":{"line":91,"column":6,"offset":7144},"end":{"line":91,"column":23,"offset":7161},"indent":[]}}],"position":{"start":{"line":91,"column":5,"offset":7143},"end":{"line":91,"column":24,"offset":7162},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":91,"column":24,"offset":7162},"end":{"line":91,"column":26,"offset":7164},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_webhook","position":{"start":{"line":91,"column":26,"offset":7164},"end":{"line":91,"column":62,"offset":7200},"indent":[]}},{"type":"text","value":" (v3.5 and later): ID of the extension on the PagerDuty service.","position":{"start":{"line":91,"column":62,"offset":7200},"end":{"line":91,"column":126,"offset":7264},"indent":[]}}],"position":{"start":{"line":91,"column":5,"offset":7143},"end":{"line":91,"column":126,"offset":7264},"indent":[]}}],"position":{"start":{"line":91,"column":3,"offset":7141},"end":{"line":91,"column":126,"offset":7264},"indent":[]}}],"position":{"start":{"line":89,"column":3,"offset":6939},"end":{"line":91,"column":126,"offset":7264},"indent":[3,3]}}],"position":{"start":{"line":88,"column":1,"offset":6917},"end":{"line":91,"column":126,"offset":7264},"indent":[1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Configuration Items: ","position":{"start":{"line":92,"column":3,"offset":7267},"end":{"line":92,"column":24,"offset":7288},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Service","position":{"start":{"line":92,"column":25,"offset":7289},"end":{"line":92,"column":42,"offset":7306},"indent":[]}}],"position":{"start":{"line":92,"column":24,"offset":7288},"end":{"line":92,"column":43,"offset":7307},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":92,"column":43,"offset":7307},"end":{"line":92,"column":48,"offset":7312},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Webhook","position":{"start":{"line":92,"column":49,"offset":7313},"end":{"line":92,"column":66,"offset":7330},"indent":[]}}],"position":{"start":{"line":92,"column":48,"offset":7312},"end":{"line":92,"column":67,"offset":7331},"indent":[]}},{"type":"text","value":", similar to assignment groups above.","position":{"start":{"line":92,"column":67,"offset":7331},"end":{"line":92,"column":104,"offset":7368},"indent":[]}}],"position":{"start":{"line":92,"column":3,"offset":7267},"end":{"line":92,"column":104,"offset":7368},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":7265},"end":{"line":92,"column":104,"offset":7368},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":6676},"end":{"line":92,"column":104,"offset":7368},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"When Users Are Auto-Provisioned","position":{"start":{"line":94,"column":4,"offset":7373},"end":{"line":94,"column":35,"offset":7404},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":7370},"end":{"line":94,"column":35,"offset":7404},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As of version 3.2.1, users in PagerDuty can optionally be provisioned for ServiceNow users, or the ServiceNow user's record will be linked to a PagerDuty user if one exists with the same email address, in only the scenario wherein they provision an assignment group. The user performing the provisioning is themselves auto-provisioned and then automatically added as the initial member of the new escalation policy in PagerDuty.","position":{"start":{"line":96,"column":1,"offset":7406},"end":{"line":96,"column":429,"offset":7834},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":7406},"end":{"line":96,"column":429,"offset":7834},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Special Usage of the Integration Fields","position":{"start":{"line":98,"column":4,"offset":7839},"end":{"line":98,"column":43,"offset":7878},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":7836},"end":{"line":98,"column":43,"offset":7878},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note, one can obtain the ID of any object in PagerDuty by going to its main view page and looking in the URL in your web browser. The ID should be a string of uppercase alphanumeric characters beginning with ","position":{"start":{"line":100,"column":1,"offset":7880},"end":{"line":100,"column":209,"offset":8088},"indent":[]}},{"type":"inlineCode","value":"P","position":{"start":{"line":100,"column":209,"offset":8088},"end":{"line":100,"column":212,"offset":8091},"indent":[]}},{"type":"text","value":", and will be close to the end of the URL. By this method, one can manually \"Provision\" objects by forcefully setting the appropriate fields in the ServiceNow objects according to existing records. ","position":{"start":{"line":100,"column":212,"offset":8091},"end":{"line":100,"column":410,"offset":8289},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":7880},"end":{"line":100,"column":410,"offset":8289},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In short, for the bidirectional integration, the following is how the fields are used:","position":{"start":{"line":102,"column":1,"offset":8291},"end":{"line":102,"column":87,"offset":8377},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":8291},"end":{"line":102,"column":87,"offset":8377},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When a ServiceNow incident triggers a PagerDuty incident, the ","position":{"start":{"line":104,"column":3,"offset":8381},"end":{"line":104,"column":65,"offset":8443},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Service","position":{"start":{"line":104,"column":66,"offset":8444},"end":{"line":104,"column":73,"offset":8451},"indent":[]}}],"position":{"start":{"line":104,"column":65,"offset":8443},"end":{"line":104,"column":74,"offset":8452},"indent":[]}},{"type":"text","value":" field of the assignment group is used to tell which PagerDuty service to trigger it on.","position":{"start":{"line":104,"column":74,"offset":8452},"end":{"line":104,"column":162,"offset":8540},"indent":[]}}],"position":{"start":{"line":104,"column":3,"offset":8381},"end":{"line":104,"column":162,"offset":8540},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":8379},"end":{"line":104,"column":162,"offset":8540},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When a PagerDuty incident opens a ServiceNow incident via webhook import, the assignment group is looked up by value of the ","position":{"start":{"line":105,"column":3,"offset":8543},"end":{"line":105,"column":127,"offset":8667},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Escalation","position":{"start":{"line":105,"column":128,"offset":8668},"end":{"line":105,"column":138,"offset":8678},"indent":[]}}],"position":{"start":{"line":105,"column":127,"offset":8667},"end":{"line":105,"column":139,"offset":8679},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":105,"column":139,"offset":8679},"end":{"line":105,"column":146,"offset":8686},"indent":[]}}],"position":{"start":{"line":105,"column":3,"offset":8543},"end":{"line":105,"column":146,"offset":8686},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":8541},"end":{"line":105,"column":146,"offset":8686},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":8379},"end":{"line":105,"column":146,"offset":8686},"indent":[1]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"It is preferable to avoid associating more than one ServiceNow group with the same escalation policy.","position":{"start":{"line":107,"column":2,"offset":8689},"end":{"line":107,"column":103,"offset":8790},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":8688},"end":{"line":107,"column":104,"offset":8791},"indent":[]}},{"type":"text","value":" This is because the webhook transform map, if it finds more than one assignment group with the same escalation policy ID, will assign the ServiceNow incident to the first assignment group that it finds whose ","position":{"start":{"line":107,"column":104,"offset":8791},"end":{"line":107,"column":313,"offset":9000},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_escalation","position":{"start":{"line":107,"column":313,"offset":9000},"end":{"line":107,"column":352,"offset":9039},"indent":[]}},{"type":"text","value":" column value matches the escalation policy ID in the webhook.","position":{"start":{"line":107,"column":352,"offset":9039},"end":{"line":107,"column":414,"offset":9101},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":8688},"end":{"line":107,"column":414,"offset":9101},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Conversely, it should be possible to manually associate an assignment group with multiple services, which all use the same escalation policy, and have the integration still work smoothly. This is because it identifies the assignment group by escalation policy ID, and there's one escalation policy for all the services, so the service ID has no bearing in this part of the process (see ","position":{"start":{"line":109,"column":1,"offset":9103},"end":{"line":109,"column":387,"offset":9489},"indent":[]}},{"type":"link","title":null,"url":"https://support.pagerduty.com/v1/docs/servicenow#section-webhook-import-pagerduty-to-servicenow","children":[{"type":"text","value":"PagerDuty to ServiceNow: The Webhook Import Process","position":{"start":{"line":109,"column":388,"offset":9490},"end":{"line":109,"column":439,"offset":9541},"indent":[]}}],"position":{"start":{"line":109,"column":387,"offset":9489},"end":{"line":109,"column":537,"offset":9639},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":109,"column":537,"offset":9639},"end":{"line":109,"column":538,"offset":9640},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":9103},"end":{"line":109,"column":538,"offset":9640},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the opposite direction, ServiceNow incidents can only trigger incidents in PagerDuty on one service: the one whose ID is stored in the assignment group's ","position":{"start":{"line":111,"column":1,"offset":9642},"end":{"line":111,"column":158,"offset":9799},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Service","position":{"start":{"line":111,"column":159,"offset":9800},"end":{"line":111,"column":176,"offset":9817},"indent":[]}}],"position":{"start":{"line":111,"column":158,"offset":9799},"end":{"line":111,"column":177,"offset":9818},"indent":[]}},{"type":"text","value":" field.\n","position":{"start":{"line":111,"column":177,"offset":9818},"end":{"line":112,"column":1,"offset":9826},"indent":[1]}},{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":112,"column":2,"offset":9827},"end":{"line":112,"column":18,"offset":9843},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":9826},"end":{"line":112,"column":19,"offset":9844},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Business Rules: ServiceNow to PagerDuty\"\n}\n","position":{"start":{"line":112,"column":19,"offset":9844},"end":{"line":116,"column":1,"offset":9902},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":116,"column":2,"offset":9903},"end":{"line":116,"column":8,"offset":9909},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":9902},"end":{"line":116,"column":9,"offset":9910},"indent":[]}},{"type":"text","value":"\nAll aspects of the integration that concern any flow of data from ServiceNow to PagerDuty are handled by business rules that begin when an event such as an insertion, update or deletion takes place on an incident. If the conditions of a business rule are met, the rule and its associated script are run, which invokes a transaction with the PagerDuty API to perform the necessary actions in PagerDuty.","position":{"start":{"line":116,"column":9,"offset":9910},"end":{"line":117,"column":402,"offset":10312},"indent":[1]}}],"position":{"start":{"line":111,"column":1,"offset":9642},"end":{"line":117,"column":402,"offset":10312},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you are unfamiliar with ServiceNow business rules, the two-part video series ","position":{"start":{"line":119,"column":1,"offset":10314},"end":{"line":119,"column":81,"offset":10394},"indent":[]}},{"type":"link","title":null,"url":"https://hi.service-now.com/kb_view.do?sysparm_article=KB0540192","children":[{"type":"text","value":"Business Rules | Best Practices","position":{"start":{"line":119,"column":82,"offset":10395},"end":{"line":119,"column":113,"offset":10426},"indent":[]}}],"position":{"start":{"line":119,"column":81,"offset":10394},"end":{"line":119,"column":179,"offset":10492},"indent":[]}},{"type":"text","value":" from the ServiceNow knowledge base is highly recommended, as is the article ","position":{"start":{"line":119,"column":179,"offset":10492},"end":{"line":119,"column":256,"offset":10569},"indent":[]}},{"type":"link","title":null,"url":"http://wiki.servicenow.com/index.php?title=Business_Rules#gsc.tab=0","children":[{"type":"text","value":"Business Rules","position":{"start":{"line":119,"column":257,"offset":10570},"end":{"line":119,"column":271,"offset":10584},"indent":[]}}],"position":{"start":{"line":119,"column":256,"offset":10569},"end":{"line":119,"column":341,"offset":10654},"indent":[]}},{"type":"text","value":" in the ServiceNow Wiki.","position":{"start":{"line":119,"column":341,"offset":10654},"end":{"line":119,"column":365,"offset":10678},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":10314},"end":{"line":119,"column":365,"offset":10678},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"How PagerDuty Incidents Are Triggered","position":{"start":{"line":121,"column":4,"offset":10683},"end":{"line":121,"column":41,"offset":10720},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":10680},"end":{"line":121,"column":41,"offset":10720},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Consider the event named ","position":{"start":{"line":123,"column":1,"offset":10722},"end":{"line":123,"column":26,"offset":10747},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.trigger_incident","position":{"start":{"line":123,"column":26,"offset":10747},"end":{"line":123,"column":61,"offset":10782},"indent":[]}},{"type":"text","value":", handled by the ","position":{"start":{"line":123,"column":61,"offset":10782},"end":{"line":123,"column":78,"offset":10799},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Trigger Incident","position":{"start":{"line":123,"column":80,"offset":10801},"end":{"line":123,"column":106,"offset":10827},"indent":[]}}],"position":{"start":{"line":123,"column":78,"offset":10799},"end":{"line":123,"column":108,"offset":10829},"indent":[]}},{"type":"text","value":" script action. This event is raised by one of the following business rules:","position":{"start":{"line":123,"column":108,"offset":10829},"end":{"line":123,"column":184,"offset":10905},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":10722},"end":{"line":123,"column":184,"offset":10905},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD Trigger PagerDuty Incident:","position":{"start":{"line":125,"column":5,"offset":10911},"end":{"line":125,"column":35,"offset":10941},"indent":[]}}],"position":{"start":{"line":125,"column":3,"offset":10909},"end":{"line":125,"column":37,"offset":10943},"indent":[]}},{"type":"text","value":" An incident that has no corresponding PagerDuty incident is created in ServiceNow, assigned to a PagerDuty-linked group, having Priority 1 or 2, or a preexisting one has its priority updated to 1 or 2.","position":{"start":{"line":125,"column":37,"offset":10943},"end":{"line":125,"column":239,"offset":11145},"indent":[]}}],"position":{"start":{"line":125,"column":3,"offset":10909},"end":{"line":125,"column":239,"offset":11145},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":10907},"end":{"line":125,"column":239,"offset":11145},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD Group Assign Trigger New Incident:","position":{"start":{"line":126,"column":5,"offset":11150},"end":{"line":126,"column":42,"offset":11187},"indent":[]}}],"position":{"start":{"line":126,"column":3,"offset":11148},"end":{"line":126,"column":44,"offset":11189},"indent":[]}},{"type":"text","value":" A pre-existing incident that was previously tied to a PagerDuty incident, but that was \"unlinked\" by assigning it to a non-provisioned assignment group (per the business rule ","position":{"start":{"line":126,"column":44,"offset":11189},"end":{"line":126,"column":220,"offset":11365},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PD Unlink if not PagerDuty group","position":{"start":{"line":126,"column":221,"offset":11366},"end":{"line":126,"column":253,"offset":11398},"indent":[]}}],"position":{"start":{"line":126,"column":220,"offset":11365},"end":{"line":126,"column":254,"offset":11399},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":126,"column":254,"offset":11399},"end":{"line":126,"column":255,"offset":11400},"indent":[]}}],"position":{"start":{"line":126,"column":3,"offset":11148},"end":{"line":126,"column":255,"offset":11400},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":11146},"end":{"line":126,"column":255,"offset":11400},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":10907},"end":{"line":126,"column":255,"offset":11400},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"There is an additional condition that is tested for in a dynamic manner based on the ","position":{"start":{"line":128,"column":1,"offset":11402},"end":{"line":128,"column":86,"offset":11487},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Choose ServiceNow to PagerDuty mapping","position":{"start":{"line":128,"column":87,"offset":11488},"end":{"line":128,"column":125,"offset":11526},"indent":[]}}],"position":{"start":{"line":128,"column":86,"offset":11487},"end":{"line":128,"column":126,"offset":11527},"indent":[]}},{"type":"text","value":" setting: the assignment group and/or configuration item must be provisioned; see the ","position":{"start":{"line":128,"column":126,"offset":11527},"end":{"line":128,"column":212,"offset":11613},"indent":[]}},{"type":"link","title":null,"url":"https://support.pagerduty.com/docs/servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-","children":[{"type":"text","value":"“When is an incident sent to PagerDuty?”","position":{"start":{"line":128,"column":213,"offset":11614},"end":{"line":128,"column":253,"offset":11654},"indent":[]}}],"position":{"start":{"line":128,"column":212,"offset":11613},"end":{"line":128,"column":352,"offset":11753},"indent":[]}},{"type":"text","value":" article.","position":{"start":{"line":128,"column":352,"offset":11753},"end":{"line":128,"column":361,"offset":11762},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":11402},"end":{"line":128,"column":361,"offset":11762},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In brief: the service in PagerDuty on which the incident will be triggered is determined by the ","position":{"start":{"line":130,"column":1,"offset":11764},"end":{"line":130,"column":97,"offset":11860},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Service","position":{"start":{"line":130,"column":98,"offset":11861},"end":{"line":130,"column":115,"offset":11878},"indent":[]}}],"position":{"start":{"line":130,"column":97,"offset":11860},"end":{"line":130,"column":116,"offset":11879},"indent":[]}},{"type":"text","value":" field in the ServiceNow assignment group to which the incident is assigned, or the similarly-named field in the configuration item to which the incident corresponds, or (optional, to provide a catch-all) the value specified for ","position":{"start":{"line":130,"column":116,"offset":11879},"end":{"line":130,"column":345,"offset":12108},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Default PagerDuty Service ID","position":{"start":{"line":130,"column":346,"offset":12109},"end":{"line":130,"column":374,"offset":12137},"indent":[]}}],"position":{"start":{"line":130,"column":345,"offset":12108},"end":{"line":130,"column":375,"offset":12138},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":130,"column":375,"offset":12138},"end":{"line":130,"column":376,"offset":12139},"indent":[]}}],"position":{"start":{"line":130,"column":1,"offset":11764},"end":{"line":130,"column":376,"offset":12139},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The test for this is done in the ","position":{"start":{"line":132,"column":1,"offset":12141},"end":{"line":132,"column":34,"offset":12174},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":132,"column":35,"offset":12175},"end":{"line":132,"column":44,"offset":12184},"indent":[]}}],"position":{"start":{"line":132,"column":34,"offset":12174},"end":{"line":132,"column":45,"offset":12185},"indent":[]}},{"type":"text","value":" Script Include, in the function ","position":{"start":{"line":132,"column":45,"offset":12185},"end":{"line":132,"column":78,"offset":12218},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.triggerIncident","position":{"start":{"line":132,"column":78,"offset":12218},"end":{"line":132,"column":105,"offset":12245},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":132,"column":105,"offset":12245},"end":{"line":132,"column":106,"offset":12246},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":12141},"end":{"line":132,"column":106,"offset":12246},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"How PagerDuty Incidents Are Resolved","position":{"start":{"line":134,"column":4,"offset":12251},"end":{"line":134,"column":40,"offset":12287},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":12248},"end":{"line":134,"column":40,"offset":12287},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following business rules resolve PagerDuty incidents from ServiceNow:","position":{"start":{"line":136,"column":1,"offset":12289},"end":{"line":136,"column":74,"offset":12362},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":12289},"end":{"line":136,"column":74,"offset":12362},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD Resolve PagerDuty Incident:","position":{"start":{"line":138,"column":5,"offset":12368},"end":{"line":138,"column":35,"offset":12398},"indent":[]}}],"position":{"start":{"line":138,"column":3,"offset":12366},"end":{"line":138,"column":37,"offset":12400},"indent":[]}},{"type":"text","value":" the incident's ","position":{"start":{"line":138,"column":37,"offset":12400},"end":{"line":138,"column":53,"offset":12416},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"State","position":{"start":{"line":138,"column":54,"offset":12417},"end":{"line":138,"column":59,"offset":12422},"indent":[]}}],"position":{"start":{"line":138,"column":53,"offset":12416},"end":{"line":138,"column":60,"offset":12423},"indent":[]}},{"type":"text","value":" field must change to 6 or 7 (resolved/closed) and the incident must be linked. This raises the ","position":{"start":{"line":138,"column":60,"offset":12423},"end":{"line":138,"column":156,"offset":12519},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.resolve_incident","position":{"start":{"line":138,"column":156,"offset":12519},"end":{"line":138,"column":191,"offset":12554},"indent":[]}},{"type":"text","value":" event, handled by the ","position":{"start":{"line":138,"column":191,"offset":12554},"end":{"line":138,"column":214,"offset":12577},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Resolve Incident","position":{"start":{"line":138,"column":216,"offset":12579},"end":{"line":138,"column":242,"offset":12605},"indent":[]}}],"position":{"start":{"line":138,"column":214,"offset":12577},"end":{"line":138,"column":244,"offset":12607},"indent":[]}},{"type":"text","value":" script action. The ","position":{"start":{"line":138,"column":244,"offset":12607},"end":{"line":138,"column":264,"offset":12627},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.resolveIncident","position":{"start":{"line":138,"column":264,"offset":12627},"end":{"line":138,"column":291,"offset":12654},"indent":[]}},{"type":"text","value":" function is called to resolve the incident.","position":{"start":{"line":138,"column":291,"offset":12654},"end":{"line":138,"column":335,"offset":12698},"indent":[]}}],"position":{"start":{"line":138,"column":3,"offset":12366},"end":{"line":138,"column":335,"offset":12698},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":12364},"end":{"line":138,"column":335,"offset":12698},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD Unlink if not PagerDuty group:","position":{"start":{"line":139,"column":5,"offset":12703},"end":{"line":139,"column":38,"offset":12736},"indent":[]}}],"position":{"start":{"line":139,"column":3,"offset":12701},"end":{"line":139,"column":40,"offset":12738},"indent":[]}},{"type":"text","value":" if a linked incident is assigned to a non-provisioned assignment group, it is assumed that it will be handled outside of the PagerDuty incident response process. Hence, the PagerDuty incident will be resolved. This process happens as follows:","position":{"start":{"line":139,"column":40,"offset":12738},"end":{"line":139,"column":283,"offset":12981},"indent":[]}}],"position":{"start":{"line":139,"column":3,"offset":12701},"end":{"line":139,"column":283,"offset":12981},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":140,"column":6,"offset":12987},"end":{"line":140,"column":10,"offset":12991},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Incident","position":{"start":{"line":140,"column":12,"offset":12993},"end":{"line":140,"column":30,"offset":13011},"indent":[]}}],"position":{"start":{"line":140,"column":10,"offset":12991},"end":{"line":140,"column":32,"offset":13013},"indent":[]}},{"type":"text","value":" field on the ServiceNow incident record is set to to ","position":{"start":{"line":140,"column":32,"offset":13013},"end":{"line":140,"column":86,"offset":13067},"indent":[]}},{"type":"inlineCode","value":"---unlinked---","position":{"start":{"line":140,"column":86,"offset":13067},"end":{"line":140,"column":102,"offset":13083},"indent":[]}},{"type":"text","value":". ","position":{"start":{"line":140,"column":102,"offset":13083},"end":{"line":140,"column":104,"offset":13085},"indent":[]}}],"position":{"start":{"line":140,"column":6,"offset":12987},"end":{"line":140,"column":104,"offset":13085},"indent":[]}}],"position":{"start":{"line":140,"column":3,"offset":12984},"end":{"line":140,"column":104,"offset":13085},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"This sets off the business rule ","position":{"start":{"line":141,"column":6,"offset":13091},"end":{"line":141,"column":38,"offset":13123},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PD Resolve Incident on Unlink","position":{"start":{"line":141,"column":40,"offset":13125},"end":{"line":141,"column":69,"offset":13154},"indent":[]}}],"position":{"start":{"line":141,"column":38,"offset":13123},"end":{"line":141,"column":71,"offset":13156},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":141,"column":71,"offset":13156},"end":{"line":141,"column":72,"offset":13157},"indent":[]}}],"position":{"start":{"line":141,"column":6,"offset":13091},"end":{"line":141,"column":72,"offset":13157},"indent":[]}}],"position":{"start":{"line":141,"column":3,"offset":13088},"end":{"line":141,"column":72,"offset":13157},"indent":[]}}],"position":{"start":{"line":140,"column":3,"offset":12984},"end":{"line":141,"column":72,"offset":13157},"indent":[3]}}],"position":{"start":{"line":139,"column":1,"offset":12699},"end":{"line":141,"column":72,"offset":13157},"indent":[1,1]}}],"position":{"start":{"line":138,"column":1,"offset":12364},"end":{"line":141,"column":72,"offset":13157},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The latter of these raises the ","position":{"start":{"line":143,"column":1,"offset":13159},"end":{"line":143,"column":32,"offset":13190},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.resolve_on_unreference","position":{"start":{"line":143,"column":32,"offset":13190},"end":{"line":143,"column":73,"offset":13231},"indent":[]}},{"type":"text","value":" event, handled by the ","position":{"start":{"line":143,"column":73,"offset":13231},"end":{"line":143,"column":96,"offset":13254},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Resolve on Unreference","position":{"start":{"line":143,"column":97,"offset":13255},"end":{"line":143,"column":129,"offset":13287},"indent":[]}}],"position":{"start":{"line":143,"column":96,"offset":13254},"end":{"line":143,"column":130,"offset":13288},"indent":[]}},{"type":"text","value":" script action, which calls ","position":{"start":{"line":143,"column":130,"offset":13288},"end":{"line":143,"column":158,"offset":13316},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.resolveOnUnreference","position":{"start":{"line":143,"column":158,"offset":13316},"end":{"line":143,"column":190,"offset":13348},"indent":[]}},{"type":"text","value":" to resolve and post a worknote to the PagerDuty incident to indicate that it was resolved for this reason.","position":{"start":{"line":143,"column":190,"offset":13348},"end":{"line":143,"column":297,"offset":13455},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":13159},"end":{"line":143,"column":297,"offset":13455},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Reassignment and Delegation","position":{"start":{"line":145,"column":4,"offset":13460},"end":{"line":145,"column":31,"offset":13487},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":13457},"end":{"line":145,"column":32,"offset":13488},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Incidents in ServiceNow, when assigned to a user or assignment group, may trigger one of the following business rules:","position":{"start":{"line":147,"column":1,"offset":13490},"end":{"line":147,"column":119,"offset":13608},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":13490},"end":{"line":147,"column":119,"offset":13608},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD User Assign:","position":{"start":{"line":149,"column":5,"offset":13614},"end":{"line":149,"column":20,"offset":13629},"indent":[]}}],"position":{"start":{"line":149,"column":3,"offset":13612},"end":{"line":149,"column":22,"offset":13631},"indent":[]}},{"type":"text","value":" If a provisioned user is assigned a linked incident, this escalates the PagerDuty incident to the user in PagerDuty, by raising the ","position":{"start":{"line":149,"column":22,"offset":13631},"end":{"line":149,"column":155,"offset":13764},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.assign_incident_user","position":{"start":{"line":149,"column":155,"offset":13764},"end":{"line":149,"column":194,"offset":13803},"indent":[]}},{"type":"text","value":" event, which is handled by the ","position":{"start":{"line":149,"column":194,"offset":13803},"end":{"line":149,"column":226,"offset":13835},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty User Assign Incident","position":{"start":{"line":149,"column":228,"offset":13837},"end":{"line":149,"column":258,"offset":13867},"indent":[]}}],"position":{"start":{"line":149,"column":226,"offset":13835},"end":{"line":149,"column":260,"offset":13869},"indent":[]}},{"type":"text","value":" script action, which calls the ","position":{"start":{"line":149,"column":260,"offset":13869},"end":{"line":149,"column":292,"offset":13901},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.assignIncidentToUser","position":{"start":{"line":149,"column":292,"offset":13901},"end":{"line":149,"column":324,"offset":13933},"indent":[]}},{"type":"text","value":" function.","position":{"start":{"line":149,"column":324,"offset":13933},"end":{"line":149,"column":334,"offset":13943},"indent":[]}}],"position":{"start":{"line":149,"column":3,"offset":13612},"end":{"line":149,"column":334,"offset":13943},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":13610},"end":{"line":149,"column":334,"offset":13943},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PD Group Policy Assign:","position":{"start":{"line":150,"column":5,"offset":13948},"end":{"line":150,"column":28,"offset":13971},"indent":[]}}],"position":{"start":{"line":150,"column":3,"offset":13946},"end":{"line":150,"column":30,"offset":13973},"indent":[]}},{"type":"text","value":" if the assignment group of a linked incident changes, and the new assignment group is provisioned, the corresponding PagerDuty incident will be delegated to the Escalation Policy in PagerDuty specified by the assignment group's ","position":{"start":{"line":150,"column":30,"offset":13973},"end":{"line":150,"column":259,"offset":14202},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Escalation","position":{"start":{"line":150,"column":261,"offset":14204},"end":{"line":150,"column":281,"offset":14224},"indent":[]}}],"position":{"start":{"line":150,"column":259,"offset":14202},"end":{"line":150,"column":283,"offset":14226},"indent":[]}},{"type":"text","value":" field. This will restart escalation and notify the new assignees in the target policy.\n","position":{"start":{"line":150,"column":283,"offset":14226},"end":{"line":151,"column":1,"offset":14314},"indent":[1]}},{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":151,"column":2,"offset":14315},"end":{"line":151,"column":18,"offset":14331},"indent":[]}}],"position":{"start":{"line":151,"column":1,"offset":14314},"end":{"line":151,"column":19,"offset":14332},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Worknote Synchronization\"\n}\n","position":{"start":{"line":151,"column":19,"offset":14332},"end":{"line":155,"column":1,"offset":14375},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":155,"column":2,"offset":14376},"end":{"line":155,"column":8,"offset":14382},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":14375},"end":{"line":155,"column":9,"offset":14383},"indent":[]}}],"position":{"start":{"line":150,"column":3,"offset":13946},"end":{"line":155,"column":9,"offset":14383},"indent":[1,1,1,1,1]}}],"position":{"start":{"line":150,"column":1,"offset":13944},"end":{"line":155,"column":9,"offset":14383},"indent":[1,1,1,1,1]}}],"position":{"start":{"line":149,"column":1,"offset":13610},"end":{"line":155,"column":9,"offset":14383},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"ServiceNow Worknotes to PagerDuty","position":{"start":{"line":156,"column":4,"offset":14387},"end":{"line":156,"column":37,"offset":14420},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":14384},"end":{"line":156,"column":37,"offset":14420},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"*Worknotes are copied from ServiceNow to PagerDuty through the ","position":{"start":{"line":158,"column":1,"offset":14422},"end":{"line":158,"column":64,"offset":14485},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PD Copy worknote to PagerDuty incident","position":{"start":{"line":158,"column":66,"offset":14487},"end":{"line":158,"column":104,"offset":14525},"indent":[]}}],"position":{"start":{"line":158,"column":64,"offset":14485},"end":{"line":158,"column":106,"offset":14527},"indent":[]}},{"type":"text","value":" business rule, which triggers the ","position":{"start":{"line":158,"column":106,"offset":14527},"end":{"line":158,"column":141,"offset":14562},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.post_worknote","position":{"start":{"line":158,"column":141,"offset":14562},"end":{"line":158,"column":173,"offset":14594},"indent":[]}},{"type":"text","value":" event, which then invokes the ","position":{"start":{"line":158,"column":173,"offset":14594},"end":{"line":158,"column":204,"offset":14625},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.postIncidentNote","position":{"start":{"line":158,"column":204,"offset":14625},"end":{"line":158,"column":232,"offset":14653},"indent":[]}},{"type":"text","value":" function. This runs on any update of a linked incident wherein the work notes change.","position":{"start":{"line":158,"column":232,"offset":14653},"end":{"line":158,"column":318,"offset":14739},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":14422},"end":{"line":158,"column":318,"offset":14739},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"PagerDuty Incident Notes to ServiceNow Work Notes","position":{"start":{"line":160,"column":4,"offset":14744},"end":{"line":160,"column":53,"offset":14793},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":14741},"end":{"line":160,"column":53,"offset":14793},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Starting in version 5, notes are synchronized in near real time by utilizing the new ","position":{"start":{"line":162,"column":1,"offset":14795},"end":{"line":162,"column":86,"offset":14880},"indent":[]}},{"type":"inlineCode","value":"incident.annotate","position":{"start":{"line":162,"column":86,"offset":14880},"end":{"line":162,"column":105,"offset":14899},"indent":[]}},{"type":"text","value":" webhook event type. When a user adds a note to the incident in PagerDuty, the webhook transform will recognize this event as such, and add the note as a worknote with the suffix `(PagerDuty: USER-NAME-HERE on TIMESTAMP-HERE)' identifying the PagerDuty user who added the note.","position":{"start":{"line":162,"column":105,"offset":14899},"end":{"line":162,"column":382,"offset":15176},"indent":[]}}],"position":{"start":{"line":162,"column":1,"offset":14795},"end":{"line":162,"column":382,"offset":15176},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In earlier versions, the process that runs in the opposite direction was initiated by a business rule, apart from just the UI Action ","position":{"start":{"line":164,"column":1,"offset":15178},"end":{"line":164,"column":134,"offset":15311},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Refresh PagerDuty Notes","position":{"start":{"line":164,"column":135,"offset":15312},"end":{"line":164,"column":158,"offset":15335},"indent":[]}}],"position":{"start":{"line":164,"column":134,"offset":15311},"end":{"line":164,"column":159,"offset":15336},"indent":[]}},{"type":"text","value":", which appeared as an action in the context menu for any given linked incident. The mechanism is thus polling; it is done through the business rule ","position":{"start":{"line":164,"column":159,"offset":15336},"end":{"line":164,"column":308,"offset":15485},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PD Update Worknotes from PagerDuty Notes","position":{"start":{"line":164,"column":310,"offset":15487},"end":{"line":164,"column":350,"offset":15527},"indent":[]}}],"position":{"start":{"line":164,"column":308,"offset":15485},"end":{"line":164,"column":352,"offset":15529},"indent":[]}},{"type":"text","value":", raising the event ","position":{"start":{"line":164,"column":352,"offset":15529},"end":{"line":164,"column":372,"offset":15549},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.import_notes","position":{"start":{"line":164,"column":372,"offset":15549},"end":{"line":164,"column":403,"offset":15580},"indent":[]}},{"type":"text","value":" (handled by the ","position":{"start":{"line":164,"column":403,"offset":15580},"end":{"line":164,"column":420,"offset":15597},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Import Notes from PagerDuty incident","position":{"start":{"line":164,"column":421,"offset":15598},"end":{"line":164,"column":457,"offset":15634},"indent":[]}}],"position":{"start":{"line":164,"column":420,"offset":15597},"end":{"line":164,"column":458,"offset":15635},"indent":[]}},{"type":"text","value":" script action). In both cases, the functions ","position":{"start":{"line":164,"column":458,"offset":15635},"end":{"line":164,"column":504,"offset":15681},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.getIncidentNotes","position":{"start":{"line":164,"column":504,"offset":15681},"end":{"line":164,"column":532,"offset":15709},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":164,"column":532,"offset":15709},"end":{"line":164,"column":537,"offset":15714},"indent":[]}},{"type":"inlineCode","value":"PagerDuty.createNoteImports","position":{"start":{"line":164,"column":537,"offset":15714},"end":{"line":164,"column":566,"offset":15743},"indent":[]}},{"type":"text","value":" are used to import and save notes from PagerDuty.\n","position":{"start":{"line":164,"column":566,"offset":15743},"end":{"line":165,"column":1,"offset":15794},"indent":[1]}},{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":165,"column":2,"offset":15795},"end":{"line":165,"column":18,"offset":15811},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":15794},"end":{"line":165,"column":19,"offset":15812},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Webhook Import: PagerDuty to ServiceNow\"\n}\n","position":{"start":{"line":165,"column":19,"offset":15812},"end":{"line":169,"column":1,"offset":15870},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":169,"column":2,"offset":15871},"end":{"line":169,"column":8,"offset":15877},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":15870},"end":{"line":169,"column":9,"offset":15878},"indent":[]}},{"type":"text","value":"\nReal-time updates to incidents in PagerDuty are communicated to ServiceNow through ","position":{"start":{"line":169,"column":9,"offset":15878},"end":{"line":170,"column":84,"offset":15962},"indent":[1]}},{"type":"link","title":null,"url":"/docs/extensions-and-add-ons#section-extensions","children":[{"type":"text","value":"extensions","position":{"start":{"line":170,"column":85,"offset":15963},"end":{"line":170,"column":95,"offset":15973},"indent":[]}}],"position":{"start":{"line":170,"column":84,"offset":15962},"end":{"line":170,"column":145,"offset":16023},"indent":[]}},{"type":"text","value":", created on each PagerDuty service that corresponds to a provisioned assignment group in ServiceNow. When a group is initially provisioned, an extension will also be created on the service. In version 3.5 and later, an extension on the service will be provisioned automatically if one does not already exist, whenever a new incident is created.","position":{"start":{"line":170,"column":145,"offset":16023},"end":{"line":170,"column":490,"offset":16368},"indent":[]}}],"position":{"start":{"line":164,"column":1,"offset":15178},"end":{"line":170,"column":490,"offset":16368},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The extensions, also known as webhooks, specify URLs in the ServiceNow instances to which JSON-encoded data is sent via HTTPS/POST requests.","position":{"start":{"line":172,"column":1,"offset":16370},"end":{"line":172,"column":141,"offset":16510},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":16370},"end":{"line":172,"column":141,"offset":16510},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Precedence and Order of Operations in Webhook Import","position":{"start":{"line":174,"column":4,"offset":16515},"end":{"line":174,"column":56,"offset":16567},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":16512},"end":{"line":174,"column":56,"offset":16567},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Throughout the webhook import process, automation and record creation in ServiceNow happens in the following order:","position":{"start":{"line":176,"column":1,"offset":16569},"end":{"line":176,"column":116,"offset":16684},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":16569},"end":{"line":176,"column":116,"offset":16684},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Run the default import actions","position":{"start":{"line":178,"column":6,"offset":16691},"end":{"line":178,"column":36,"offset":16721},"indent":[]}}],"position":{"start":{"line":178,"column":4,"offset":16689},"end":{"line":178,"column":38,"offset":16723},"indent":[]}}],"position":{"start":{"line":178,"column":4,"offset":16689},"end":{"line":178,"column":38,"offset":16723},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":16686},"end":{"line":178,"column":38,"offset":16723},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Run dynamic field mapping rules","position":{"start":{"line":179,"column":6,"offset":16729},"end":{"line":179,"column":37,"offset":16760},"indent":[]}}],"position":{"start":{"line":179,"column":4,"offset":16727},"end":{"line":179,"column":39,"offset":16762},"indent":[]}}],"position":{"start":{"line":179,"column":4,"offset":16727},"end":{"line":179,"column":39,"offset":16762},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":16724},"end":{"line":179,"column":39,"offset":16762},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Run the custom script, if any","position":{"start":{"line":180,"column":6,"offset":16768},"end":{"line":180,"column":35,"offset":16797},"indent":[]}}],"position":{"start":{"line":180,"column":4,"offset":16766},"end":{"line":180,"column":37,"offset":16799},"indent":[]}}],"position":{"start":{"line":180,"column":4,"offset":16766},"end":{"line":180,"column":37,"offset":16799},"indent":[]}}],"position":{"start":{"line":180,"column":1,"offset":16763},"end":{"line":180,"column":37,"offset":16799},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":16686},"end":{"line":180,"column":37,"offset":16799},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Initial receiving and importing of the webhook","position":{"start":{"line":182,"column":4,"offset":16804},"end":{"line":182,"column":50,"offset":16850},"indent":[]}}],"position":{"start":{"line":182,"column":1,"offset":16801},"end":{"line":182,"column":50,"offset":16850},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first point of entry into the ServiceNow application is the ","position":{"start":{"line":184,"column":1,"offset":16852},"end":{"line":184,"column":65,"offset":16916},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Webhook Post","position":{"start":{"line":184,"column":67,"offset":16918},"end":{"line":184,"column":79,"offset":16930},"indent":[]}}],"position":{"start":{"line":184,"column":65,"offset":16916},"end":{"line":184,"column":81,"offset":16932},"indent":[]}},{"type":"text","value":" Scripted REST Resource, found in the ","position":{"start":{"line":184,"column":81,"offset":16932},"end":{"line":184,"column":119,"offset":16970},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Application Files","position":{"start":{"line":184,"column":120,"offset":16971},"end":{"line":184,"column":137,"offset":16988},"indent":[]}}],"position":{"start":{"line":184,"column":119,"offset":16970},"end":{"line":184,"column":138,"offset":16989},"indent":[]}},{"type":"text","value":" tab. This component handles the receipt of the payload, validation of the webhook key / endpoint path, and generating the response. The processing of the data itself is done by the ","position":{"start":{"line":184,"column":138,"offset":16989},"end":{"line":184,"column":320,"offset":17171},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDutyInbound","position":{"start":{"line":184,"column":322,"offset":17173},"end":{"line":184,"column":338,"offset":17189},"indent":[]}}],"position":{"start":{"line":184,"column":320,"offset":17171},"end":{"line":184,"column":340,"offset":17191},"indent":[]}},{"type":"text","value":" Script Include, via a call to ","position":{"start":{"line":184,"column":340,"offset":17191},"end":{"line":184,"column":371,"offset":17222},"indent":[]}},{"type":"inlineCode","value":"PagerDutyInbound.processRestWebhook","position":{"start":{"line":184,"column":371,"offset":17222},"end":{"line":184,"column":408,"offset":17259},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":184,"column":408,"offset":17259},"end":{"line":184,"column":409,"offset":17260},"indent":[]}}],"position":{"start":{"line":184,"column":1,"offset":16852},"end":{"line":184,"column":409,"offset":17260},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"PagerDutyInbound","position":{"start":{"line":186,"column":3,"offset":17264},"end":{"line":186,"column":19,"offset":17280},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":17262},"end":{"line":186,"column":21,"offset":17282},"indent":[]}},{"type":"text","value":" handles the saving of data. It is passed an array, ","position":{"start":{"line":186,"column":21,"offset":17282},"end":{"line":186,"column":73,"offset":17334},"indent":[]}},{"type":"inlineCode","value":"messages","position":{"start":{"line":186,"column":73,"offset":17334},"end":{"line":186,"column":83,"offset":17344},"indent":[]}},{"type":"text","value":", containing one or more webhook event objects as described in ","position":{"start":{"line":186,"column":83,"offset":17344},"end":{"line":186,"column":146,"offset":17407},"indent":[]}},{"type":"link","title":null,"url":"https://v2.developer.pagerduty.com/docs/webhooks-overview","children":[{"type":"text","value":"Webhooks Overview","position":{"start":{"line":186,"column":147,"offset":17408},"end":{"line":186,"column":164,"offset":17425},"indent":[]}}],"position":{"start":{"line":186,"column":146,"offset":17407},"end":{"line":186,"column":224,"offset":17485},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":186,"column":224,"offset":17485},"end":{"line":186,"column":225,"offset":17486},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":17262},"end":{"line":186,"column":225,"offset":17486},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Finally, in the function ","position":{"start":{"line":188,"column":1,"offset":17488},"end":{"line":188,"column":26,"offset":17513},"indent":[]}},{"type":"inlineCode","value":"PagerDutyInbound._processData","position":{"start":{"line":188,"column":26,"offset":17513},"end":{"line":188,"column":57,"offset":17544},"indent":[]}},{"type":"text","value":", an import record is created for each webhook event, in the table ","position":{"start":{"line":188,"column":57,"offset":17544},"end":{"line":188,"column":124,"offset":17611},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_webhook_import","position":{"start":{"line":188,"column":124,"offset":17611},"end":{"line":188,"column":157,"offset":17644},"indent":[]}},{"type":"text","value":". Data saved in this table by this process, and hence a record of webhooks received, can be viewed in ServiceNow under ","position":{"start":{"line":188,"column":157,"offset":17644},"end":{"line":188,"column":276,"offset":17763},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty ","position":{"start":{"line":188,"column":278,"offset":17765},"end":{"line":188,"column":288,"offset":17775},"indent":[]}},{"type":"text","value":"►","position":{"start":{"line":188,"column":288,"offset":17775},"end":{"line":188,"column":295,"offset":17782},"indent":[]}},{"type":"text","value":" Imports ","position":{"start":{"line":188,"column":295,"offset":17782},"end":{"line":188,"column":304,"offset":17791},"indent":[]}},{"type":"text","value":"►","position":{"start":{"line":188,"column":304,"offset":17791},"end":{"line":188,"column":311,"offset":17798},"indent":[]}},{"type":"text","value":" Webhook Import Rows","position":{"start":{"line":188,"column":311,"offset":17798},"end":{"line":188,"column":331,"offset":17818},"indent":[]}}],"position":{"start":{"line":188,"column":276,"offset":17763},"end":{"line":188,"column":333,"offset":17820},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":188,"column":333,"offset":17820},"end":{"line":188,"column":334,"offset":17821},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":17488},"end":{"line":188,"column":334,"offset":17821},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Translating webhook imports to ServiceNow incidents","position":{"start":{"line":190,"column":4,"offset":17826},"end":{"line":190,"column":55,"offset":17877},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":17823},"end":{"line":190,"column":55,"offset":17877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":192,"column":1,"offset":17879},"end":{"line":192,"column":5,"offset":17883},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Webhook Import Table Transform Map","position":{"start":{"line":192,"column":7,"offset":17885},"end":{"line":192,"column":51,"offset":17929},"indent":[]}}],"position":{"start":{"line":192,"column":5,"offset":17883},"end":{"line":192,"column":53,"offset":17931},"indent":[]}},{"type":"text","value":", and other transform maps that operate on other tables in ServiceNow (v5 and later), take each new record inserted in the webhook import table and translates it to either an insert or an update on the ServiceNow table. Which of these two operations happens depends on whether the import transform is able to find an existing ServiceNow incident record with the same PagerDuty incident ID as the one corresponding to the PagerDuty webhook message.","position":{"start":{"line":192,"column":53,"offset":17931},"end":{"line":192,"column":500,"offset":18378},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":17879},"end":{"line":192,"column":500,"offset":18378},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This behavior is dictated by the configuration of the ","position":{"start":{"line":194,"column":1,"offset":18380},"end":{"line":194,"column":55,"offset":18434},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Field Maps","position":{"start":{"line":194,"column":57,"offset":18436},"end":{"line":194,"column":67,"offset":18446},"indent":[]}}],"position":{"start":{"line":194,"column":55,"offset":18434},"end":{"line":194,"column":69,"offset":18448},"indent":[]}},{"type":"text","value":" in the Table Transform Map:","position":{"start":{"line":194,"column":69,"offset":18448},"end":{"line":194,"column":97,"offset":18476},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":18380},"end":{"line":194,"column":97,"offset":18476},"indent":[]}},{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:image","label":"block:image","referenceType":"shortcut","children":[{"type":"text","value":"block:image","position":{"start":{"line":197,"column":2,"offset":18480},"end":{"line":197,"column":13,"offset":18491},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":18479},"end":{"line":197,"column":14,"offset":18492},"indent":[]}},{"type":"text","value":"\n{\n  \"images\": [\n    {\n      \"image\": ","position":{"start":{"line":197,"column":14,"offset":18492},"end":{"line":201,"column":16,"offset":18530},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":" \"https://files.readme.io/caaffc5-coalesce-on-id.png\", \"coalesce-on-id.png\", 730, 232, \"#ebe8eb\" ","label":"\n        \"https://files.readme.io/caaffc5-coalesce-on-id.png\",\n        \"coalesce-on-id.png\",\n        730,\n        232,\n        \"#ebe8eb\"\n      ","referenceType":"shortcut","children":[{"type":"text","value":"\n        \"https://files.readme.io/caaffc5-coalesce-on-id.png\",\n        \"coalesce-on-id.png\",\n        730,\n        232,\n        \"#ebe8eb\"\n      ","position":{"start":{"line":201,"column":17,"offset":18531},"end":{"line":207,"column":7,"offset":18674},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":201,"column":16,"offset":18530},"end":{"line":207,"column":8,"offset":18675},"indent":[1,1,1,1,1,1]}},{"type":"text","value":",\n      \"caption\": \"Coalesce = true here means no new record will be created if there is found a preexisting record in the target table with its ","position":{"start":{"line":207,"column":8,"offset":18675},"end":{"line":208,"column":144,"offset":18820},"indent":[1]}},{"type":"inlineCode","value":"x_pd_integration_incident","position":{"start":{"line":208,"column":144,"offset":18820},"end":{"line":208,"column":171,"offset":18847},"indent":[]}},{"type":"text","value":" field equal to the ","position":{"start":{"line":208,"column":171,"offset":18847},"end":{"line":208,"column":191,"offset":18867},"indent":[]}},{"type":"inlineCode","value":"id","position":{"start":{"line":208,"column":191,"offset":18867},"end":{"line":208,"column":195,"offset":18871},"indent":[]}},{"type":"text","value":" field in the source table (","position":{"start":{"line":208,"column":195,"offset":18871},"end":{"line":208,"column":223,"offset":18899},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_webhook_import","position":{"start":{"line":208,"column":223,"offset":18899},"end":{"line":208,"column":256,"offset":18932},"indent":[]}},{"type":"text","value":")\"\n    }\n  ]\n}\n","position":{"start":{"line":208,"column":256,"offset":18932},"end":{"line":212,"column":1,"offset":18947},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":212,"column":2,"offset":18948},"end":{"line":212,"column":8,"offset":18954},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":18947},"end":{"line":212,"column":9,"offset":18955},"indent":[]}},{"type":"text","value":"\nWhen creating or updating the incident in ServiceNow, one of the next things that is done (for trigger, acknowledge, escalate and delegate webhooks) is automatically setting the assignment group. The group is identified by the PagerDuty escalation policy ID given in the webhook;  the group assigned the incident will be the one whose ","position":{"start":{"line":212,"column":9,"offset":18955},"end":{"line":213,"column":336,"offset":19291},"indent":[1]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Escalation","position":{"start":{"line":213,"column":337,"offset":19292},"end":{"line":213,"column":357,"offset":19312},"indent":[]}}],"position":{"start":{"line":213,"column":336,"offset":19291},"end":{"line":213,"column":358,"offset":19313},"indent":[]}},{"type":"text","value":" field (","position":{"start":{"line":213,"column":358,"offset":19313},"end":{"line":213,"column":366,"offset":19321},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_pagerduty_escalation","position":{"start":{"line":213,"column":366,"offset":19321},"end":{"line":213,"column":405,"offset":19360},"indent":[]}},{"type":"text","value":") is the same ID.","position":{"start":{"line":213,"column":405,"offset":19360},"end":{"line":213,"column":422,"offset":19377},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":18479},"end":{"line":213,"column":422,"offset":19377},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In version 5 and later, the ","position":{"start":{"line":215,"column":1,"offset":19379},"end":{"line":215,"column":29,"offset":19407},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PdWebhookTransform","position":{"start":{"line":215,"column":31,"offset":19409},"end":{"line":215,"column":49,"offset":19427},"indent":[]}}],"position":{"start":{"line":215,"column":29,"offset":19407},"end":{"line":215,"column":51,"offset":19429},"indent":[]}},{"type":"text","value":" script contains the essence of all the default operations taken when updating or inserting an incident, i.e. the additional fields to populate and particular workflow logic. Within the local scope, for each webhook import, the following variables dictate the actions that will be taken on the target record:","position":{"start":{"line":215,"column":51,"offset":19429},"end":{"line":215,"column":359,"offset":19737},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":19379},"end":{"line":215,"column":359,"offset":19737},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"source","position":{"start":{"line":217,"column":3,"offset":19741},"end":{"line":217,"column":11,"offset":19749},"indent":[]}},{"type":"text","value":": The import record. The field ","position":{"start":{"line":217,"column":11,"offset":19749},"end":{"line":217,"column":42,"offset":19780},"indent":[]}},{"type":"inlineCode","value":"source.message_type","position":{"start":{"line":217,"column":42,"offset":19780},"end":{"line":217,"column":63,"offset":19801},"indent":[]}},{"type":"text","value":" is of particular interest; it will be one of the ","position":{"start":{"line":217,"column":63,"offset":19801},"end":{"line":217,"column":113,"offset":19851},"indent":[]}},{"type":"link","title":null,"url":"https://v2.developer.pagerduty.com/docs/webhooks-overview#webhook-types","children":[{"type":"text","value":"Webhook Types","position":{"start":{"line":217,"column":114,"offset":19852},"end":{"line":217,"column":127,"offset":19865},"indent":[]}}],"position":{"start":{"line":217,"column":113,"offset":19851},"end":{"line":217,"column":201,"offset":19939},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":217,"column":201,"offset":19939},"end":{"line":217,"column":202,"offset":19940},"indent":[]}}],"position":{"start":{"line":217,"column":3,"offset":19741},"end":{"line":217,"column":202,"offset":19940},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":19739},"end":{"line":217,"column":202,"offset":19940},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"action","position":{"start":{"line":218,"column":3,"offset":19943},"end":{"line":218,"column":11,"offset":19951},"indent":[]}},{"type":"text","value":": This will be ","position":{"start":{"line":218,"column":11,"offset":19951},"end":{"line":218,"column":26,"offset":19966},"indent":[]}},{"type":"inlineCode","value":"insert","position":{"start":{"line":218,"column":26,"offset":19966},"end":{"line":218,"column":34,"offset":19974},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":218,"column":34,"offset":19974},"end":{"line":218,"column":38,"offset":19978},"indent":[]}},{"type":"inlineCode","value":"update","position":{"start":{"line":218,"column":38,"offset":19978},"end":{"line":218,"column":46,"offset":19986},"indent":[]}},{"type":"text","value":" depending on whether a new incident record is being created, or an existing incident is being updated.","position":{"start":{"line":218,"column":46,"offset":19986},"end":{"line":218,"column":149,"offset":20089},"indent":[]}}],"position":{"start":{"line":218,"column":3,"offset":19943},"end":{"line":218,"column":149,"offset":20089},"indent":[]}}],"position":{"start":{"line":218,"column":1,"offset":19941},"end":{"line":218,"column":149,"offset":20089},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"assignOnAckOnly","position":{"start":{"line":219,"column":3,"offset":20092},"end":{"line":219,"column":20,"offset":20109},"indent":[]}},{"type":"text","value":": This is a boolean, determined by the setting \"Only assign based on an acknowledgment from PagerDuty user\": this determines whether the ServiceNow incident should be assigned based on acknowledgment from PagerDuty, or if the integration should synchronize incident assignment between ServiceNow and PagerDuty with each webhook update.","position":{"start":{"line":219,"column":20,"offset":20109},"end":{"line":219,"column":355,"offset":20444},"indent":[]}}],"position":{"start":{"line":219,"column":3,"offset":20092},"end":{"line":219,"column":355,"offset":20444},"indent":[]}}],"position":{"start":{"line":219,"column":1,"offset":20090},"end":{"line":219,"column":355,"offset":20444},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"target","position":{"start":{"line":220,"column":3,"offset":20447},"end":{"line":220,"column":11,"offset":20455},"indent":[]}},{"type":"text","value":": a GlideRecord object representing the incident in ServiceNow to be created or updated","position":{"start":{"line":220,"column":11,"offset":20455},"end":{"line":220,"column":98,"offset":20542},"indent":[]}}],"position":{"start":{"line":220,"column":3,"offset":20447},"end":{"line":220,"column":98,"offset":20542},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":20445},"end":{"line":220,"column":98,"offset":20542},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":19739},"end":{"line":220,"column":98,"offset":20542},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"At the end of it all, the properties of the incident to be created or updated will be stored in the ","position":{"start":{"line":222,"column":1,"offset":20544},"end":{"line":222,"column":101,"offset":20644},"indent":[]}},{"type":"inlineCode","value":"target","position":{"start":{"line":222,"column":101,"offset":20644},"end":{"line":222,"column":109,"offset":20652},"indent":[]}},{"type":"text","value":" variable, and the change will be saved after the script exits.","position":{"start":{"line":222,"column":109,"offset":20652},"end":{"line":222,"column":172,"offset":20715},"indent":[]}}],"position":{"start":{"line":222,"column":1,"offset":20544},"end":{"line":222,"column":172,"offset":20715},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"ServiceNow\",\"slug\":\"servicenow\",\"excerpt\":\"An overview of the ServiceNow integration with PagerDuty and how it works.\"}","position":{"start":{"line":225,"column":1,"offset":20718},"end":{"line":225,"column":158,"offset":20875},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":225,"column":158,"offset":20875}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ServiceNow\",\n  \"slug\": \"servicenow\",\n  \"excerpt\": \"An overview of the ServiceNow integration with PagerDuty and how it works.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"ServiceNow Enterprise is a powerful platform-as-a-service, which offers advanced automation and process workflow for the enterprise environment. With this integration, you can leverage PagerDuty's robust event management, on-call scheduling, escalation and notification functionality and keep PagerDuty incidents in sync with your ServiceNow tickets. \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For installation instructions, please refer to the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"servicenow-integration-guide\"\n  }), \"Integration Guide\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For a guide to addressing some common issues, see the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"doc:servicenow-troubleshooting-guide\"\n  }), \"Troubleshooting Guide\"), \" \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"For more in-depth information on the topic of customizing how the ServiceNow integration behaves, refer to our guide on \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"doc:advanced-servicenow-configuration\"\n  }), \"Advanced ServiceNow Configuration\"))), mdx(\"p\", null, \"In the ServiceNow Enterprise integration app for PagerDuty, the source code of many of the components are not only visible, but can also be modified.\"), mdx(\"p\", null, \"All of the source code that performs the actions underpinning the integration is in the JavaScript language, and can be viewed by going to the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Advanced\"), \" section or tab of any component's view. The application's components can be accessed by going to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Configuration\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Configuration files\"), \". There you will find a page with the following tabs:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Business Rules\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Script Actions \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Script Includes \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"UI Actions \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Processors\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"UI Pages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Macros\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Application Files\\n\", \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"info\\\",\\n\\\"body\\\": \\\"If you are having trouble with your ServiceNow integration, it is recommended that you first review the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/docs/servicenow-troubleshooting-guide\"\n  }), \"ServiceNow Troubleshooting Guide\"), \".\\\"\\n}\\n\", \"[/block]\")), mdx(\"p\", null, \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Introduction and Terminology\\\"\\n}\\n\", \"[/block]\"), mdx(\"h2\", {\n    \"id\": \"assignment-versus-escalation-and-delegation\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#assignment-versus-escalation-and-delegation\",\n    \"aria-label\": \"assignment versus escalation and delegation permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Assignment versus Escalation and Delegation\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"assignment\"), \" has a slightly different meaning in PagerDuty than it does in ServiceNow. When an incident is \\\"assigned\\\" to a user in PagerDuty, it is escalated to them and they are the agents who will be notified. When an incident is first triggered, it is considered to be assigned to the first targets in the escalation policy until escalated. However, it will not assign the incident to anyone in ServiceNow until someone acknowledges it, in which case the corresponding ServiceNow incident will be assigned to them.\"), mdx(\"p\", null, \"When an incident in ServiceNow is assigned to a user, that similarly escalates the incident to that user in PagerDuty.\"), mdx(\"p\", null, \"The integration will also assign the ServiceNow incident to the user who acknowledged it in PagerDuty, since it is assumed that the user who acknowledged it is the one who will be working on it.\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"delegation\"), \" refers to the act of reassigning a PagerDuty incident to a different escalation policy, or level of an escalation policy, removing it from the current escalation policy flow and starting a new escalation process.\"), mdx(\"h2\", {\n    \"id\": \"provisioned-versus-linked\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#provisioned-versus-linked\",\n    \"aria-label\": \"provisioned versus linked permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Provisioned versus Linked\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"provisioned\"), \" refers to when the item in ServiceNow has an analogous record in PagerDuty, identified by one or more metadata fields, referred to as the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"integration fields\"), \". For assignment groups, these will be \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Escalation\"), \", which will contain the IDs of a PagerDuty \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/services-and-integrations\"\n  }), \"Service\"), \" / \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/escalation-policies\"\n  }), \"Escalation Policy\"), \" pair, and in version 3.5 and later, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook\"), \", which will contain the ID of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n  }), \"extension\"), \" used for the two-way integration. Users are provisioned if their \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty User\"), \" field refers to the ID of a currently-existing user in PagerDuty. Un-provisioned records will have these fields blank, or referencing nonexistent records if the records were deleted in PagerDuty.\"), mdx(\"p\", null, \"An incident is considered \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"linked\"), \" if it is associated with a PagerDuty incident, in which case its status, work notes and other information pertaining to the incident can be synchronized between systems.\"), mdx(\"h2\", {\n    \"id\": \"troubleshooting-with-verbose-logging\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#troubleshooting-with-verbose-logging\",\n    \"aria-label\": \"troubleshooting with verbose logging permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Troubleshooting With Verbose Logging\"), mdx(\"p\", null, \"To get the most detailed information about what is happening and in what order, set \\\"Logging verbosity level\\\" to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"debug\"), \" in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Configuration\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Properties\"), \". Each call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gs.debug\"), \" in the script source will then show up in the application-scope logs, which can be viewed  under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Support\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Logs\"), \".\\n\", \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"warning\\\",\\n\\\"title\\\": \\\"Disclaimer\\\",\\n\\\"body\\\": \\\"If you modify any core component of the integration, note that upgrading the application will not work as expected, and customizations are generally not supported by PagerDuty.\\\\n\\\\nPlease see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.pagerduty.com/t/upgrading-a-servicenow-app-with-manual-changes/257\"\n  }), \"Upgrading a ServiceNow App With Manual Changes\"), \" for more information on this process.\\\"\\n}\\n\", \"[/block]\"), mdx(\"p\", null, \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"The Core Components\\\"\\n}\\n\", \"[/block]\", \"\\nMost of the tasks performed to synchronize data between PagerDuty and ServiceNow are taken in the following application files, under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Script Includes\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty:\"), \" Utilities for obtaining PagerDuty metadata, and functions for performing actions on  incidents, i.e. assigning to a user, synchronizing worknotes, and triggering new incidents.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDutyInbound:\"), \" Functions that handle receipt and processing of webhooks from PagerDuty\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDutyProvisioning:\"), \" Handles the creation of objects in PagerDuty from ServiceNow, or in the case of users, finding existing ones that match analogous ones in ServiceNow.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty_REST:\"), \" Core functions for making REST API requests, and in version 3.2.1 and earlier, Events API requests.\")), mdx(\"p\", null, \"Each of the above defines a class constructor named after the script include. Methods of these classes are called throughout the rest of the application.\"), mdx(\"p\", null, \"Another important file, which handles the importing of webhook data into ServiceNow incidents, is the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook Import\"), \" Table Transform Map, which can be found under the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Application Files\"), \" tab.\"), mdx(\"p\", null, \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Provisioning: Linking Objects Between Systems\\\"\\n}\\n\", \"[/block]\", \"\\nFor any user or assignment group, user or CI in ServiceNow to be recognized by the integration, it must be provisioned.\"), mdx(\"p\", null, \"Objects can be provisioned by clicking \\\"Provision PagerDuty Service\\\" or \\\"Provision PagerDuty User\\\" under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Related Links\"), \" in the view of the group, user, or configuration item, or by selecting several from the list view and selecting the option to provision them under the menu \\u201Cactions on selected rows\\u201D.\"), mdx(\"p\", null, \"This process will make the necessary REST API calls in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyProvisioning\"), \" object, note the ID of the created (or existing) records, and save them in one of the following fields:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty ID\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_id\"), \": ID of a user in PagerDuty. When provisioning, if a user with identical login email to the user being provisioned is found, that user will be used, rather than creating a new user.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Assignment Group:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty escalation\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_escalation\"), \": ID of an escalation policy in PagerDuty.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty service\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_service\"), \": ID of a service in PagerDuty\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty webhook\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_webhook\"), \" (v3.5 and later): ID of the extension on the PagerDuty service.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Configuration Items: \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty Service\"), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty Webhook\"), \", similar to assignment groups above.\")), mdx(\"h2\", {\n    \"id\": \"when-users-are-auto-provisioned\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#when-users-are-auto-provisioned\",\n    \"aria-label\": \"when users are auto provisioned permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"When Users Are Auto-Provisioned\"), mdx(\"p\", null, \"As of version 3.2.1, users in PagerDuty can optionally be provisioned for ServiceNow users, or the ServiceNow user's record will be linked to a PagerDuty user if one exists with the same email address, in only the scenario wherein they provision an assignment group. The user performing the provisioning is themselves auto-provisioned and then automatically added as the initial member of the new escalation policy in PagerDuty.\"), mdx(\"h2\", {\n    \"id\": \"special-usage-of-the-integration-fields\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#special-usage-of-the-integration-fields\",\n    \"aria-label\": \"special usage of the integration fields permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Special Usage of the Integration Fields\"), mdx(\"p\", null, \"Note, one can obtain the ID of any object in PagerDuty by going to its main view page and looking in the URL in your web browser. The ID should be a string of uppercase alphanumeric characters beginning with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"P\"), \", and will be close to the end of the URL. By this method, one can manually \\\"Provision\\\" objects by forcefully setting the appropriate fields in the ServiceNow objects according to existing records. \"), mdx(\"p\", null, \"In short, for the bidirectional integration, the following is how the fields are used:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a ServiceNow incident triggers a PagerDuty incident, the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Service\"), \" field of the assignment group is used to tell which PagerDuty service to trigger it on.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a PagerDuty incident opens a ServiceNow incident via webhook import, the assignment group is looked up by value of the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Escalation\"), \" field.\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"It is preferable to avoid associating more than one ServiceNow group with the same escalation policy.\"), \" This is because the webhook transform map, if it finds more than one assignment group with the same escalation policy ID, will assign the ServiceNow incident to the first assignment group that it finds whose \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_pagerduty_escalation\"), \" column value matches the escalation policy ID in the webhook.\"), mdx(\"p\", null, \"Conversely, it should be possible to manually associate an assignment group with multiple services, which all use the same escalation policy, and have the integration still work smoothly. This is because it identifies the assignment group by escalation policy ID, and there's one escalation policy for all the services, so the service ID has no bearing in this part of the process (see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/v1/docs/servicenow#section-webhook-import-pagerduty-to-servicenow\"\n  }), \"PagerDuty to ServiceNow: The Webhook Import Process\"), \")\"), mdx(\"p\", null, \"In the opposite direction, ServiceNow incidents can only trigger incidents in PagerDuty on one service: the one whose ID is stored in the assignment group's \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" field.\\n\", \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Business Rules: ServiceNow to PagerDuty\\\"\\n}\\n\", \"[/block]\", \"\\nAll aspects of the integration that concern any flow of data from ServiceNow to PagerDuty are handled by business rules that begin when an event such as an insertion, update or deletion takes place on an incident. If the conditions of a business rule are met, the rule and its associated script are run, which invokes a transaction with the PagerDuty API to perform the necessary actions in PagerDuty.\"), mdx(\"p\", null, \"If you are unfamiliar with ServiceNow business rules, the two-part video series \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hi.service-now.com/kb_view.do?sysparm_article=KB0540192\"\n  }), \"Business Rules | Best Practices\"), \" from the ServiceNow knowledge base is highly recommended, as is the article \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://wiki.servicenow.com/index.php?title=Business_Rules#gsc.tab=0\"\n  }), \"Business Rules\"), \" in the ServiceNow Wiki.\"), mdx(\"h2\", {\n    \"id\": \"how-pagerduty-incidents-are-triggered\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#how-pagerduty-incidents-are-triggered\",\n    \"aria-label\": \"how pagerduty incidents are triggered permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"How PagerDuty Incidents Are Triggered\"), mdx(\"p\", null, \"Consider the event named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.trigger_incident\"), \", handled by the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Trigger Incident\"), \" script action. This event is raised by one of the following business rules:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Trigger PagerDuty Incident:\"), \" An incident that has no corresponding PagerDuty incident is created in ServiceNow, assigned to a PagerDuty-linked group, having Priority 1 or 2, or a preexisting one has its priority updated to 1 or 2.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Group Assign Trigger New Incident:\"), \" A pre-existing incident that was previously tied to a PagerDuty incident, but that was \\\"unlinked\\\" by assigning it to a non-provisioned assignment group (per the business rule \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PD Unlink if not PagerDuty group\"), \")\")), mdx(\"p\", null, \"There is an additional condition that is tested for in a dynamic manner based on the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Choose ServiceNow to PagerDuty mapping\"), \" setting: the assignment group and/or configuration item must be provisioned; see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/docs/servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-\"\n  }), \"\\u201CWhen is an incident sent to PagerDuty?\\u201D\"), \" article.\"), mdx(\"p\", null, \"In brief: the service in PagerDuty on which the incident will be triggered is determined by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" field in the ServiceNow assignment group to which the incident is assigned, or the similarly-named field in the configuration item to which the incident corresponds, or (optional, to provide a catch-all) the value specified for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Default PagerDuty Service ID\"), \".\"), mdx(\"p\", null, \"The test for this is done in the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" Script Include, in the function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.triggerIncident\"), \".\"), mdx(\"h2\", {\n    \"id\": \"how-pagerduty-incidents-are-resolved\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#how-pagerduty-incidents-are-resolved\",\n    \"aria-label\": \"how pagerduty incidents are resolved permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"How PagerDuty Incidents Are Resolved\"), mdx(\"p\", null, \"The following business rules resolve PagerDuty incidents from ServiceNow:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Resolve PagerDuty Incident:\"), \" the incident's \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"State\"), \" field must change to 6 or 7 (resolved/closed) and the incident must be linked. This raises the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.resolve_incident\"), \" event, handled by the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Resolve Incident\"), \" script action. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.resolveIncident\"), \" function is called to resolve the incident.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Unlink if not PagerDuty group:\"), \" if a linked incident is assigned to a non-provisioned assignment group, it is assumed that it will be handled outside of the PagerDuty incident response process. Hence, the PagerDuty incident will be resolved. This process happens as follows:\", mdx(\"ol\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Incident\"), \" field on the ServiceNow incident record is set to to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"---unlinked---\"), \". \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This sets off the business rule \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Resolve Incident on Unlink\"), \".\")))), mdx(\"p\", null, \"The latter of these raises the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.resolve_on_unreference\"), \" event, handled by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Resolve on Unreference\"), \" script action, which calls \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.resolveOnUnreference\"), \" to resolve and post a worknote to the PagerDuty incident to indicate that it was resolved for this reason.\"), mdx(\"h2\", {\n    \"id\": \"reassignment-and-delegation\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#reassignment-and-delegation\",\n    \"aria-label\": \"reassignment and delegation permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Reassignment and Delegation\"), mdx(\"p\", null, \"Incidents in ServiceNow, when assigned to a user or assignment group, may trigger one of the following business rules:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD User Assign:\"), \" If a provisioned user is assigned a linked incident, this escalates the PagerDuty incident to the user in PagerDuty, by raising the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.assign_incident_user\"), \" event, which is handled by the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty User Assign Incident\"), \" script action, which calls the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.assignIncidentToUser\"), \" function.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Group Policy Assign:\"), \" if the assignment group of a linked incident changes, and the new assignment group is provisioned, the corresponding PagerDuty incident will be delegated to the Escalation Policy in PagerDuty specified by the assignment group's \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Escalation\"), \" field. This will restart escalation and notify the new assignees in the target policy.\\n\", \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Worknote Synchronization\\\"\\n}\\n\", \"[/block]\")), mdx(\"h2\", {\n    \"id\": \"servicenow-worknotes-to-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#servicenow-worknotes-to-pagerduty\",\n    \"aria-label\": \"servicenow worknotes to pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"ServiceNow Worknotes to PagerDuty\"), mdx(\"p\", null, \"*Worknotes are copied from ServiceNow to PagerDuty through the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PD Copy worknote to PagerDuty incident\"), \" business rule, which triggers the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.post_worknote\"), \" event, which then invokes the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.postIncidentNote\"), \" function. This runs on any update of a linked incident wherein the work notes change.\"), mdx(\"h2\", {\n    \"id\": \"pagerduty-incident-notes-to-servicenow-work-notes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#pagerduty-incident-notes-to-servicenow-work-notes\",\n    \"aria-label\": \"pagerduty incident notes to servicenow work notes permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"PagerDuty Incident Notes to ServiceNow Work Notes\"), mdx(\"p\", null, \"Starting in version 5, notes are synchronized in near real time by utilizing the new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"incident.annotate\"), \" webhook event type. When a user adds a note to the incident in PagerDuty, the webhook transform will recognize this event as such, and add the note as a worknote with the suffix `(PagerDuty: USER-NAME-HERE on TIMESTAMP-HERE)' identifying the PagerDuty user who added the note.\"), mdx(\"p\", null, \"In earlier versions, the process that runs in the opposite direction was initiated by a business rule, apart from just the UI Action \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Refresh PagerDuty Notes\"), \", which appeared as an action in the context menu for any given linked incident. The mechanism is thus polling; it is done through the business rule \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PD Update Worknotes from PagerDuty Notes\"), \", raising the event \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.import_notes\"), \" (handled by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Import Notes from PagerDuty incident\"), \" script action). In both cases, the functions \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.getIncidentNotes\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.createNoteImports\"), \" are used to import and save notes from PagerDuty.\\n\", \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Webhook Import: PagerDuty to ServiceNow\\\"\\n}\\n\", \"[/block]\", \"\\nReal-time updates to incidents in PagerDuty are communicated to ServiceNow through \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n  }), \"extensions\"), \", created on each PagerDuty service that corresponds to a provisioned assignment group in ServiceNow. When a group is initially provisioned, an extension will also be created on the service. In version 3.5 and later, an extension on the service will be provisioned automatically if one does not already exist, whenever a new incident is created.\"), mdx(\"p\", null, \"The extensions, also known as webhooks, specify URLs in the ServiceNow instances to which JSON-encoded data is sent via HTTPS/POST requests.\"), mdx(\"h2\", {\n    \"id\": \"precedence-and-order-of-operations-in-webhook-import\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#precedence-and-order-of-operations-in-webhook-import\",\n    \"aria-label\": \"precedence and order of operations in webhook import permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Precedence and Order of Operations in Webhook Import\"), mdx(\"p\", null, \"Throughout the webhook import process, automation and record creation in ServiceNow happens in the following order:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Run the default import actions\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Run dynamic field mapping rules\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Run the custom script, if any\"))), mdx(\"h2\", {\n    \"id\": \"initial-receiving-and-importing-of-the-webhook\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#initial-receiving-and-importing-of-the-webhook\",\n    \"aria-label\": \"initial receiving and importing of the webhook permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Initial receiving and importing of the webhook\"), mdx(\"p\", null, \"The first point of entry into the ServiceNow application is the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Webhook Post\"), \" Scripted REST Resource, found in the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Application Files\"), \" tab. This component handles the receipt of the payload, validation of the webhook key / endpoint path, and generating the response. The processing of the data itself is done by the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound\"), \" Script Include, via a call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound.processRestWebhook\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound\"), \" handles the saving of data. It is passed an array, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"messages\"), \", containing one or more webhook event objects as described in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview\"\n  }), \"Webhooks Overview\"), \".\"), mdx(\"p\", null, \"Finally, in the function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound._processData\"), \", an import record is created for each webhook event, in the table \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_webhook_import\"), \". Data saved in this table by this process, and hence a record of webhooks received, can be viewed in ServiceNow under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty \", \"\\u25BA\", \" Imports \", \"\\u25BA\", \" Webhook Import Rows\"), \".\"), mdx(\"h2\", {\n    \"id\": \"translating-webhook-imports-to-servicenow-incidents\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#translating-webhook-imports-to-servicenow-incidents\",\n    \"aria-label\": \"translating webhook imports to servicenow incidents permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Translating webhook imports to ServiceNow incidents\"), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook Import Table Transform Map\"), \", and other transform maps that operate on other tables in ServiceNow (v5 and later), take each new record inserted in the webhook import table and translates it to either an insert or an update on the ServiceNow table. Which of these two operations happens depends on whether the import transform is able to find an existing ServiceNow incident record with the same PagerDuty incident ID as the one corresponding to the PagerDuty webhook message.\"), mdx(\"p\", null, \"This behavior is dictated by the configuration of the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Field Maps\"), \" in the Table Transform Map:\"), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/caaffc5-coalesce-on-id.png\\\",\\n\\\"coalesce-on-id.png\\\",\\n730,\\n232,\\n\\\"#ebe8eb\\\"\\n]\", \",\\n\\\"caption\\\": \\\"Coalesce = true here means no new record will be created if there is found a preexisting record in the target table with its \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_incident\"), \" field equal to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" field in the source table (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_webhook_import\"), \")\\\"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nWhen creating or updating the incident in ServiceNow, one of the next things that is done (for trigger, acknowledge, escalate and delegate webhooks) is automatically setting the assignment group. The group is identified by the PagerDuty escalation policy ID given in the webhook;  the group assigned the incident will be the one whose \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Escalation\"), \" field (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_pagerduty_escalation\"), \") is the same ID.\"), mdx(\"p\", null, \"In version 5 and later, the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PdWebhookTransform\"), \" script contains the essence of all the default operations taken when updating or inserting an incident, i.e. the additional fields to populate and particular workflow logic. Within the local scope, for each webhook import, the following variables dictate the actions that will be taken on the target record:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"source\"), \": The import record. The field \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"source.message_type\"), \" is of particular interest; it will be one of the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview#webhook-types\"\n  }), \"Webhook Types\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"action\"), \": This will be \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"insert\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"update\"), \" depending on whether a new incident record is being created, or an existing incident is being updated.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"assignOnAckOnly\"), \": This is a boolean, determined by the setting \\\"Only assign based on an acknowledgment from PagerDuty user\\\": this determines whether the ServiceNow incident should be assigned based on acknowledgment from PagerDuty, or if the integration should synchronize incident assignment between ServiceNow and PagerDuty with each webhook update.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"target\"), \": a GlideRecord object representing the incident in ServiceNow to be created or updated\")), mdx(\"p\", null, \"At the end of it all, the properties of the incident to be created or updated will be stored in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"target\"), \" variable, and the change will be saved after the script exits.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"ServiceNow\",\n  \"slug\": \"servicenow\",\n  \"excerpt\": \"An overview of the ServiceNow integration with PagerDuty and how it works.\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`ServiceNow Enterprise is a powerful platform-as-a-service, which offers advanced automation and process workflow for the enterprise environment. With this integration, you can leverage PagerDuty's robust event management, on-call scheduling, escalation and notification functionality and keep PagerDuty incidents in sync with your ServiceNow tickets. `}</p>\n    <ul>\n      <li parentName=\"ul\">{`For installation instructions, please refer to the `}<a parentName=\"li\" {...{\n          \"href\": \"servicenow-integration-guide\"\n        }}>{`Integration Guide`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`For a guide to addressing some common issues, see the `}<a parentName=\"li\" {...{\n          \"href\": \"doc:servicenow-troubleshooting-guide\"\n        }}>{`Troubleshooting Guide`}</a>{` `}</li>\n      <li parentName=\"ul\">{`For more in-depth information on the topic of customizing how the ServiceNow integration behaves, refer to our guide on `}<a parentName=\"li\" {...{\n          \"href\": \"doc:advanced-servicenow-configuration\"\n        }}>{`Advanced ServiceNow Configuration`}</a></li>\n    </ul>\n    <p>{`In the ServiceNow Enterprise integration app for PagerDuty, the source code of many of the components are not only visible, but can also be modified.`}</p>\n    <p>{`All of the source code that performs the actions underpinning the integration is in the JavaScript language, and can be viewed by going to the `}<strong parentName=\"p\">{`Advanced`}</strong>{` section or tab of any component's view. The application's components can be accessed by going to `}<strong parentName=\"p\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Configuration`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Configuration files`}</strong>{`. There you will find a page with the following tabs:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Business Rules`}</li>\n      <li parentName=\"ul\">{`Script Actions `}</li>\n      <li parentName=\"ul\">{`Script Includes `}</li>\n      <li parentName=\"ul\">{`UI Actions `}</li>\n      <li parentName=\"ul\">{`Processors`}</li>\n      <li parentName=\"ul\">{`UI Pages`}</li>\n      <li parentName=\"ul\">{`Macros`}</li>\n      <li parentName=\"ul\">{`Application Files\n`}{`[block:callout]`}{`\n{\n\"type\": \"info\",\n\"body\": \"If you are having trouble with your ServiceNow integration, it is recommended that you first review the `}<a parentName=\"li\" {...{\n          \"href\": \"/docs/servicenow-troubleshooting-guide\"\n        }}>{`ServiceNow Troubleshooting Guide`}</a>{`.\"\n}\n`}{`[/block]`}</li>\n    </ul>\n    <p>{`[block:api-header]`}{`\n{\n\"title\": \"Introduction and Terminology\"\n}\n`}{`[/block]`}</p>\n    <h2 {...{\n      \"id\": \"assignment-versus-escalation-and-delegation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#assignment-versus-escalation-and-delegation\",\n        \"aria-label\": \"assignment versus escalation and delegation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Assignment versus Escalation and Delegation`}</h2>\n    <p>{`The term `}<strong parentName=\"p\">{`assignment`}</strong>{` has a slightly different meaning in PagerDuty than it does in ServiceNow. When an incident is \"assigned\" to a user in PagerDuty, it is escalated to them and they are the agents who will be notified. When an incident is first triggered, it is considered to be assigned to the first targets in the escalation policy until escalated. However, it will not assign the incident to anyone in ServiceNow until someone acknowledges it, in which case the corresponding ServiceNow incident will be assigned to them.`}</p>\n    <p>{`When an incident in ServiceNow is assigned to a user, that similarly escalates the incident to that user in PagerDuty.`}</p>\n    <p>{`The integration will also assign the ServiceNow incident to the user who acknowledged it in PagerDuty, since it is assumed that the user who acknowledged it is the one who will be working on it.`}</p>\n    <p>{`The term `}<strong parentName=\"p\">{`delegation`}</strong>{` refers to the act of reassigning a PagerDuty incident to a different escalation policy, or level of an escalation policy, removing it from the current escalation policy flow and starting a new escalation process.`}</p>\n    <h2 {...{\n      \"id\": \"provisioned-versus-linked\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#provisioned-versus-linked\",\n        \"aria-label\": \"provisioned versus linked permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Provisioned versus Linked`}</h2>\n    <p>{`The term `}<strong parentName=\"p\">{`provisioned`}</strong>{` refers to when the item in ServiceNow has an analogous record in PagerDuty, identified by one or more metadata fields, referred to as the `}<strong parentName=\"p\">{`integration fields`}</strong>{`. For assignment groups, these will be `}<em parentName=\"p\">{`PagerDuty Service`}</em>{` and `}<em parentName=\"p\">{`PagerDuty Escalation`}</em>{`, which will contain the IDs of a PagerDuty `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/services-and-integrations\"\n      }}>{`Service`}</a>{` / `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/escalation-policies\"\n      }}>{`Escalation Policy`}</a>{` pair, and in version 3.5 and later, the `}<em parentName=\"p\">{`PagerDuty Webhook`}</em>{`, which will contain the ID of the `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n      }}>{`extension`}</a>{` used for the two-way integration. Users are provisioned if their `}<em parentName=\"p\">{`PagerDuty User`}</em>{` field refers to the ID of a currently-existing user in PagerDuty. Un-provisioned records will have these fields blank, or referencing nonexistent records if the records were deleted in PagerDuty.`}</p>\n    <p>{`An incident is considered `}<strong parentName=\"p\">{`linked`}</strong>{` if it is associated with a PagerDuty incident, in which case its status, work notes and other information pertaining to the incident can be synchronized between systems.`}</p>\n    <h2 {...{\n      \"id\": \"troubleshooting-with-verbose-logging\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#troubleshooting-with-verbose-logging\",\n        \"aria-label\": \"troubleshooting with verbose logging permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Troubleshooting With Verbose Logging`}</h2>\n    <p>{`To get the most detailed information about what is happening and in what order, set \"Logging verbosity level\" to `}<em parentName=\"p\">{`debug`}</em>{` in `}<strong parentName=\"p\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Configuration`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Properties`}</strong>{`. Each call to `}<inlineCode parentName=\"p\">{`gs.debug`}</inlineCode>{` in the script source will then show up in the application-scope logs, which can be viewed  under `}<strong parentName=\"p\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Support`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Logs`}</strong>{`.\n`}{`[block:callout]`}{`\n{\n\"type\": \"warning\",\n\"title\": \"Disclaimer\",\n\"body\": \"If you modify any core component of the integration, note that upgrading the application will not work as expected, and customizations are generally not supported by PagerDuty.\\\\n\\\\nPlease see `}<a parentName=\"p\" {...{\n        \"href\": \"https://community.pagerduty.com/t/upgrading-a-servicenow-app-with-manual-changes/257\"\n      }}>{`Upgrading a ServiceNow App With Manual Changes`}</a>{` for more information on this process.\"\n}\n`}{`[/block]`}</p>\n    <p>{`[block:api-header]`}{`\n{\n\"title\": \"The Core Components\"\n}\n`}{`[/block]`}{`\nMost of the tasks performed to synchronize data between PagerDuty and ServiceNow are taken in the following application files, under `}<em parentName=\"p\">{`Script Includes`}</em>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PagerDuty:`}</strong>{` Utilities for obtaining PagerDuty metadata, and functions for performing actions on  incidents, i.e. assigning to a user, synchronizing worknotes, and triggering new incidents.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PagerDutyInbound:`}</strong>{` Functions that handle receipt and processing of webhooks from PagerDuty`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PagerDutyProvisioning:`}</strong>{` Handles the creation of objects in PagerDuty from ServiceNow, or in the case of users, finding existing ones that match analogous ones in ServiceNow.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PagerDuty_REST:`}</strong>{` Core functions for making REST API requests, and in version 3.2.1 and earlier, Events API requests.`}</li>\n    </ul>\n    <p>{`Each of the above defines a class constructor named after the script include. Methods of these classes are called throughout the rest of the application.`}</p>\n    <p>{`Another important file, which handles the importing of webhook data into ServiceNow incidents, is the `}<strong parentName=\"p\">{`PagerDuty Webhook Import`}</strong>{` Table Transform Map, which can be found under the `}<em parentName=\"p\">{`Application Files`}</em>{` tab.`}</p>\n    <p>{`[block:api-header]`}{`\n{\n\"title\": \"Provisioning: Linking Objects Between Systems\"\n}\n`}{`[/block]`}{`\nFor any user or assignment group, user or CI in ServiceNow to be recognized by the integration, it must be provisioned.`}</p>\n    <p>{`Objects can be provisioned by clicking \"Provision PagerDuty Service\" or \"Provision PagerDuty User\" under `}<em parentName=\"p\">{`Related Links`}</em>{` in the view of the group, user, or configuration item, or by selecting several from the list view and selecting the option to provision them under the menu “actions on selected rows”.`}</p>\n    <p>{`This process will make the necessary REST API calls in the `}<inlineCode parentName=\"p\">{`PagerDutyProvisioning`}</inlineCode>{` object, note the ID of the created (or existing) records, and save them in one of the following fields:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`User:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><em parentName=\"li\">{`PagerDuty ID`}</em>{`, `}<inlineCode parentName=\"li\">{`x_pd_integration_pagerduty_id`}</inlineCode>{`: ID of a user in PagerDuty. When provisioning, if a user with identical login email to the user being provisioned is found, that user will be used, rather than creating a new user.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Assignment Group:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><em parentName=\"li\">{`PagerDuty escalation`}</em>{`, `}<inlineCode parentName=\"li\">{`x_pd_integration_pagerduty_escalation`}</inlineCode>{`: ID of an escalation policy in PagerDuty.`}</li>\n          <li parentName=\"ul\"><em parentName=\"li\">{`PagerDuty service`}</em>{`, `}<inlineCode parentName=\"li\">{`x_pd_integration_pagerduty_service`}</inlineCode>{`: ID of a service in PagerDuty`}</li>\n          <li parentName=\"ul\"><em parentName=\"li\">{`PagerDuty webhook`}</em>{`, `}<inlineCode parentName=\"li\">{`x_pd_integration_pagerduty_webhook`}</inlineCode>{` (v3.5 and later): ID of the extension on the PagerDuty service.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`Configuration Items: `}<em parentName=\"li\">{`PagerDuty Service`}</em>{` and `}<em parentName=\"li\">{`PagerDuty Webhook`}</em>{`, similar to assignment groups above.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"when-users-are-auto-provisioned\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#when-users-are-auto-provisioned\",\n        \"aria-label\": \"when users are auto provisioned permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`When Users Are Auto-Provisioned`}</h2>\n    <p>{`As of version 3.2.1, users in PagerDuty can optionally be provisioned for ServiceNow users, or the ServiceNow user's record will be linked to a PagerDuty user if one exists with the same email address, in only the scenario wherein they provision an assignment group. The user performing the provisioning is themselves auto-provisioned and then automatically added as the initial member of the new escalation policy in PagerDuty.`}</p>\n    <h2 {...{\n      \"id\": \"special-usage-of-the-integration-fields\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#special-usage-of-the-integration-fields\",\n        \"aria-label\": \"special usage of the integration fields permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Special Usage of the Integration Fields`}</h2>\n    <p>{`Note, one can obtain the ID of any object in PagerDuty by going to its main view page and looking in the URL in your web browser. The ID should be a string of uppercase alphanumeric characters beginning with `}<inlineCode parentName=\"p\">{`P`}</inlineCode>{`, and will be close to the end of the URL. By this method, one can manually \"Provision\" objects by forcefully setting the appropriate fields in the ServiceNow objects according to existing records. `}</p>\n    <p>{`In short, for the bidirectional integration, the following is how the fields are used:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`When a ServiceNow incident triggers a PagerDuty incident, the `}<em parentName=\"li\">{`Service`}</em>{` field of the assignment group is used to tell which PagerDuty service to trigger it on.`}</li>\n      <li parentName=\"ul\">{`When a PagerDuty incident opens a ServiceNow incident via webhook import, the assignment group is looked up by value of the `}<em parentName=\"li\">{`Escalation`}</em>{` field.`}</li>\n    </ul>\n    <p><em parentName=\"p\">{`It is preferable to avoid associating more than one ServiceNow group with the same escalation policy.`}</em>{` This is because the webhook transform map, if it finds more than one assignment group with the same escalation policy ID, will assign the ServiceNow incident to the first assignment group that it finds whose `}<inlineCode parentName=\"p\">{`x_pd_integration_pagerduty_escalation`}</inlineCode>{` column value matches the escalation policy ID in the webhook.`}</p>\n    <p>{`Conversely, it should be possible to manually associate an assignment group with multiple services, which all use the same escalation policy, and have the integration still work smoothly. This is because it identifies the assignment group by escalation policy ID, and there's one escalation policy for all the services, so the service ID has no bearing in this part of the process (see `}<a parentName=\"p\" {...{\n        \"href\": \"https://support.pagerduty.com/v1/docs/servicenow#section-webhook-import-pagerduty-to-servicenow\"\n      }}>{`PagerDuty to ServiceNow: The Webhook Import Process`}</a>{`)`}</p>\n    <p>{`In the opposite direction, ServiceNow incidents can only trigger incidents in PagerDuty on one service: the one whose ID is stored in the assignment group's `}<em parentName=\"p\">{`PagerDuty Service`}</em>{` field.\n`}{`[block:api-header]`}{`\n{\n\"title\": \"Business Rules: ServiceNow to PagerDuty\"\n}\n`}{`[/block]`}{`\nAll aspects of the integration that concern any flow of data from ServiceNow to PagerDuty are handled by business rules that begin when an event such as an insertion, update or deletion takes place on an incident. If the conditions of a business rule are met, the rule and its associated script are run, which invokes a transaction with the PagerDuty API to perform the necessary actions in PagerDuty.`}</p>\n    <p>{`If you are unfamiliar with ServiceNow business rules, the two-part video series `}<a parentName=\"p\" {...{\n        \"href\": \"https://hi.service-now.com/kb_view.do?sysparm_article=KB0540192\"\n      }}>{`Business Rules | Best Practices`}</a>{` from the ServiceNow knowledge base is highly recommended, as is the article `}<a parentName=\"p\" {...{\n        \"href\": \"http://wiki.servicenow.com/index.php?title=Business_Rules#gsc.tab=0\"\n      }}>{`Business Rules`}</a>{` in the ServiceNow Wiki.`}</p>\n    <h2 {...{\n      \"id\": \"how-pagerduty-incidents-are-triggered\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#how-pagerduty-incidents-are-triggered\",\n        \"aria-label\": \"how pagerduty incidents are triggered permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`How PagerDuty Incidents Are Triggered`}</h2>\n    <p>{`Consider the event named `}<inlineCode parentName=\"p\">{`x_pd_integration.trigger_incident`}</inlineCode>{`, handled by the `}<strong parentName=\"p\">{`PagerDuty Trigger Incident`}</strong>{` script action. This event is raised by one of the following business rules:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD Trigger PagerDuty Incident:`}</strong>{` An incident that has no corresponding PagerDuty incident is created in ServiceNow, assigned to a PagerDuty-linked group, having Priority 1 or 2, or a preexisting one has its priority updated to 1 or 2.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD Group Assign Trigger New Incident:`}</strong>{` A pre-existing incident that was previously tied to a PagerDuty incident, but that was \"unlinked\" by assigning it to a non-provisioned assignment group (per the business rule `}<em parentName=\"li\">{`PD Unlink if not PagerDuty group`}</em>{`)`}</li>\n    </ul>\n    <p>{`There is an additional condition that is tested for in a dynamic manner based on the `}<em parentName=\"p\">{`Choose ServiceNow to PagerDuty mapping`}</em>{` setting: the assignment group and/or configuration item must be provisioned; see the `}<a parentName=\"p\" {...{\n        \"href\": \"https://support.pagerduty.com/docs/servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-\"\n      }}>{`“When is an incident sent to PagerDuty?”`}</a>{` article.`}</p>\n    <p>{`In brief: the service in PagerDuty on which the incident will be triggered is determined by the `}<em parentName=\"p\">{`PagerDuty Service`}</em>{` field in the ServiceNow assignment group to which the incident is assigned, or the similarly-named field in the configuration item to which the incident corresponds, or (optional, to provide a catch-all) the value specified for `}<em parentName=\"p\">{`Default PagerDuty Service ID`}</em>{`.`}</p>\n    <p>{`The test for this is done in the `}<em parentName=\"p\">{`PagerDuty`}</em>{` Script Include, in the function `}<inlineCode parentName=\"p\">{`PagerDuty.triggerIncident`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"how-pagerduty-incidents-are-resolved\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#how-pagerduty-incidents-are-resolved\",\n        \"aria-label\": \"how pagerduty incidents are resolved permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`How PagerDuty Incidents Are Resolved`}</h2>\n    <p>{`The following business rules resolve PagerDuty incidents from ServiceNow:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD Resolve PagerDuty Incident:`}</strong>{` the incident's `}<em parentName=\"li\">{`State`}</em>{` field must change to 6 or 7 (resolved/closed) and the incident must be linked. This raises the `}<inlineCode parentName=\"li\">{`x_pd_integration.resolve_incident`}</inlineCode>{` event, handled by the `}<strong parentName=\"li\">{`PagerDuty Resolve Incident`}</strong>{` script action. The `}<inlineCode parentName=\"li\">{`PagerDuty.resolveIncident`}</inlineCode>{` function is called to resolve the incident.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD Unlink if not PagerDuty group:`}</strong>{` if a linked incident is assigned to a non-provisioned assignment group, it is assumed that it will be handled outside of the PagerDuty incident response process. Hence, the PagerDuty incident will be resolved. This process happens as follows:`}\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`The `}<strong parentName=\"li\">{`PagerDuty Incident`}</strong>{` field on the ServiceNow incident record is set to to `}<inlineCode parentName=\"li\">{`---unlinked---`}</inlineCode>{`. `}</li>\n          <li parentName=\"ol\">{`This sets off the business rule `}<strong parentName=\"li\">{`PD Resolve Incident on Unlink`}</strong>{`.`}</li>\n        </ol>\n      </li>\n    </ul>\n    <p>{`The latter of these raises the `}<inlineCode parentName=\"p\">{`x_pd_integration.resolve_on_unreference`}</inlineCode>{` event, handled by the `}<em parentName=\"p\">{`PagerDuty Resolve on Unreference`}</em>{` script action, which calls `}<inlineCode parentName=\"p\">{`PagerDuty.resolveOnUnreference`}</inlineCode>{` to resolve and post a worknote to the PagerDuty incident to indicate that it was resolved for this reason.`}</p>\n    <h2 {...{\n      \"id\": \"reassignment-and-delegation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#reassignment-and-delegation\",\n        \"aria-label\": \"reassignment and delegation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Reassignment and Delegation`}</h2>\n    <p>{`Incidents in ServiceNow, when assigned to a user or assignment group, may trigger one of the following business rules:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD User Assign:`}</strong>{` If a provisioned user is assigned a linked incident, this escalates the PagerDuty incident to the user in PagerDuty, by raising the `}<inlineCode parentName=\"li\">{`x_pd_integration.assign_incident_user`}</inlineCode>{` event, which is handled by the `}<strong parentName=\"li\">{`PagerDuty User Assign Incident`}</strong>{` script action, which calls the `}<inlineCode parentName=\"li\">{`PagerDuty.assignIncidentToUser`}</inlineCode>{` function.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`PD Group Policy Assign:`}</strong>{` if the assignment group of a linked incident changes, and the new assignment group is provisioned, the corresponding PagerDuty incident will be delegated to the Escalation Policy in PagerDuty specified by the assignment group's `}<strong parentName=\"li\">{`PagerDuty Escalation`}</strong>{` field. This will restart escalation and notify the new assignees in the target policy.\n`}{`[block:api-header]`}{`\n{\n\"title\": \"Worknote Synchronization\"\n}\n`}{`[/block]`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"servicenow-worknotes-to-pagerduty\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#servicenow-worknotes-to-pagerduty\",\n        \"aria-label\": \"servicenow worknotes to pagerduty permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`ServiceNow Worknotes to PagerDuty`}</h2>\n    <p>{`*Worknotes are copied from ServiceNow to PagerDuty through the `}<strong parentName=\"p\">{`PD Copy worknote to PagerDuty incident`}</strong>{` business rule, which triggers the `}<inlineCode parentName=\"p\">{`x_pd_integration.post_worknote`}</inlineCode>{` event, which then invokes the `}<inlineCode parentName=\"p\">{`PagerDuty.postIncidentNote`}</inlineCode>{` function. This runs on any update of a linked incident wherein the work notes change.`}</p>\n    <h2 {...{\n      \"id\": \"pagerduty-incident-notes-to-servicenow-work-notes\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#pagerduty-incident-notes-to-servicenow-work-notes\",\n        \"aria-label\": \"pagerduty incident notes to servicenow work notes permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`PagerDuty Incident Notes to ServiceNow Work Notes`}</h2>\n    <p>{`Starting in version 5, notes are synchronized in near real time by utilizing the new `}<inlineCode parentName=\"p\">{`incident.annotate`}</inlineCode>{` webhook event type. When a user adds a note to the incident in PagerDuty, the webhook transform will recognize this event as such, and add the note as a worknote with the suffix \\`(PagerDuty: USER-NAME-HERE on TIMESTAMP-HERE)' identifying the PagerDuty user who added the note.`}</p>\n    <p>{`In earlier versions, the process that runs in the opposite direction was initiated by a business rule, apart from just the UI Action `}<em parentName=\"p\">{`Refresh PagerDuty Notes`}</em>{`, which appeared as an action in the context menu for any given linked incident. The mechanism is thus polling; it is done through the business rule `}<strong parentName=\"p\">{`PD Update Worknotes from PagerDuty Notes`}</strong>{`, raising the event `}<inlineCode parentName=\"p\">{`x_pd_integration.import_notes`}</inlineCode>{` (handled by the `}<em parentName=\"p\">{`Import Notes from PagerDuty incident`}</em>{` script action). In both cases, the functions `}<inlineCode parentName=\"p\">{`PagerDuty.getIncidentNotes`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`PagerDuty.createNoteImports`}</inlineCode>{` are used to import and save notes from PagerDuty.\n`}{`[block:api-header]`}{`\n{\n\"title\": \"Webhook Import: PagerDuty to ServiceNow\"\n}\n`}{`[/block]`}{`\nReal-time updates to incidents in PagerDuty are communicated to ServiceNow through `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n      }}>{`extensions`}</a>{`, created on each PagerDuty service that corresponds to a provisioned assignment group in ServiceNow. When a group is initially provisioned, an extension will also be created on the service. In version 3.5 and later, an extension on the service will be provisioned automatically if one does not already exist, whenever a new incident is created.`}</p>\n    <p>{`The extensions, also known as webhooks, specify URLs in the ServiceNow instances to which JSON-encoded data is sent via HTTPS/POST requests.`}</p>\n    <h2 {...{\n      \"id\": \"precedence-and-order-of-operations-in-webhook-import\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#precedence-and-order-of-operations-in-webhook-import\",\n        \"aria-label\": \"precedence and order of operations in webhook import permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Precedence and Order of Operations in Webhook Import`}</h2>\n    <p>{`Throughout the webhook import process, automation and record creation in ServiceNow happens in the following order:`}</p>\n    <ol>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Run the default import actions`}</strong></li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Run dynamic field mapping rules`}</strong></li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Run the custom script, if any`}</strong></li>\n    </ol>\n    <h2 {...{\n      \"id\": \"initial-receiving-and-importing-of-the-webhook\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#initial-receiving-and-importing-of-the-webhook\",\n        \"aria-label\": \"initial receiving and importing of the webhook permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Initial receiving and importing of the webhook`}</h2>\n    <p>{`The first point of entry into the ServiceNow application is the `}<strong parentName=\"p\">{`Webhook Post`}</strong>{` Scripted REST Resource, found in the `}<em parentName=\"p\">{`Application Files`}</em>{` tab. This component handles the receipt of the payload, validation of the webhook key / endpoint path, and generating the response. The processing of the data itself is done by the `}<strong parentName=\"p\">{`PagerDutyInbound`}</strong>{` Script Include, via a call to `}<inlineCode parentName=\"p\">{`PagerDutyInbound.processRestWebhook`}</inlineCode>{`.`}</p>\n    <p><strong parentName=\"p\">{`PagerDutyInbound`}</strong>{` handles the saving of data. It is passed an array, `}<inlineCode parentName=\"p\">{`messages`}</inlineCode>{`, containing one or more webhook event objects as described in `}<a parentName=\"p\" {...{\n        \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview\"\n      }}>{`Webhooks Overview`}</a>{`.`}</p>\n    <p>{`Finally, in the function `}<inlineCode parentName=\"p\">{`PagerDutyInbound._processData`}</inlineCode>{`, an import record is created for each webhook event, in the table `}<inlineCode parentName=\"p\">{`x_pd_integration_webhook_import`}</inlineCode>{`. Data saved in this table by this process, and hence a record of webhooks received, can be viewed in ServiceNow under `}<strong parentName=\"p\">{`PagerDuty `}{`►`}{` Imports `}{`►`}{` Webhook Import Rows`}</strong>{`.`}</p>\n    <h2 {...{\n      \"id\": \"translating-webhook-imports-to-servicenow-incidents\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#translating-webhook-imports-to-servicenow-incidents\",\n        \"aria-label\": \"translating webhook imports to servicenow incidents permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Translating webhook imports to ServiceNow incidents`}</h2>\n    <p>{`The `}<strong parentName=\"p\">{`PagerDuty Webhook Import Table Transform Map`}</strong>{`, and other transform maps that operate on other tables in ServiceNow (v5 and later), take each new record inserted in the webhook import table and translates it to either an insert or an update on the ServiceNow table. Which of these two operations happens depends on whether the import transform is able to find an existing ServiceNow incident record with the same PagerDuty incident ID as the one corresponding to the PagerDuty webhook message.`}</p>\n    <p>{`This behavior is dictated by the configuration of the `}<strong parentName=\"p\">{`Field Maps`}</strong>{` in the Table Transform Map:`}</p>\n    <p>{`[block:image]`}{`\n{\n\"images\": [\n{\n\"image\": `}{`[\n\"https://files.readme.io/caaffc5-coalesce-on-id.png\",\n\"coalesce-on-id.png\",\n730,\n232,\n\"#ebe8eb\"\n]`}{`,\n\"caption\": \"Coalesce = true here means no new record will be created if there is found a preexisting record in the target table with its `}<inlineCode parentName=\"p\">{`x_pd_integration_incident`}</inlineCode>{` field equal to the `}<inlineCode parentName=\"p\">{`id`}</inlineCode>{` field in the source table (`}<inlineCode parentName=\"p\">{`x_pd_integration_webhook_import`}</inlineCode>{`)\"\n}\n]\n}\n`}{`[/block]`}{`\nWhen creating or updating the incident in ServiceNow, one of the next things that is done (for trigger, acknowledge, escalate and delegate webhooks) is automatically setting the assignment group. The group is identified by the PagerDuty escalation policy ID given in the webhook;  the group assigned the incident will be the one whose `}<em parentName=\"p\">{`PagerDuty Escalation`}</em>{` field (`}<inlineCode parentName=\"p\">{`x_pd_integration_pagerduty_escalation`}</inlineCode>{`) is the same ID.`}</p>\n    <p>{`In version 5 and later, the `}<strong parentName=\"p\">{`PdWebhookTransform`}</strong>{` script contains the essence of all the default operations taken when updating or inserting an incident, i.e. the additional fields to populate and particular workflow logic. Within the local scope, for each webhook import, the following variables dictate the actions that will be taken on the target record:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`source`}</inlineCode>{`: The import record. The field `}<inlineCode parentName=\"li\">{`source.message_type`}</inlineCode>{` is of particular interest; it will be one of the `}<a parentName=\"li\" {...{\n          \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview#webhook-types\"\n        }}>{`Webhook Types`}</a>{`.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`action`}</inlineCode>{`: This will be `}<inlineCode parentName=\"li\">{`insert`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`update`}</inlineCode>{` depending on whether a new incident record is being created, or an existing incident is being updated.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`assignOnAckOnly`}</inlineCode>{`: This is a boolean, determined by the setting \"Only assign based on an acknowledgment from PagerDuty user\": this determines whether the ServiceNow incident should be assigned based on acknowledgment from PagerDuty, or if the integration should synchronize incident assignment between ServiceNow and PagerDuty with each webhook update.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`target`}</inlineCode>{`: a GlideRecord object representing the incident in ServiceNow to be created or updated`}</li>\n    </ul>\n    <p>{`At the end of it all, the properties of the incident to be created or updated will be stored in the `}<inlineCode parentName=\"p\">{`target`}</inlineCode>{` variable, and the change will be saved after the script exits.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}