{"expireTime":9007200861688145000,"key":"gatsby-plugin-mdx-entire-payload-bb51480aeaf334f05edc399207097b70-","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:api-header","label":"block:api-header","referenceType":"shortcut","children":[{"type":"text","value":"block:api-header","position":{"start":{"line":1,"column":2,"offset":1},"end":{"line":1,"column":18,"offset":17},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":19,"offset":18},"indent":[]}},{"type":"text","value":"\n{\n  \"title\": \"Common Issues and Resolution\"\n}\n","position":{"start":{"line":1,"column":19,"offset":18},"end":{"line":5,"column":1,"offset":65},"indent":[1,1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":5,"column":2,"offset":66},"end":{"line":5,"column":8,"offset":72},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":65},"end":{"line":5,"column":9,"offset":73},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":5,"column":9,"offset":73},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"I cannot find the PagerDuty app in the system menu","position":{"start":{"line":6,"column":4,"offset":77},"end":{"line":6,"column":54,"offset":127},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":74},"end":{"line":6,"column":54,"offset":127},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Make sure the PagerDuty app has been added to your current instance from the ","position":{"start":{"line":8,"column":3,"offset":131},"end":{"line":8,"column":80,"offset":208},"indent":[]}},{"type":"link","title":null,"url":"https://store.servicenow.com","children":[{"type":"text","value":"ServiceNow store","position":{"start":{"line":8,"column":81,"offset":209},"end":{"line":8,"column":97,"offset":225},"indent":[]}}],"position":{"start":{"line":8,"column":80,"offset":208},"end":{"line":8,"column":128,"offset":256},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":8,"column":128,"offset":256},"end":{"line":8,"column":129,"offset":257},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":131},"end":{"line":8,"column":129,"offset":257},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":129},"end":{"line":8,"column":129,"offset":257},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you just installed the app, try a hard refresh in your browser, or log out and back in again, as the left menu may just not have been reloaded after the install process. This is the most common issue.","position":{"start":{"line":9,"column":3,"offset":260},"end":{"line":9,"column":206,"offset":463},"indent":[]}}],"position":{"start":{"line":9,"column":3,"offset":260},"end":{"line":9,"column":206,"offset":463},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":258},"end":{"line":9,"column":206,"offset":463},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the app to your current instance by going to System Applications, selecting Applications, and clicking the Downloads tab.","position":{"start":{"line":10,"column":3,"offset":466},"end":{"line":10,"column":132,"offset":595},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":466},"end":{"line":10,"column":132,"offset":595},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":464},"end":{"line":10,"column":132,"offset":595},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":129},"end":{"line":10,"column":132,"offset":595},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"I did all the above, but I still can't see the app. What now?","position":{"start":{"line":12,"column":5,"offset":601},"end":{"line":12,"column":66,"offset":662},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":597},"end":{"line":12,"column":66,"offset":662},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Check to see if you have any plugins that could prevent the installation from succeeding. We've seen one instance where a customer had a plugin installed that tried to encrypt each attachment within ServiceNow, which lead to the install process of the PagerDuty app looking like it succeeded but in reality it failed, so they couldn't find PagerDuty in the left-hand navigation menu.","position":{"start":{"line":13,"column":1,"offset":663},"end":{"line":13,"column":384,"offset":1046},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":663},"end":{"line":13,"column":384,"offset":1046},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"ServiceNow incidents do not trigger PagerDuty incidents, or updates to the incident in ServiceNow don't translate to PagerDuty","position":{"start":{"line":15,"column":4,"offset":1051},"end":{"line":15,"column":130,"offset":1177},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1048},"end":{"line":15,"column":130,"offset":1177},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Check that the REST API connection by going to ","position":{"start":{"line":17,"column":4,"offset":1182},"end":{"line":17,"column":51,"offset":1229},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":17,"column":53,"offset":1231},"end":{"line":17,"column":62,"offset":1240},"indent":[]}}],"position":{"start":{"line":17,"column":51,"offset":1229},"end":{"line":17,"column":64,"offset":1242},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":17,"column":64,"offset":1242},"end":{"line":17,"column":65,"offset":1243},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":17,"column":65,"offset":1243},"end":{"line":17,"column":71,"offset":1249},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":17,"column":71,"offset":1249},"end":{"line":17,"column":72,"offset":1250},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration","position":{"start":{"line":17,"column":74,"offset":1252},"end":{"line":17,"column":87,"offset":1265},"indent":[]}}],"position":{"start":{"line":17,"column":72,"offset":1250},"end":{"line":17,"column":89,"offset":1267},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":17,"column":89,"offset":1267},"end":{"line":17,"column":90,"offset":1268},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":17,"column":90,"offset":1268},"end":{"line":17,"column":96,"offset":1274},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":17,"column":96,"offset":1274},"end":{"line":17,"column":97,"offset":1275},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Test REST API Connection","position":{"start":{"line":17,"column":99,"offset":1277},"end":{"line":17,"column":123,"offset":1301},"indent":[]}}],"position":{"start":{"line":17,"column":97,"offset":1275},"end":{"line":17,"column":125,"offset":1303},"indent":[]}},{"type":"text","value":". Check that the conditions for triggering are met.","position":{"start":{"line":17,"column":125,"offset":1303},"end":{"line":17,"column":176,"offset":1354},"indent":[]}}],"position":{"start":{"line":17,"column":4,"offset":1182},"end":{"line":17,"column":176,"offset":1354},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1179},"end":{"line":17,"column":176,"offset":1354},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Check your main ServiceNow app settings, under ","position":{"start":{"line":18,"column":4,"offset":1358},"end":{"line":18,"column":51,"offset":1405},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty ","position":{"start":{"line":18,"column":53,"offset":1407},"end":{"line":18,"column":63,"offset":1417},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":18,"column":63,"offset":1417},"end":{"line":18,"column":69,"offset":1423},"indent":[]}},{"type":"text","value":" Configuration ","position":{"start":{"line":18,"column":69,"offset":1423},"end":{"line":18,"column":84,"offset":1438},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":18,"column":84,"offset":1438},"end":{"line":18,"column":90,"offset":1444},"indent":[]}},{"type":"text","value":" PagerDuty Settings","position":{"start":{"line":18,"column":90,"offset":1444},"end":{"line":18,"column":109,"offset":1463},"indent":[]}}],"position":{"start":{"line":18,"column":51,"offset":1405},"end":{"line":18,"column":111,"offset":1465},"indent":[]}},{"type":"text","value":". Is auto-provisioning disabled? If so, then check to see what the value is in the field ","position":{"start":{"line":18,"column":111,"offset":1465},"end":{"line":18,"column":200,"offset":1554},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Default PagerDuty User ID to use if auto-provisioning is disabled","position":{"start":{"line":18,"column":202,"offset":1556},"end":{"line":18,"column":267,"offset":1621},"indent":[]}}],"position":{"start":{"line":18,"column":200,"offset":1554},"end":{"line":18,"column":269,"offset":1623},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":269,"offset":1623},"end":{"line":18,"column":270,"offset":1624},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":1358},"end":{"line":18,"column":270,"offset":1624},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1355},"end":{"line":18,"column":270,"offset":1624},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"See ","position":{"start":{"line":19,"column":4,"offset":1628},"end":{"line":19,"column":8,"offset":1632},"indent":[]}},{"type":"link","title":null,"url":"doc:servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-","children":[{"type":"text","value":"“When is an incident sent to PagerDuty?”","position":{"start":{"line":19,"column":9,"offset":1633},"end":{"line":19,"column":49,"offset":1673},"indent":[]}}],"position":{"start":{"line":19,"column":8,"offset":1632},"end":{"line":19,"column":117,"offset":1741},"indent":[]}},{"type":"text","value":", in our ServiceNow integration FAQ page.\n","position":{"start":{"line":19,"column":117,"offset":1741},"end":{"line":20,"column":1,"offset":1783},"indent":[1]}},{"type":"linkReference","identifier":"block:callout","label":"block:callout","referenceType":"shortcut","children":[{"type":"text","value":"block:callout","position":{"start":{"line":20,"column":2,"offset":1784},"end":{"line":20,"column":15,"offset":1797},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1783},"end":{"line":20,"column":16,"offset":1798},"indent":[]}},{"type":"text","value":"\n{\n  \"type\": \"warning\",\n  \"body\": \"The \\\"Default PagerDuty User ID\\\" configuration property in the ServiceNow app needs to be a PagerDuty ID, rather than an email address or ServiceNow user ID. PagerDuty IDs are upper case alphanumeric strings that begin with ","position":{"start":{"line":20,"column":16,"offset":1798},"end":{"line":23,"column":237,"offset":2058},"indent":[1,1,1]}},{"type":"inlineCode","value":"P","position":{"start":{"line":23,"column":237,"offset":2058},"end":{"line":23,"column":240,"offset":2061},"indent":[]}},{"type":"text","value":" (see: ","position":{"start":{"line":23,"column":240,"offset":2061},"end":{"line":23,"column":247,"offset":2068},"indent":[]}},{"type":"link","title":null,"url":"/v1/docs/servicenow-faq#section-where-do-the-special-pagerduty-field-values-come-from-","children":[{"type":"text","value":"Where do the special PagerDuty field values come from?","position":{"start":{"line":23,"column":248,"offset":2069},"end":{"line":23,"column":302,"offset":2123},"indent":[]}}],"position":{"start":{"line":23,"column":247,"offset":2068},"end":{"line":23,"column":391,"offset":2212},"indent":[]}},{"type":"text","value":"). \\n\\nThere should be only one user that has the given PagerDuty user ID in your ServiceNow instance, and the email address of that user should match the user with that ID in PagerDuty. Otherwise, some of the API calls that the integration needs to make may not succeed.\\n\\nThis value is used when making the REST API requests to create incidents in PagerDuty, if auto-provisioning is disabled. Thus, if it is set improperly, the requests may not succeed.\",\n  \"title\": \"Default PagerDuty User ID\"\n}\n","position":{"start":{"line":23,"column":391,"offset":2212},"end":{"line":26,"column":1,"offset":2712},"indent":[1,1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":26,"column":2,"offset":2713},"end":{"line":26,"column":8,"offset":2719},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2712},"end":{"line":26,"column":9,"offset":2720},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":1628},"end":{"line":26,"column":9,"offset":2720},"indent":[1,1,1,1,1,1,1]}}],"position":{"start":{"line":19,"column":1,"offset":1625},"end":{"line":26,"column":9,"offset":2720},"indent":[1,1,1,1,1,1,1]}}],"position":{"start":{"line":17,"column":1,"offset":1179},"end":{"line":26,"column":9,"offset":2720},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Incidents in ServiceNow are not updated or created from PagerDuty","position":{"start":{"line":27,"column":4,"offset":2724},"end":{"line":27,"column":69,"offset":2789},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2721},"end":{"line":27,"column":69,"offset":2789},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Most synchronization of data and events from PagerDuty to ServiceNow happens through webhooks sent from PagerDuty to ServiceNow. For this reason, if you notice incidents are not updating or getting created from PagerDuty, the webhook import process is what will need to be examined.","position":{"start":{"line":29,"column":1,"offset":2791},"end":{"line":29,"column":283,"offset":3073},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2791},"end":{"line":29,"column":283,"offset":3073},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check webhook authentication and permissions","position":{"start":{"line":31,"column":5,"offset":3079},"end":{"line":31,"column":49,"offset":3123},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":3075},"end":{"line":31,"column":49,"offset":3123},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To test all settings, go to ","position":{"start":{"line":33,"column":1,"offset":3125},"end":{"line":33,"column":29,"offset":3153},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":33,"column":31,"offset":3155},"end":{"line":33,"column":40,"offset":3164},"indent":[]}}],"position":{"start":{"line":33,"column":29,"offset":3153},"end":{"line":33,"column":42,"offset":3166},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":33,"column":42,"offset":3166},"end":{"line":33,"column":43,"offset":3167},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":33,"column":43,"offset":3167},"end":{"line":33,"column":49,"offset":3173},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":33,"column":49,"offset":3173},"end":{"line":33,"column":50,"offset":3174},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration","position":{"start":{"line":33,"column":52,"offset":3176},"end":{"line":33,"column":65,"offset":3189},"indent":[]}}],"position":{"start":{"line":33,"column":50,"offset":3174},"end":{"line":33,"column":67,"offset":3191},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":33,"column":67,"offset":3191},"end":{"line":33,"column":68,"offset":3192},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":33,"column":68,"offset":3192},"end":{"line":33,"column":74,"offset":3198},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":33,"column":74,"offset":3198},"end":{"line":33,"column":75,"offset":3199},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Test ServiceNow User Authentication.","position":{"start":{"line":33,"column":77,"offset":3201},"end":{"line":33,"column":113,"offset":3237},"indent":[]}}],"position":{"start":{"line":33,"column":75,"offset":3199},"end":{"line":33,"column":115,"offset":3239},"indent":[]}},{"type":"text","value":" You should see the message:","position":{"start":{"line":33,"column":115,"offset":3239},"end":{"line":33,"column":143,"offset":3267},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":3125},"end":{"line":33,"column":143,"offset":3267},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"x_pd_integration (PagerDutyTest): ServiceNow user authentication test successful (200)","position":{"start":{"line":35,"column":1,"offset":3269},"end":{"line":37,"column":4,"offset":3363},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you see the following instead:","position":{"start":{"line":39,"column":1,"offset":3365},"end":{"line":39,"column":34,"offset":3398},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":3365},"end":{"line":39,"column":34,"offset":3398},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"x_pd_integration (PagerDutyTest): ServiceNow user authentication test failed (403)","position":{"start":{"line":41,"column":1,"offset":3400},"end":{"line":43,"column":4,"offset":3490},"indent":[1,1]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure that the ","position":{"start":{"line":45,"column":4,"offset":3495},"end":{"line":45,"column":20,"offset":3511},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"ServiceNow user for authentication","position":{"start":{"line":45,"column":22,"offset":3513},"end":{"line":45,"column":56,"offset":3547},"indent":[]}}],"position":{"start":{"line":45,"column":20,"offset":3511},"end":{"line":45,"column":58,"offset":3549},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":45,"column":58,"offset":3549},"end":{"line":45,"column":63,"offset":3554},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"ServiceNow password for authentication","position":{"start":{"line":45,"column":65,"offset":3556},"end":{"line":45,"column":103,"offset":3594},"indent":[]}}],"position":{"start":{"line":45,"column":63,"offset":3554},"end":{"line":45,"column":105,"offset":3596},"indent":[]}},{"type":"text","value":" configured in ","position":{"start":{"line":45,"column":105,"offset":3596},"end":{"line":45,"column":120,"offset":3611},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":45,"column":122,"offset":3613},"end":{"line":45,"column":131,"offset":3622},"indent":[]}}],"position":{"start":{"line":45,"column":120,"offset":3611},"end":{"line":45,"column":133,"offset":3624},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":45,"column":133,"offset":3624},"end":{"line":45,"column":134,"offset":3625},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":45,"column":134,"offset":3625},"end":{"line":45,"column":140,"offset":3631},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":45,"column":140,"offset":3631},"end":{"line":45,"column":141,"offset":3632},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration","position":{"start":{"line":45,"column":143,"offset":3634},"end":{"line":45,"column":156,"offset":3647},"indent":[]}}],"position":{"start":{"line":45,"column":141,"offset":3632},"end":{"line":45,"column":158,"offset":3649},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":45,"column":158,"offset":3649},"end":{"line":45,"column":159,"offset":3650},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":45,"column":159,"offset":3650},"end":{"line":45,"column":165,"offset":3656},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":45,"column":165,"offset":3656},"end":{"line":45,"column":166,"offset":3657},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Settings","position":{"start":{"line":45,"column":168,"offset":3659},"end":{"line":45,"column":186,"offset":3677},"indent":[]}}],"position":{"start":{"line":45,"column":166,"offset":3657},"end":{"line":45,"column":188,"offset":3679},"indent":[]}},{"type":"text","value":" are valid credentials for a ServiceNow web service access user","position":{"start":{"line":45,"column":188,"offset":3679},"end":{"line":45,"column":251,"offset":3742},"indent":[]}}],"position":{"start":{"line":45,"column":4,"offset":3495},"end":{"line":45,"column":251,"offset":3742},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3492},"end":{"line":45,"column":251,"offset":3742},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure that the password is consistent between the user and the setting in the PagerDuty Configuration properties.","position":{"start":{"line":46,"column":4,"offset":3746},"end":{"line":46,"column":118,"offset":3860},"indent":[]}}],"position":{"start":{"line":46,"column":4,"offset":3746},"end":{"line":46,"column":118,"offset":3860},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":3743},"end":{"line":46,"column":118,"offset":3860},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure that the user for webhook authentication has the following roles:","position":{"start":{"line":47,"column":4,"offset":3864},"end":{"line":47,"column":76,"offset":3936},"indent":[]}}],"position":{"start":{"line":47,"column":4,"offset":3864},"end":{"line":47,"column":76,"offset":3936},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"itil","position":{"start":{"line":48,"column":7,"offset":3943},"end":{"line":48,"column":13,"offset":3949},"indent":[]}}],"position":{"start":{"line":48,"column":7,"offset":3943},"end":{"line":48,"column":13,"offset":3949},"indent":[]}}],"position":{"start":{"line":48,"column":5,"offset":3941},"end":{"line":48,"column":13,"offset":3949},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"rest_service","position":{"start":{"line":49,"column":7,"offset":3956},"end":{"line":49,"column":21,"offset":3970},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":49,"column":21,"offset":3970},"end":{"line":49,"column":22,"offset":3971},"indent":[]}}],"position":{"start":{"line":49,"column":7,"offset":3956},"end":{"line":49,"column":22,"offset":3971},"indent":[]}}],"position":{"start":{"line":49,"column":5,"offset":3954},"end":{"line":49,"column":22,"offset":3971},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"x_pd_integration.admin","position":{"start":{"line":50,"column":7,"offset":3978},"end":{"line":50,"column":31,"offset":4002},"indent":[]}}],"position":{"start":{"line":50,"column":7,"offset":3978},"end":{"line":50,"column":31,"offset":4002},"indent":[]}}],"position":{"start":{"line":50,"column":5,"offset":3976},"end":{"line":50,"column":31,"offset":4002},"indent":[]}}],"position":{"start":{"line":48,"column":5,"offset":3941},"end":{"line":50,"column":31,"offset":4002},"indent":[5,5]}}],"position":{"start":{"line":47,"column":1,"offset":3861},"end":{"line":50,"column":31,"offset":4002},"indent":[1,1,1]}}],"position":{"start":{"line":45,"column":1,"offset":3492},"end":{"line":50,"column":31,"offset":4002},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If the password or username have changed in ServiceNow, you must also update the credentials in the ServiceNow extensions on your PagerDuty services. Alternately, in all versions 3.5 and later, you can delete the extensions, set the value of the ","position":{"start":{"line":52,"column":1,"offset":4004},"end":{"line":52,"column":247,"offset":4250},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Webhook","position":{"start":{"line":52,"column":248,"offset":4251},"end":{"line":52,"column":265,"offset":4268},"indent":[]}}],"position":{"start":{"line":52,"column":247,"offset":4250},"end":{"line":52,"column":266,"offset":4269},"indent":[]}},{"type":"text","value":" field to blank in your provisioned assignment groups and configuration items, and then re-provision them.","position":{"start":{"line":52,"column":266,"offset":4269},"end":{"line":52,"column":372,"offset":4375},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":4004},"end":{"line":52,"column":372,"offset":4375},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check extensions on PagerDuty services","position":{"start":{"line":53,"column":5,"offset":4380},"end":{"line":53,"column":43,"offset":4418},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":4376},"end":{"line":53,"column":43,"offset":4418},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Check that the URL in the extensions is correct. The host it points to should be the same subdomain of ServiceNow as the one that you have integrated with PagerDuty.","position":{"start":{"line":55,"column":3,"offset":4422},"end":{"line":55,"column":168,"offset":4587},"indent":[]}}],"position":{"start":{"line":55,"column":3,"offset":4422},"end":{"line":55,"column":168,"offset":4587},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":4420},"end":{"line":56,"column":1,"offset":4588},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you have provisioned your services and webhooks in PagerDuty from a development or staging instance of ServiceNow, you will need to update your extension URLs to reflect your production instance of ServiceNow, or the bidirectional integration will not work, because webhooks would in this case be sent to the development/staging instance of ServiceNow.","position":{"start":{"line":57,"column":3,"offset":4591},"end":{"line":57,"column":358,"offset":4946},"indent":[]}}],"position":{"start":{"line":57,"column":3,"offset":4591},"end":{"line":57,"column":358,"offset":4946},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":4589},"end":{"line":57,"column":358,"offset":4946},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":4420},"end":{"line":57,"column":358,"offset":4946},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check for assignment groups matching the escalation policy","position":{"start":{"line":59,"column":5,"offset":4952},"end":{"line":59,"column":63,"offset":5010},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":4948},"end":{"line":59,"column":63,"offset":5010},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Make sure the escalation policy is assigned the incident in PagerDuty, whose corresponding incident in ServiceNow wasn’t updated (or for which no ServiceNow incident was created), has a corresponding assignment group in ServiceNow","position":{"start":{"line":61,"column":3,"offset":5014},"end":{"line":61,"column":233,"offset":5244},"indent":[]}}],"position":{"start":{"line":61,"column":3,"offset":5014},"end":{"line":61,"column":233,"offset":5244},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":5012},"end":{"line":62,"column":1,"offset":5245},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Because the escalation policy is assigned the incident, ensure there is an assignment group that has its ","position":{"start":{"line":63,"column":3,"offset":5248},"end":{"line":63,"column":108,"offset":5353},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"PagerDuty Escalation","position":{"start":{"line":63,"column":109,"offset":5354},"end":{"line":63,"column":129,"offset":5374},"indent":[]}}],"position":{"start":{"line":63,"column":108,"offset":5353},"end":{"line":63,"column":130,"offset":5375},"indent":[]}},{"type":"text","value":" field set to the escalation policy’s ID.","position":{"start":{"line":63,"column":130,"offset":5375},"end":{"line":63,"column":171,"offset":5416},"indent":[]}}],"position":{"start":{"line":63,"column":3,"offset":5248},"end":{"line":63,"column":171,"offset":5416},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":5246},"end":{"line":64,"column":1,"offset":5417},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You may need to add the two PagerDuty fields to the group form or list view to view their values.","position":{"start":{"line":65,"column":3,"offset":5420},"end":{"line":65,"column":100,"offset":5517},"indent":[]}}],"position":{"start":{"line":65,"column":3,"offset":5420},"end":{"line":65,"column":100,"offset":5517},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":5418},"end":{"line":65,"column":100,"offset":5517},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":5012},"end":{"line":65,"column":100,"offset":5517},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check webhook import records","position":{"start":{"line":67,"column":5,"offset":5523},"end":{"line":67,"column":33,"offset":5551},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":5519},"end":{"line":67,"column":33,"offset":5551},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Check to see if the webhook messages have been saved in ServiceNow. In ServiceNow, go to ","position":{"start":{"line":69,"column":1,"offset":5553},"end":{"line":69,"column":90,"offset":5642},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty","position":{"start":{"line":69,"column":92,"offset":5644},"end":{"line":69,"column":101,"offset":5653},"indent":[]}}],"position":{"start":{"line":69,"column":90,"offset":5642},"end":{"line":69,"column":103,"offset":5655},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":69,"column":103,"offset":5655},"end":{"line":69,"column":104,"offset":5656},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":69,"column":104,"offset":5656},"end":{"line":69,"column":110,"offset":5662},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":69,"column":110,"offset":5662},"end":{"line":69,"column":111,"offset":5663},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Imports","position":{"start":{"line":69,"column":113,"offset":5665},"end":{"line":69,"column":120,"offset":5672},"indent":[]}}],"position":{"start":{"line":69,"column":111,"offset":5663},"end":{"line":69,"column":122,"offset":5674},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":69,"column":122,"offset":5674},"end":{"line":69,"column":123,"offset":5675},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":69,"column":123,"offset":5675},"end":{"line":69,"column":129,"offset":5681},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":69,"column":129,"offset":5681},"end":{"line":69,"column":130,"offset":5682},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Webhook Import Rows","position":{"start":{"line":69,"column":132,"offset":5684},"end":{"line":69,"column":151,"offset":5703},"indent":[]}}],"position":{"start":{"line":69,"column":130,"offset":5682},"end":{"line":69,"column":153,"offset":5705},"indent":[]}},{"type":"text","value":" and look for records with creation time that coincides with the time that the incident in PagerDuty was triggered, acknowledged or resolved.","position":{"start":{"line":69,"column":153,"offset":5705},"end":{"line":69,"column":294,"offset":5846},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":5553},"end":{"line":69,"column":294,"offset":5846},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check for required fields","position":{"start":{"line":71,"column":5,"offset":5852},"end":{"line":71,"column":30,"offset":5877},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":5848},"end":{"line":71,"column":30,"offset":5877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you can see that webhooks are getting through from PagerDuty to ServiceNow, but are not creating/updating an incident, try manually closing an incident in ServiceNow. If manually closing an incident requires you to enter values for certain fields, your required fields have likely been customized. Create ","position":{"start":{"line":73,"column":1,"offset":5879},"end":{"line":73,"column":309,"offset":6187},"indent":[]}},{"type":"link","title":null,"url":"https://support.pagerduty.com/docs/advanced-servicenow-configuration#section-inbound-field-rules","children":[{"type":"text","value":"inbound field rules","position":{"start":{"line":73,"column":310,"offset":6188},"end":{"line":73,"column":329,"offset":6207},"indent":[]}}],"position":{"start":{"line":73,"column":309,"offset":6187},"end":{"line":73,"column":428,"offset":6306},"indent":[]}},{"type":"text","value":" so that the required fields have a default value. ","position":{"start":{"line":73,"column":428,"offset":6306},"end":{"line":73,"column":479,"offset":6357},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":5879},"end":{"line":73,"column":479,"offset":6357},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check for interfering state field values","position":{"start":{"line":75,"column":5,"offset":6363},"end":{"line":75,"column":45,"offset":6403},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":6359},"end":{"line":75,"column":45,"offset":6403},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Check to see if you have any custom choices set up for the ","position":{"start":{"line":77,"column":1,"offset":6405},"end":{"line":77,"column":60,"offset":6464},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"State","position":{"start":{"line":77,"column":61,"offset":6465},"end":{"line":77,"column":66,"offset":6470},"indent":[]}}],"position":{"start":{"line":77,"column":60,"offset":6464},"end":{"line":77,"column":67,"offset":6471},"indent":[]}},{"type":"text","value":" field in the ServiceNow incidents model:","position":{"start":{"line":77,"column":67,"offset":6471},"end":{"line":77,"column":108,"offset":6512},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":6405},"end":{"line":77,"column":108,"offset":6512},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Right click on the label of the ","position":{"start":{"line":79,"column":4,"offset":6517},"end":{"line":79,"column":36,"offset":6549},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"State","position":{"start":{"line":79,"column":37,"offset":6550},"end":{"line":79,"column":42,"offset":6555},"indent":[]}}],"position":{"start":{"line":79,"column":36,"offset":6549},"end":{"line":79,"column":43,"offset":6556},"indent":[]}},{"type":"text","value":" field (i.e. that would say \"New\" or \"Resolved\"), ","position":{"start":{"line":79,"column":43,"offset":6556},"end":{"line":79,"column":93,"offset":6606},"indent":[]}}],"position":{"start":{"line":79,"column":4,"offset":6517},"end":{"line":79,"column":93,"offset":6606},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":6514},"end":{"line":79,"column":93,"offset":6606},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Select ","position":{"start":{"line":80,"column":4,"offset":6610},"end":{"line":80,"column":11,"offset":6617},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configure Dictionary","position":{"start":{"line":80,"column":13,"offset":6619},"end":{"line":80,"column":33,"offset":6639},"indent":[]}}],"position":{"start":{"line":80,"column":11,"offset":6617},"end":{"line":80,"column":35,"offset":6641},"indent":[]}}],"position":{"start":{"line":80,"column":4,"offset":6610},"end":{"line":80,"column":35,"offset":6641},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":6607},"end":{"line":80,"column":35,"offset":6641},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Switch to ","position":{"start":{"line":81,"column":4,"offset":6645},"end":{"line":81,"column":14,"offset":6655},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Advanced view","position":{"start":{"line":81,"column":16,"offset":6657},"end":{"line":81,"column":29,"offset":6670},"indent":[]}}],"position":{"start":{"line":81,"column":14,"offset":6655},"end":{"line":81,"column":31,"offset":6672},"indent":[]}}],"position":{"start":{"line":81,"column":4,"offset":6645},"end":{"line":81,"column":31,"offset":6672},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":6642},"end":{"line":81,"column":31,"offset":6672},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to the ","position":{"start":{"line":82,"column":4,"offset":6676},"end":{"line":82,"column":14,"offset":6686},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Choices","position":{"start":{"line":82,"column":16,"offset":6688},"end":{"line":82,"column":23,"offset":6695},"indent":[]}}],"position":{"start":{"line":82,"column":14,"offset":6686},"end":{"line":82,"column":25,"offset":6697},"indent":[]}},{"type":"text","value":" tab and look for entries with higher numbers in the ","position":{"start":{"line":82,"column":25,"offset":6697},"end":{"line":82,"column":78,"offset":6750},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Value","position":{"start":{"line":82,"column":80,"offset":6752},"end":{"line":82,"column":85,"offset":6757},"indent":[]}}],"position":{"start":{"line":82,"column":78,"offset":6750},"end":{"line":82,"column":87,"offset":6759},"indent":[]}},{"type":"text","value":" field.","position":{"start":{"line":82,"column":87,"offset":6759},"end":{"line":82,"column":94,"offset":6766},"indent":[]}}],"position":{"start":{"line":82,"column":4,"offset":6676},"end":{"line":82,"column":94,"offset":6766},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":6673},"end":{"line":82,"column":94,"offset":6766},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":6514},"end":{"line":82,"column":94,"offset":6766},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The integration follows the same convention as the out-of-box state values of ServiceNow. Higher numbers imply a more advanced state (i.e. a 6 or higher would be done/resolved or some variant thereof). If the state of the incident that did not automatically resolve is of a higher numeric value, but the incident did not resolve, it is because it was treated as already resolved.","position":{"start":{"line":84,"column":1,"offset":6768},"end":{"line":84,"column":380,"offset":7147},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":6768},"end":{"line":84,"column":380,"offset":7147},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To correct this, you will need to modify the custom choice values that you have configured for the ","position":{"start":{"line":86,"column":1,"offset":7149},"end":{"line":86,"column":100,"offset":7248},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"State","position":{"start":{"line":86,"column":102,"offset":7250},"end":{"line":86,"column":107,"offset":7255},"indent":[]}}],"position":{"start":{"line":86,"column":100,"offset":7248},"end":{"line":86,"column":109,"offset":7257},"indent":[]}},{"type":"text","value":" field to be lower than 6, so that they are treated as an unresolved state (if they reflect that).","position":{"start":{"line":86,"column":109,"offset":7257},"end":{"line":86,"column":207,"offset":7355},"indent":[]}}],"position":{"start":{"line":86,"column":1,"offset":7149},"end":{"line":86,"column":207,"offset":7355},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Check For Interfering Data Policies","position":{"start":{"line":88,"column":5,"offset":7361},"end":{"line":88,"column":40,"offset":7396},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":7357},"end":{"line":88,"column":40,"offset":7396},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Data policies, which allow the ServiceNow administrator to create validation rules on tables, can stop the webhook import process from actually committing the changes from PagerDuty to the ServiceNow incident record, and thus block functionality of the integration such as automatic resolution of incidents.","position":{"start":{"line":90,"column":1,"offset":7398},"end":{"line":90,"column":308,"offset":7705},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":7398},"end":{"line":90,"column":308,"offset":7705},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When a data policy does this, there will not be any clear indication of it in the application-scoped logs. Rather, in the system logs, there will be an error-level log entry created at the time of the webhook import, with a message beginning with ","position":{"start":{"line":92,"column":1,"offset":7707},"end":{"line":92,"column":248,"offset":7954},"indent":[]}},{"type":"inlineCode","value":"Data Policy Exception","position":{"start":{"line":92,"column":248,"offset":7954},"end":{"line":92,"column":271,"offset":7977},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":92,"column":271,"offset":7977},"end":{"line":92,"column":272,"offset":7978},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":7707},"end":{"line":92,"column":272,"offset":7978},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fortunately, as of version 4 of the integration, inbound field rules give you the ability to automatically fill fields in the incident, and this can be used to fill fields as desired in order satisfy data policies.","position":{"start":{"line":94,"column":1,"offset":7980},"end":{"line":94,"column":215,"offset":8194},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":7980},"end":{"line":94,"column":215,"offset":8194},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To address this:","position":{"start":{"line":96,"column":1,"offset":8196},"end":{"line":96,"column":17,"offset":8212},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":8196},"end":{"line":96,"column":17,"offset":8212},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":98,"column":4,"offset":8217},"end":{"line":98,"column":10,"offset":8223},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"System Policy ","position":{"start":{"line":98,"column":12,"offset":8225},"end":{"line":98,"column":26,"offset":8239},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":98,"column":26,"offset":8239},"end":{"line":98,"column":32,"offset":8245},"indent":[]}},{"type":"text","value":" Data Policies","position":{"start":{"line":98,"column":32,"offset":8245},"end":{"line":98,"column":46,"offset":8259},"indent":[]}}],"position":{"start":{"line":98,"column":10,"offset":8223},"end":{"line":98,"column":48,"offset":8261},"indent":[]}},{"type":"text","value":", and in the list view","position":{"start":{"line":98,"column":48,"offset":8261},"end":{"line":98,"column":70,"offset":8283},"indent":[]}}],"position":{"start":{"line":98,"column":4,"offset":8217},"end":{"line":98,"column":70,"offset":8283},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":8214},"end":{"line":98,"column":70,"offset":8283},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a new filter on the ","position":{"start":{"line":99,"column":4,"offset":8287},"end":{"line":99,"column":31,"offset":8314},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Table","position":{"start":{"line":99,"column":33,"offset":8316},"end":{"line":99,"column":38,"offset":8321},"indent":[]}}],"position":{"start":{"line":99,"column":31,"offset":8314},"end":{"line":99,"column":40,"offset":8323},"indent":[]}},{"type":"text","value":" field: ","position":{"start":{"line":99,"column":40,"offset":8323},"end":{"line":99,"column":48,"offset":8331},"indent":[]}},{"type":"inlineCode","value":"=incident","position":{"start":{"line":99,"column":48,"offset":8331},"end":{"line":99,"column":59,"offset":8342},"indent":[]}}],"position":{"start":{"line":99,"column":4,"offset":8287},"end":{"line":99,"column":59,"offset":8342},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":8284},"end":{"line":99,"column":59,"offset":8342},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Make note of all the fields, and the constraints","position":{"start":{"line":100,"column":4,"offset":8346},"end":{"line":100,"column":52,"offset":8394},"indent":[]}}],"position":{"start":{"line":100,"column":4,"offset":8346},"end":{"line":100,"column":52,"offset":8394},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":8343},"end":{"line":100,"column":52,"offset":8394},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":101,"column":4,"offset":8398},"end":{"line":101,"column":10,"offset":8404},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty ","position":{"start":{"line":101,"column":12,"offset":8406},"end":{"line":101,"column":22,"offset":8416},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":101,"column":22,"offset":8416},"end":{"line":101,"column":28,"offset":8422},"indent":[]}},{"type":"text","value":" Configuration ","position":{"start":{"line":101,"column":28,"offset":8422},"end":{"line":101,"column":43,"offset":8437},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":101,"column":43,"offset":8437},"end":{"line":101,"column":49,"offset":8443},"indent":[]}},{"type":"text","value":" Inbound Field Rules","position":{"start":{"line":101,"column":49,"offset":8443},"end":{"line":101,"column":69,"offset":8463},"indent":[]}}],"position":{"start":{"line":101,"column":10,"offset":8404},"end":{"line":101,"column":71,"offset":8465},"indent":[]}}],"position":{"start":{"line":101,"column":4,"offset":8398},"end":{"line":101,"column":71,"offset":8465},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":8395},"end":{"line":101,"column":71,"offset":8465},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For each incident field that was part of the conditions in the data policy:","position":{"start":{"line":102,"column":4,"offset":8469},"end":{"line":102,"column":79,"offset":8544},"indent":[]}}],"position":{"start":{"line":102,"column":4,"offset":8469},"end":{"line":102,"column":79,"offset":8544},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":8466},"end":{"line":102,"column":79,"offset":8544},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":8214},"end":{"line":102,"column":79,"offset":8544},"indent":[1,1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create a new inbound field rule","position":{"start":{"line":103,"column":5,"offset":8549},"end":{"line":103,"column":36,"offset":8580},"indent":[]}}],"position":{"start":{"line":103,"column":5,"offset":8549},"end":{"line":103,"column":36,"offset":8580},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":8545},"end":{"line":103,"column":36,"offset":8580},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Set the webhook type to ","position":{"start":{"line":104,"column":5,"offset":8585},"end":{"line":104,"column":29,"offset":8609},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Acknowledge","position":{"start":{"line":104,"column":30,"offset":8610},"end":{"line":104,"column":41,"offset":8621},"indent":[]}}],"position":{"start":{"line":104,"column":29,"offset":8609},"end":{"line":104,"column":42,"offset":8622},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":104,"column":42,"offset":8622},"end":{"line":104,"column":46,"offset":8626},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Resolve","position":{"start":{"line":104,"column":47,"offset":8627},"end":{"line":104,"column":54,"offset":8634},"indent":[]}}],"position":{"start":{"line":104,"column":46,"offset":8626},"end":{"line":104,"column":55,"offset":8635},"indent":[]}},{"type":"text","value":" based on which of these events the ServiceNow incidents aren't being updated for","position":{"start":{"line":104,"column":55,"offset":8635},"end":{"line":104,"column":136,"offset":8716},"indent":[]}}],"position":{"start":{"line":104,"column":5,"offset":8585},"end":{"line":104,"column":136,"offset":8716},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":8581},"end":{"line":104,"column":136,"offset":8716},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Fill the field with a default value, or dynamically based on the webhook payload.","position":{"start":{"line":105,"column":5,"offset":8721},"end":{"line":105,"column":86,"offset":8802},"indent":[]}}],"position":{"start":{"line":105,"column":5,"offset":8721},"end":{"line":105,"column":86,"offset":8802},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":8717},"end":{"line":105,"column":86,"offset":8802},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":8545},"end":{"line":105,"column":86,"offset":8802},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Main article: ","position":{"start":{"line":107,"column":1,"offset":8804},"end":{"line":107,"column":15,"offset":8818},"indent":[]}},{"type":"link","title":null,"url":"doc:advanced-servicenow-configuration#section-inbound-field-rules","children":[{"type":"text","value":"Advanced ServiceNow Configuration: Inbound Field Rules","position":{"start":{"line":107,"column":16,"offset":8819},"end":{"line":107,"column":70,"offset":8873},"indent":[]}}],"position":{"start":{"line":107,"column":15,"offset":8818},"end":{"line":107,"column":138,"offset":8941},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":107,"column":138,"offset":8941},"end":{"line":107,"column":139,"offset":8942},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":8804},"end":{"line":107,"column":139,"offset":8942},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"An inbound field rule is not filling its target field with the desired value","position":{"start":{"line":109,"column":4,"offset":8947},"end":{"line":109,"column":80,"offset":9023},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":8944},"end":{"line":109,"column":80,"offset":9023},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The most common causes include:","position":{"start":{"line":111,"column":1,"offset":9025},"end":{"line":111,"column":32,"offset":9056},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":9025},"end":{"line":111,"column":32,"offset":9056},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A business rule or some other process is overwriting the changes to the field after it is initially set by the field rule.","position":{"start":{"line":113,"column":3,"offset":9060},"end":{"line":113,"column":125,"offset":9182},"indent":[]}}],"position":{"start":{"line":113,"column":3,"offset":9060},"end":{"line":113,"column":125,"offset":9182},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":9058},"end":{"line":113,"column":125,"offset":9182},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The inbound field rule only applies to a specific webhook event type (i.e. Trigger/Resolve), and the change didn't occur at the specified time because that's not when the relevant webhook type came through.","position":{"start":{"line":114,"column":3,"offset":9185},"end":{"line":114,"column":209,"offset":9391},"indent":[]}}],"position":{"start":{"line":114,"column":3,"offset":9185},"end":{"line":114,"column":209,"offset":9391},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":9183},"end":{"line":114,"column":209,"offset":9391},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The inbound field rule is disabled","position":{"start":{"line":115,"column":3,"offset":9394},"end":{"line":115,"column":37,"offset":9428},"indent":[]}}],"position":{"start":{"line":115,"column":3,"offset":9394},"end":{"line":115,"column":37,"offset":9428},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":9392},"end":{"line":115,"column":37,"offset":9428},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":9058},"end":{"line":115,"column":37,"offset":9428},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To troubleshoot:","position":{"start":{"line":117,"column":1,"offset":9430},"end":{"line":117,"column":17,"offset":9446},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":9430},"end":{"line":117,"column":17,"offset":9446},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":119,"column":4,"offset":9451},"end":{"line":119,"column":10,"offset":9457},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty ","position":{"start":{"line":119,"column":12,"offset":9459},"end":{"line":119,"column":22,"offset":9469},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":119,"column":22,"offset":9469},"end":{"line":119,"column":28,"offset":9475},"indent":[]}},{"type":"text","value":" Configuration ","position":{"start":{"line":119,"column":28,"offset":9475},"end":{"line":119,"column":43,"offset":9490},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":119,"column":43,"offset":9490},"end":{"line":119,"column":49,"offset":9496},"indent":[]}},{"type":"text","value":" Inbound Field Rules","position":{"start":{"line":119,"column":49,"offset":9496},"end":{"line":119,"column":69,"offset":9516},"indent":[]}}],"position":{"start":{"line":119,"column":10,"offset":9457},"end":{"line":119,"column":71,"offset":9518},"indent":[]}},{"type":"text","value":" and verify:","position":{"start":{"line":119,"column":71,"offset":9518},"end":{"line":119,"column":83,"offset":9530},"indent":[]}}],"position":{"start":{"line":119,"column":4,"offset":9451},"end":{"line":119,"column":83,"offset":9530},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":9448},"end":{"line":119,"column":83,"offset":9530},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":9448},"end":{"line":119,"column":83,"offset":9530},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"That ","position":{"start":{"line":120,"column":5,"offset":9535},"end":{"line":120,"column":10,"offset":9540},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Enabled","position":{"start":{"line":120,"column":12,"offset":9542},"end":{"line":120,"column":19,"offset":9549},"indent":[]}}],"position":{"start":{"line":120,"column":10,"offset":9540},"end":{"line":120,"column":21,"offset":9551},"indent":[]}},{"type":"text","value":" is ","position":{"start":{"line":120,"column":21,"offset":9551},"end":{"line":120,"column":25,"offset":9555},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"true","position":{"start":{"line":120,"column":26,"offset":9556},"end":{"line":120,"column":30,"offset":9560},"indent":[]}}],"position":{"start":{"line":120,"column":25,"offset":9555},"end":{"line":120,"column":31,"offset":9561},"indent":[]}},{"type":"text","value":" for the inbound field rule in question","position":{"start":{"line":120,"column":31,"offset":9561},"end":{"line":120,"column":70,"offset":9600},"indent":[]}}],"position":{"start":{"line":120,"column":5,"offset":9535},"end":{"line":120,"column":70,"offset":9600},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":9531},"end":{"line":120,"column":70,"offset":9600},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":121,"column":5,"offset":9605},"end":{"line":121,"column":9,"offset":9609},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty webhook type","position":{"start":{"line":121,"column":11,"offset":9611},"end":{"line":121,"column":33,"offset":9633},"indent":[]}}],"position":{"start":{"line":121,"column":9,"offset":9609},"end":{"line":121,"column":35,"offset":9635},"indent":[]}},{"type":"text","value":" is the expected type","position":{"start":{"line":121,"column":35,"offset":9635},"end":{"line":121,"column":56,"offset":9656},"indent":[]}}],"position":{"start":{"line":121,"column":5,"offset":9605},"end":{"line":121,"column":56,"offset":9656},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":9601},"end":{"line":121,"column":56,"offset":9656},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":9531},"end":{"line":121,"column":56,"offset":9656},"indent":[1]}},{"type":"list","ordered":true,"start":2,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":122,"column":4,"offset":9660},"end":{"line":122,"column":10,"offset":9666},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"System Definition ","position":{"start":{"line":122,"column":12,"offset":9668},"end":{"line":122,"column":30,"offset":9686},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":122,"column":30,"offset":9686},"end":{"line":122,"column":36,"offset":9692},"indent":[]}},{"type":"text","value":" Business Rules","position":{"start":{"line":122,"column":36,"offset":9692},"end":{"line":122,"column":51,"offset":9707},"indent":[]}}],"position":{"start":{"line":122,"column":10,"offset":9666},"end":{"line":122,"column":53,"offset":9709},"indent":[]}},{"type":"text","value":" and look for all rules that modify the field, as follows:","position":{"start":{"line":122,"column":53,"offset":9709},"end":{"line":122,"column":111,"offset":9767},"indent":[]}}],"position":{"start":{"line":122,"column":4,"offset":9660},"end":{"line":122,"column":111,"offset":9767},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":9657},"end":{"line":122,"column":111,"offset":9767},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":9657},"end":{"line":122,"column":111,"offset":9767},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enable the field ","position":{"start":{"line":123,"column":5,"offset":9772},"end":{"line":123,"column":22,"offset":9789},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Set field values","position":{"start":{"line":123,"column":24,"offset":9791},"end":{"line":123,"column":40,"offset":9807},"indent":[]}}],"position":{"start":{"line":123,"column":22,"offset":9789},"end":{"line":123,"column":42,"offset":9809},"indent":[]}},{"type":"text","value":" in the list view","position":{"start":{"line":123,"column":42,"offset":9809},"end":{"line":123,"column":59,"offset":9826},"indent":[]}}],"position":{"start":{"line":123,"column":5,"offset":9772},"end":{"line":123,"column":59,"offset":9826},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":9768},"end":{"line":123,"column":59,"offset":9826},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Search filter for table: ","position":{"start":{"line":124,"column":5,"offset":9831},"end":{"line":124,"column":30,"offset":9856},"indent":[]}},{"type":"inlineCode","value":"=incident","position":{"start":{"line":124,"column":30,"offset":9856},"end":{"line":124,"column":41,"offset":9867},"indent":[]}}],"position":{"start":{"line":124,"column":5,"offset":9831},"end":{"line":124,"column":41,"offset":9867},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":9827},"end":{"line":124,"column":41,"offset":9867},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Filter out all rows with blank values for ","position":{"start":{"line":125,"column":5,"offset":9872},"end":{"line":125,"column":47,"offset":9914},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Set field values","position":{"start":{"line":125,"column":49,"offset":9916},"end":{"line":125,"column":65,"offset":9932},"indent":[]}}],"position":{"start":{"line":125,"column":47,"offset":9914},"end":{"line":125,"column":67,"offset":9934},"indent":[]}}],"position":{"start":{"line":125,"column":5,"offset":9872},"end":{"line":125,"column":67,"offset":9934},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":9868},"end":{"line":125,"column":67,"offset":9934},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If there is more than one page of results, search for all records such that ","position":{"start":{"line":126,"column":5,"offset":9939},"end":{"line":126,"column":81,"offset":10015},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Set fields values","position":{"start":{"line":126,"column":83,"offset":10017},"end":{"line":126,"column":100,"offset":10034},"indent":[]}}],"position":{"start":{"line":126,"column":81,"offset":10015},"end":{"line":126,"column":102,"offset":10036},"indent":[]}},{"type":"text","value":" contains the column name, i.e. ","position":{"start":{"line":126,"column":102,"offset":10036},"end":{"line":126,"column":134,"offset":10068},"indent":[]}},{"type":"inlineCode","value":"*business_service","position":{"start":{"line":126,"column":134,"offset":10068},"end":{"line":126,"column":153,"offset":10087},"indent":[]}},{"type":"text","value":". If you find any that modify this field, that may explain why the field is not getting set according to the inbound field rule: it is being overwritten by the business rule.","position":{"start":{"line":126,"column":153,"offset":10087},"end":{"line":126,"column":327,"offset":10261},"indent":[]}}],"position":{"start":{"line":126,"column":5,"offset":9939},"end":{"line":126,"column":327,"offset":10261},"indent":[]}}],"position":{"start":{"line":126,"column":1,"offset":9935},"end":{"line":126,"column":327,"offset":10261},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If nothing turns up, look at all business rules that include running a script, to see if any of the scripts include setting the value of the field in question.","position":{"start":{"line":127,"column":5,"offset":10266},"end":{"line":127,"column":164,"offset":10425},"indent":[]}}],"position":{"start":{"line":127,"column":5,"offset":10266},"end":{"line":127,"column":164,"offset":10425},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":10262},"end":{"line":127,"column":164,"offset":10425},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":9768},"end":{"line":127,"column":164,"offset":10425},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Some user actions are not updated in ServiceNow from PagerDuty.","position":{"start":{"line":129,"column":4,"offset":10430},"end":{"line":129,"column":67,"offset":10493},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":10427},"end":{"line":129,"column":67,"offset":10493},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Check the user's email address in ServiceNow to make sure it matches the user's email address in PagerDuty, and that the user is provisioned.","position":{"start":{"line":131,"column":1,"offset":10495},"end":{"line":131,"column":142,"offset":10636},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":10495},"end":{"line":131,"column":142,"offset":10636},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Incident notes are not syncing","position":{"start":{"line":133,"column":4,"offset":10641},"end":{"line":133,"column":34,"offset":10671},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":10638},"end":{"line":133,"column":34,"offset":10671},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The user posting the note might not be ","position":{"start":{"line":135,"column":3,"offset":10675},"end":{"line":135,"column":42,"offset":10714},"indent":[]}},{"type":"link","title":null,"url":"doc:servicenow#section-provisioning-linking-objects-between-systems","children":[{"type":"text","value":"provisioned in PagerDuty","position":{"start":{"line":135,"column":43,"offset":10715},"end":{"line":135,"column":67,"offset":10739},"indent":[]}}],"position":{"start":{"line":135,"column":42,"offset":10714},"end":{"line":135,"column":137,"offset":10809},"indent":[]}},{"type":"text","value":", i.e. does not have a PagerDuty user ID assigned, and automatic provisioning (the option \"Automatically create a PagerDuty user if one is not found matching the user's email\") is disabled, and one of the following applies:","position":{"start":{"line":135,"column":137,"offset":10809},"end":{"line":135,"column":360,"offset":11032},"indent":[]}}],"position":{"start":{"line":135,"column":3,"offset":10675},"end":{"line":135,"column":360,"offset":11032},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"There is no value set for the option \"Default PagerDuty User ID to use if auto-provisioning is disabled\" in ","position":{"start":{"line":136,"column":5,"offset":11037},"end":{"line":136,"column":113,"offset":11145},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Configuration ","position":{"start":{"line":136,"column":115,"offset":11147},"end":{"line":136,"column":129,"offset":11161},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":136,"column":129,"offset":11161},"end":{"line":136,"column":135,"offset":11167},"indent":[]}},{"type":"text","value":" PagerDuty Settings","position":{"start":{"line":136,"column":135,"offset":11167},"end":{"line":136,"column":154,"offset":11186},"indent":[]}}],"position":{"start":{"line":136,"column":113,"offset":11145},"end":{"line":136,"column":156,"offset":11188},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":136,"column":156,"offset":11188},"end":{"line":136,"column":157,"offset":11189},"indent":[]}}],"position":{"start":{"line":136,"column":5,"offset":11037},"end":{"line":136,"column":157,"offset":11189},"indent":[]}}],"position":{"start":{"line":136,"column":3,"offset":11035},"end":{"line":136,"column":157,"offset":11189},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"There is an incorrect/invalid value set for this option. The value must be a PagerDuty user ID, which is the uppercase alphanumeric code at the end of a given user's profile URL.","position":{"start":{"line":137,"column":5,"offset":11194},"end":{"line":137,"column":183,"offset":11372},"indent":[]}}],"position":{"start":{"line":137,"column":5,"offset":11194},"end":{"line":137,"column":183,"offset":11372},"indent":[]}}],"position":{"start":{"line":137,"column":3,"offset":11192},"end":{"line":137,"column":183,"offset":11372},"indent":[]}}],"position":{"start":{"line":136,"column":3,"offset":11035},"end":{"line":137,"column":183,"offset":11372},"indent":[3]}}],"position":{"start":{"line":135,"column":1,"offset":10673},"end":{"line":137,"column":183,"offset":11372},"indent":[1,1]}}],"position":{"start":{"line":135,"column":1,"offset":10673},"end":{"line":137,"column":183,"offset":11372},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"I just upgraded and don't see the option to migrate webhooks. How do I run the migration?","position":{"start":{"line":139,"column":4,"offset":11377},"end":{"line":139,"column":93,"offset":11466},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":11374},"end":{"line":139,"column":93,"offset":11466},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can reenable the menu item to bring it back up and run the migration. To do this:","position":{"start":{"line":141,"column":1,"offset":11468},"end":{"line":141,"column":86,"offset":11553},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":11468},"end":{"line":141,"column":86,"offset":11553},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":143,"column":4,"offset":11558},"end":{"line":143,"column":10,"offset":11564},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"System Definition ","position":{"start":{"line":143,"column":12,"offset":11566},"end":{"line":143,"column":30,"offset":11584},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":143,"column":30,"offset":11584},"end":{"line":143,"column":36,"offset":11590},"indent":[]}},{"type":"text","value":" Application Menus","position":{"start":{"line":143,"column":36,"offset":11590},"end":{"line":143,"column":54,"offset":11608},"indent":[]}}],"position":{"start":{"line":143,"column":10,"offset":11564},"end":{"line":143,"column":56,"offset":11610},"indent":[]}},{"type":"text","value":" in ServiceNow.","position":{"start":{"line":143,"column":56,"offset":11610},"end":{"line":143,"column":71,"offset":11625},"indent":[]}}],"position":{"start":{"line":143,"column":4,"offset":11558},"end":{"line":143,"column":71,"offset":11625},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":11555},"end":{"line":143,"column":71,"offset":11625},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Search by Title for the PagerDuty menu and click its name to open and edit it when it comes up.","position":{"start":{"line":144,"column":4,"offset":11629},"end":{"line":144,"column":99,"offset":11724},"indent":[]}}],"position":{"start":{"line":144,"column":4,"offset":11629},"end":{"line":144,"column":99,"offset":11724},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":11626},"end":{"line":144,"column":99,"offset":11724},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Under the menu items, look for the \"MIGRATE WEBHOOKS\" one and check the box next to it.","position":{"start":{"line":145,"column":4,"offset":11728},"end":{"line":145,"column":91,"offset":11815},"indent":[]}}],"position":{"start":{"line":145,"column":4,"offset":11728},"end":{"line":145,"column":91,"offset":11815},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":11725},"end":{"line":145,"column":91,"offset":11815},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the ","position":{"start":{"line":146,"column":4,"offset":11819},"end":{"line":146,"column":11,"offset":11826},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Actions on selected rows","position":{"start":{"line":146,"column":13,"offset":11828},"end":{"line":146,"column":37,"offset":11852},"indent":[]}}],"position":{"start":{"line":146,"column":11,"offset":11826},"end":{"line":146,"column":39,"offset":11854},"indent":[]}},{"type":"text","value":" dropdown, select \"Change active state\".","position":{"start":{"line":146,"column":39,"offset":11854},"end":{"line":146,"column":79,"offset":11894},"indent":[]}}],"position":{"start":{"line":146,"column":4,"offset":11819},"end":{"line":146,"column":79,"offset":11894},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":11816},"end":{"line":146,"column":79,"offset":11894},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Refresh the page, go to the PagerDuty application in the system menu, and you should find the menu item.","position":{"start":{"line":147,"column":4,"offset":11898},"end":{"line":147,"column":108,"offset":12002},"indent":[]}}],"position":{"start":{"line":147,"column":4,"offset":11898},"end":{"line":147,"column":108,"offset":12002},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":11895},"end":{"line":147,"column":108,"offset":12002},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":11555},"end":{"line":147,"column":108,"offset":12002},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"My ServiceNow is firing off hundreds or thousands of emails or worknote updates on an incident?","position":{"start":{"line":149,"column":4,"offset":12007},"end":{"line":149,"column":99,"offset":12102},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":12004},"end":{"line":149,"column":100,"offset":12103},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"While feedback loops can result from custom business rules and/or automation in ServiceNow, it is also possible in the integration to make the mistake of creating a webhook-powered feedback loop between ServiceNow and PagerDuty. ","position":{"start":{"line":151,"column":1,"offset":12105},"end":{"line":151,"column":230,"offset":12334},"indent":[]}}],"position":{"start":{"line":151,"column":1,"offset":12105},"end":{"line":151,"column":230,"offset":12334},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This can happen if there are any business rules or other automated processes that alter the assignment group of the ServiceNow incident, and caution is not exercised when manually setting the integration fields. To give a high-level overview of an example of how this can possibly happen, let us assume the following configuration:","position":{"start":{"line":153,"column":1,"offset":12336},"end":{"line":153,"column":332,"offset":12667},"indent":[]}}],"position":{"start":{"line":153,"column":1,"offset":12336},"end":{"line":153,"column":332,"offset":12667},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"There is a business rule that automatically changes the assignment group to ","position":{"start":{"line":155,"column":3,"offset":12671},"end":{"line":155,"column":79,"offset":12747},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"B","position":{"start":{"line":155,"column":81,"offset":12749},"end":{"line":155,"column":82,"offset":12750},"indent":[]}}],"position":{"start":{"line":155,"column":79,"offset":12747},"end":{"line":155,"column":84,"offset":12752},"indent":[]}},{"type":"text","value":" if it is placed into assignment group ","position":{"start":{"line":155,"column":84,"offset":12752},"end":{"line":155,"column":123,"offset":12791},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"A","position":{"start":{"line":155,"column":125,"offset":12793},"end":{"line":155,"column":126,"offset":12794},"indent":[]}}],"position":{"start":{"line":155,"column":123,"offset":12791},"end":{"line":155,"column":128,"offset":12796},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":155,"column":128,"offset":12796},"end":{"line":155,"column":129,"offset":12797},"indent":[]}}],"position":{"start":{"line":155,"column":3,"offset":12671},"end":{"line":155,"column":129,"offset":12797},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":12669},"end":{"line":155,"column":129,"offset":12797},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Both assignment group ","position":{"start":{"line":156,"column":3,"offset":12800},"end":{"line":156,"column":25,"offset":12822},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"A","position":{"start":{"line":156,"column":27,"offset":12824},"end":{"line":156,"column":28,"offset":12825},"indent":[]}}],"position":{"start":{"line":156,"column":25,"offset":12822},"end":{"line":156,"column":30,"offset":12827},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":156,"column":30,"offset":12827},"end":{"line":156,"column":35,"offset":12832},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"B","position":{"start":{"line":156,"column":37,"offset":12834},"end":{"line":156,"column":38,"offset":12835},"indent":[]}}],"position":{"start":{"line":156,"column":35,"offset":12832},"end":{"line":156,"column":40,"offset":12837},"indent":[]}},{"type":"text","value":" are tied to PagerDuty escalation policy ","position":{"start":{"line":156,"column":40,"offset":12837},"end":{"line":156,"column":81,"offset":12878},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Z.","position":{"start":{"line":156,"column":83,"offset":12880},"end":{"line":156,"column":85,"offset":12882},"indent":[]}}],"position":{"start":{"line":156,"column":81,"offset":12878},"end":{"line":156,"column":87,"offset":12884},"indent":[]}}],"position":{"start":{"line":156,"column":3,"offset":12800},"end":{"line":156,"column":87,"offset":12884},"indent":[]}}],"position":{"start":{"line":156,"column":1,"offset":12798},"end":{"line":156,"column":87,"offset":12884},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":12669},"end":{"line":156,"column":87,"offset":12884},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"The feedback loop is as follows:","position":{"start":{"line":158,"column":1,"offset":12886},"end":{"line":158,"column":33,"offset":12918},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":12886},"end":{"line":158,"column":33,"offset":12918},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Incident changes assignment group to (or is created in) ","position":{"start":{"line":160,"column":4,"offset":12923},"end":{"line":160,"column":60,"offset":12979},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"B","position":{"start":{"line":160,"column":62,"offset":12981},"end":{"line":160,"column":63,"offset":12982},"indent":[]}}],"position":{"start":{"line":160,"column":60,"offset":12979},"end":{"line":160,"column":65,"offset":12984},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":160,"column":65,"offset":12984},"end":{"line":160,"column":66,"offset":12985},"indent":[]}}],"position":{"start":{"line":160,"column":4,"offset":12923},"end":{"line":160,"column":66,"offset":12985},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":12920},"end":{"line":160,"column":66,"offset":12985},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"PagerDuty incident triggered and assigned to ","position":{"start":{"line":161,"column":4,"offset":12989},"end":{"line":161,"column":49,"offset":13034},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Z","position":{"start":{"line":161,"column":51,"offset":13036},"end":{"line":161,"column":52,"offset":13037},"indent":[]}}],"position":{"start":{"line":161,"column":49,"offset":13034},"end":{"line":161,"column":54,"offset":13039},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":161,"column":54,"offset":13039},"end":{"line":161,"column":55,"offset":13040},"indent":[]}}],"position":{"start":{"line":161,"column":4,"offset":12989},"end":{"line":161,"column":55,"offset":13040},"indent":[]}}],"position":{"start":{"line":161,"column":1,"offset":12986},"end":{"line":161,"column":55,"offset":13040},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Webhook (escalation restarted; ","position":{"start":{"line":162,"column":4,"offset":13044},"end":{"line":162,"column":35,"offset":13075},"indent":[]}},{"type":"inlineCode","value":"incident.delegate","position":{"start":{"line":162,"column":35,"offset":13075},"end":{"line":162,"column":54,"offset":13094},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":162,"column":54,"offset":13094},"end":{"line":162,"column":58,"offset":13098},"indent":[]}},{"type":"inlineCode","value":"incident.trigger","position":{"start":{"line":162,"column":58,"offset":13098},"end":{"line":162,"column":76,"offset":13116},"indent":[]}},{"type":"text","value":" webhook).","position":{"start":{"line":162,"column":76,"offset":13116},"end":{"line":162,"column":86,"offset":13126},"indent":[]}}],"position":{"start":{"line":162,"column":4,"offset":13044},"end":{"line":162,"column":86,"offset":13126},"indent":[]}}],"position":{"start":{"line":162,"column":1,"offset":13041},"end":{"line":162,"column":86,"offset":13126},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Webhook import in ServiceNow assigns incident to ","position":{"start":{"line":163,"column":4,"offset":13130},"end":{"line":163,"column":53,"offset":13179},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"A","position":{"start":{"line":163,"column":55,"offset":13181},"end":{"line":163,"column":56,"offset":13182},"indent":[]}}],"position":{"start":{"line":163,"column":53,"offset":13179},"end":{"line":163,"column":58,"offset":13184},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":163,"column":58,"offset":13184},"end":{"line":163,"column":59,"offset":13185},"indent":[]}}],"position":{"start":{"line":163,"column":4,"offset":13130},"end":{"line":163,"column":59,"offset":13185},"indent":[]}}],"position":{"start":{"line":163,"column":1,"offset":13127},"end":{"line":163,"column":59,"offset":13185},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Automation changes assignment to ","position":{"start":{"line":164,"column":4,"offset":13189},"end":{"line":164,"column":37,"offset":13222},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"B","position":{"start":{"line":164,"column":39,"offset":13224},"end":{"line":164,"column":40,"offset":13225},"indent":[]}}],"position":{"start":{"line":164,"column":37,"offset":13222},"end":{"line":164,"column":42,"offset":13227},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":164,"column":42,"offset":13227},"end":{"line":164,"column":43,"offset":13228},"indent":[]}}],"position":{"start":{"line":164,"column":4,"offset":13189},"end":{"line":164,"column":43,"offset":13228},"indent":[]}}],"position":{"start":{"line":164,"column":1,"offset":13186},"end":{"line":164,"column":43,"offset":13228},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Loop repeats.","position":{"start":{"line":165,"column":4,"offset":13232},"end":{"line":165,"column":17,"offset":13245},"indent":[]}}],"position":{"start":{"line":165,"column":4,"offset":13232},"end":{"line":165,"column":17,"offset":13245},"indent":[]}}],"position":{"start":{"line":165,"column":1,"offset":13229},"end":{"line":165,"column":17,"offset":13245},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":12920},"end":{"line":165,"column":17,"offset":13245},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Duplicate Incidents","position":{"start":{"line":167,"column":4,"offset":13250},"end":{"line":167,"column":23,"offset":13269},"indent":[]}}],"position":{"start":{"line":167,"column":1,"offset":13247},"end":{"line":167,"column":23,"offset":13269},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"ServiceNow is creating duplicate incidents in PagerDuty","position":{"start":{"line":169,"column":5,"offset":13275},"end":{"line":169,"column":60,"offset":13330},"indent":[]}}],"position":{"start":{"line":169,"column":1,"offset":13271},"end":{"line":169,"column":60,"offset":13330},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is happening because something is circumventing the methods designed into the PagerDuty integration to avoid triggering duplicate incidents.\n","position":{"start":{"line":171,"column":1,"offset":13332},"end":{"line":172,"column":1,"offset":13478},"indent":[1]}},{"type":"linkReference","identifier":"block:callout","label":"block:callout","referenceType":"shortcut","children":[{"type":"text","value":"block:callout","position":{"start":{"line":172,"column":2,"offset":13479},"end":{"line":172,"column":15,"offset":13492},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":13478},"end":{"line":172,"column":16,"offset":13493},"indent":[]}},{"type":"text","value":"\n{\n  \"type\": \"info\",\n  \"title\": \"How it works\",\n  \"body\": \"The integration uses the ","position":{"start":{"line":172,"column":16,"offset":13493},"end":{"line":176,"column":37,"offset":13577},"indent":[1,1,1,1]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Incident","position":{"start":{"line":176,"column":39,"offset":13579},"end":{"line":176,"column":57,"offset":13597},"indent":[]}}],"position":{"start":{"line":176,"column":37,"offset":13577},"end":{"line":176,"column":59,"offset":13599},"indent":[]}},{"type":"text","value":" field in the ServiceNow incident as a sort of semaphore in order to prevent race conditions, by filling it with a placeholder value: ","position":{"start":{"line":176,"column":59,"offset":13599},"end":{"line":176,"column":193,"offset":13733},"indent":[]}},{"type":"inlineCode","value":"---waiting---","position":{"start":{"line":176,"column":193,"offset":13733},"end":{"line":176,"column":208,"offset":13748},"indent":[]}},{"type":"text","value":" before it is later filled with the PagerDuty incident ID once the incident in PagerDuty is created. \\n\\nThis placeholder value is filled in immediately when the business rule runs, and the business rule's conditions exclude the case where the field has a value that starts with ","position":{"start":{"line":176,"column":208,"offset":13748},"end":{"line":176,"column":487,"offset":14027},"indent":[]}},{"type":"inlineCode","value":"---","position":{"start":{"line":176,"column":487,"offset":14027},"end":{"line":176,"column":492,"offset":14032},"indent":[]}},{"type":"text","value":" in it. Thus, if two updates happen in succession, before the incident triggers in PagerDuty, the business rule still won't run twice.\\n\\nThe incident is updated again when the PagerDuty REST API is being called to trigger the incident. To prevent other updates from triggering the same business rule again, ","position":{"start":{"line":176,"column":492,"offset":14032},"end":{"line":176,"column":800,"offset":14340},"indent":[]}},{"type":"inlineCode","value":"current.update()","position":{"start":{"line":176,"column":800,"offset":14340},"end":{"line":176,"column":818,"offset":14358},"indent":[]}},{"type":"text","value":" is called to commit the incident with the placeholder value to the database.\"\n}\n","position":{"start":{"line":176,"column":818,"offset":14358},"end":{"line":178,"column":1,"offset":14439},"indent":[1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":178,"column":2,"offset":14440},"end":{"line":178,"column":8,"offset":14446},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":14439},"end":{"line":178,"column":9,"offset":14447},"indent":[]}},{"type":"text","value":"\nAssuming that there have been no customizations to the out-of-box PagerDuty integration, the most likely cause is an automation, i.e. separate business rule, that is triggering a secondary automatic update on the incident record after the initial one. The business rule ","position":{"start":{"line":178,"column":9,"offset":14447},"end":{"line":179,"column":271,"offset":14718},"indent":[1]}},{"type":"strong","children":[{"type":"text","value":"PD Trigger PagerDuty Incident","position":{"start":{"line":179,"column":273,"offset":14720},"end":{"line":179,"column":302,"offset":14749},"indent":[]}}],"position":{"start":{"line":179,"column":271,"offset":14718},"end":{"line":179,"column":304,"offset":14751},"indent":[]}},{"type":"text","value":" is set to run ","position":{"start":{"line":179,"column":304,"offset":14751},"end":{"line":179,"column":319,"offset":14766},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"after","position":{"start":{"line":179,"column":320,"offset":14767},"end":{"line":179,"column":325,"offset":14772},"indent":[]}}],"position":{"start":{"line":179,"column":319,"offset":14766},"end":{"line":179,"column":326,"offset":14773},"indent":[]}},{"type":"text","value":", with order = 100, meaning that it runs ","position":{"start":{"line":179,"column":326,"offset":14773},"end":{"line":179,"column":367,"offset":14814},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"after","position":{"start":{"line":179,"column":368,"offset":14815},"end":{"line":179,"column":373,"offset":14820},"indent":[]}}],"position":{"start":{"line":179,"column":367,"offset":14814},"end":{"line":179,"column":374,"offset":14821},"indent":[]}},{"type":"text","value":" the changes are committed to the database. So, any two updates that happen in rapid succession and asynchronously risk triggering the PagerDuty incident triggering business rule twice.","position":{"start":{"line":179,"column":374,"offset":14821},"end":{"line":179,"column":559,"offset":15006},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":13332},"end":{"line":179,"column":559,"offset":15006},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To resolve this, one will need to first find out how the secondary updates are taking place, as follows:","position":{"start":{"line":181,"column":1,"offset":15008},"end":{"line":181,"column":105,"offset":15112},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":15008},"end":{"line":181,"column":105,"offset":15112},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":183,"column":4,"offset":15117},"end":{"line":183,"column":10,"offset":15123},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"System Logs ","position":{"start":{"line":183,"column":12,"offset":15125},"end":{"line":183,"column":24,"offset":15137},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":183,"column":24,"offset":15137},"end":{"line":183,"column":30,"offset":15143},"indent":[]}},{"type":"text","value":" Events","position":{"start":{"line":183,"column":30,"offset":15143},"end":{"line":183,"column":37,"offset":15150},"indent":[]}}],"position":{"start":{"line":183,"column":10,"offset":15123},"end":{"line":183,"column":39,"offset":15152},"indent":[]}}],"position":{"start":{"line":183,"column":4,"offset":15117},"end":{"line":183,"column":39,"offset":15152},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":15114},"end":{"line":183,"column":39,"offset":15152},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Find events of name ","position":{"start":{"line":184,"column":4,"offset":15156},"end":{"line":184,"column":24,"offset":15176},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration.trigger_incident","position":{"start":{"line":184,"column":24,"offset":15176},"end":{"line":184,"column":59,"offset":15211},"indent":[]}},{"type":"text","value":" around the time of the duplicate triggering.","position":{"start":{"line":184,"column":59,"offset":15211},"end":{"line":184,"column":104,"offset":15256},"indent":[]}}],"position":{"start":{"line":184,"column":4,"offset":15156},"end":{"line":184,"column":104,"offset":15256},"indent":[]}}],"position":{"start":{"line":184,"column":1,"offset":15153},"end":{"line":184,"column":104,"offset":15256},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Observe the values of:","position":{"start":{"line":185,"column":4,"offset":15260},"end":{"line":185,"column":26,"offset":15282},"indent":[]}}],"position":{"start":{"line":185,"column":4,"offset":15260},"end":{"line":185,"column":26,"offset":15282},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"param1","position":{"start":{"line":186,"column":7,"offset":15289},"end":{"line":186,"column":15,"offset":15297},"indent":[]}},{"type":"text","value":", the last worknotes entry,","position":{"start":{"line":186,"column":15,"offset":15297},"end":{"line":186,"column":42,"offset":15324},"indent":[]}}],"position":{"start":{"line":186,"column":7,"offset":15289},"end":{"line":186,"column":42,"offset":15324},"indent":[]}}],"position":{"start":{"line":186,"column":5,"offset":15287},"end":{"line":186,"column":42,"offset":15324},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"param2","position":{"start":{"line":187,"column":7,"offset":15331},"end":{"line":187,"column":15,"offset":15339},"indent":[]}},{"type":"text","value":", a comma-delineated list of extra parameters: current user ","position":{"start":{"line":187,"column":15,"offset":15339},"end":{"line":187,"column":75,"offset":15399},"indent":[]}},{"type":"inlineCode","value":"sys_id","position":{"start":{"line":187,"column":75,"offset":15399},"end":{"line":187,"column":83,"offset":15407},"indent":[]}},{"type":"text","value":", the operation (insert or update), and a boolean for whether or not the value of the assignment group or configuration item changed.","position":{"start":{"line":187,"column":83,"offset":15407},"end":{"line":187,"column":216,"offset":15540},"indent":[]}}],"position":{"start":{"line":187,"column":7,"offset":15331},"end":{"line":187,"column":216,"offset":15540},"indent":[]}}],"position":{"start":{"line":187,"column":5,"offset":15329},"end":{"line":187,"column":216,"offset":15540},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"User ID","position":{"start":{"line":188,"column":7,"offset":15547},"end":{"line":188,"column":14,"offset":15554},"indent":[]}}],"position":{"start":{"line":188,"column":7,"offset":15547},"end":{"line":188,"column":14,"offset":15554},"indent":[]}}],"position":{"start":{"line":188,"column":5,"offset":15545},"end":{"line":188,"column":14,"offset":15554},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"User name","position":{"start":{"line":189,"column":7,"offset":15561},"end":{"line":189,"column":16,"offset":15570},"indent":[]}}],"position":{"start":{"line":189,"column":7,"offset":15561},"end":{"line":189,"column":16,"offset":15570},"indent":[]}}],"position":{"start":{"line":189,"column":5,"offset":15559},"end":{"line":189,"column":16,"offset":15570},"indent":[]}}],"position":{"start":{"line":186,"column":5,"offset":15287},"end":{"line":189,"column":16,"offset":15570},"indent":[5,5,5]}}],"position":{"start":{"line":185,"column":1,"offset":15257},"end":{"line":189,"column":16,"offset":15570},"indent":[1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Identify the event that was raised by the automated process based on how the event was submitted, vis-à-vis the available attributes.","position":{"start":{"line":190,"column":4,"offset":15574},"end":{"line":190,"column":137,"offset":15707},"indent":[]}}],"position":{"start":{"line":190,"column":4,"offset":15574},"end":{"line":190,"column":137,"offset":15707},"indent":[]}}],"position":{"start":{"line":190,"column":1,"offset":15571},"end":{"line":190,"column":137,"offset":15707},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Find some attribute of the automated update operation that can be used to distinguish it from others, i.e. made by a human.","position":{"start":{"line":191,"column":4,"offset":15711},"end":{"line":191,"column":127,"offset":15834},"indent":[]}}],"position":{"start":{"line":191,"column":4,"offset":15711},"end":{"line":191,"column":127,"offset":15834},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":15708},"end":{"line":191,"column":127,"offset":15834},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add conditions to the business rule ","position":{"start":{"line":192,"column":4,"offset":15838},"end":{"line":192,"column":40,"offset":15874},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PD Trigger PagerDuty Incident","position":{"start":{"line":192,"column":42,"offset":15876},"end":{"line":192,"column":71,"offset":15905},"indent":[]}}],"position":{"start":{"line":192,"column":40,"offset":15874},"end":{"line":192,"column":73,"offset":15907},"indent":[]}},{"type":"text","value":" that exclude updates which have the distinguishing characteristics of the automated updates.","position":{"start":{"line":192,"column":73,"offset":15907},"end":{"line":192,"column":166,"offset":16000},"indent":[]}}],"position":{"start":{"line":192,"column":4,"offset":15838},"end":{"line":192,"column":166,"offset":16000},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":15835},"end":{"line":192,"column":166,"offset":16000},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":15114},"end":{"line":192,"column":166,"offset":16000},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"PagerDuty is creating duplicate incidents in ServiceNow","position":{"start":{"line":194,"column":4,"offset":16005},"end":{"line":194,"column":59,"offset":16060},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":16002},"end":{"line":194,"column":59,"offset":16060},"indent":[]}},{"type":"paragraph","children":[{"type":"linkReference","identifier":"block:callout","label":"block:callout","referenceType":"shortcut","children":[{"type":"text","value":"block:callout","position":{"start":{"line":195,"column":2,"offset":16062},"end":{"line":195,"column":15,"offset":16075},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":16061},"end":{"line":195,"column":16,"offset":16076},"indent":[]}},{"type":"text","value":"\n{\n  \"type\": \"info\",\n  \"title\": \"How it works\",\n  \"body\": \"The PagerDuty App receives webhooks and saves them in an import table, and uses an import transform map to translate them to updates to existing incidents or insertion of new incidents. It uses the ","position":{"start":{"line":195,"column":16,"offset":16076},"end":{"line":199,"column":210,"offset":16333},"indent":[1,1,1,1]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Incident","position":{"start":{"line":199,"column":212,"offset":16335},"end":{"line":199,"column":230,"offset":16353},"indent":[]}}],"position":{"start":{"line":199,"column":210,"offset":16333},"end":{"line":199,"column":232,"offset":16355},"indent":[]}},{"type":"text","value":" field in the ServiceNow incident to identify existing incidents\"\n}\n","position":{"start":{"line":199,"column":232,"offset":16355},"end":{"line":201,"column":1,"offset":16423},"indent":[1,1]}},{"type":"linkReference","identifier":"/block","label":"/block","referenceType":"shortcut","children":[{"type":"text","value":"/block","position":{"start":{"line":201,"column":2,"offset":16424},"end":{"line":201,"column":8,"offset":16430},"indent":[]}}],"position":{"start":{"line":201,"column":1,"offset":16423},"end":{"line":201,"column":9,"offset":16431},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":16061},"end":{"line":201,"column":9,"offset":16431},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Verify that coalescing on incident ID is enabled in the import transform map","position":{"start":{"line":202,"column":5,"offset":16436},"end":{"line":202,"column":81,"offset":16512},"indent":[]}}],"position":{"start":{"line":202,"column":1,"offset":16432},"end":{"line":202,"column":81,"offset":16512},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Go to ","position":{"start":{"line":204,"column":4,"offset":16517},"end":{"line":204,"column":10,"offset":16523},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty ","position":{"start":{"line":204,"column":12,"offset":16525},"end":{"line":204,"column":22,"offset":16535},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":204,"column":22,"offset":16535},"end":{"line":204,"column":28,"offset":16541},"indent":[]}},{"type":"text","value":" Imports ","position":{"start":{"line":204,"column":28,"offset":16541},"end":{"line":204,"column":37,"offset":16550},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":204,"column":37,"offset":16550},"end":{"line":204,"column":43,"offset":16556},"indent":[]}},{"type":"text","value":" Webhook Import Service","position":{"start":{"line":204,"column":43,"offset":16556},"end":{"line":204,"column":66,"offset":16579},"indent":[]}}],"position":{"start":{"line":204,"column":10,"offset":16523},"end":{"line":204,"column":68,"offset":16581},"indent":[]}}],"position":{"start":{"line":204,"column":4,"offset":16517},"end":{"line":204,"column":68,"offset":16581},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":16514},"end":{"line":204,"column":68,"offset":16581},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Scroll to the bottom of the page and follow the link to the ","position":{"start":{"line":205,"column":4,"offset":16585},"end":{"line":205,"column":64,"offset":16645},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"PagerDuty Webhook Import","position":{"start":{"line":205,"column":66,"offset":16647},"end":{"line":205,"column":90,"offset":16671},"indent":[]}}],"position":{"start":{"line":205,"column":64,"offset":16645},"end":{"line":205,"column":92,"offset":16673},"indent":[]}},{"type":"text","value":" under ","position":{"start":{"line":205,"column":92,"offset":16673},"end":{"line":205,"column":99,"offset":16680},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Web Service Transform Maps","position":{"start":{"line":205,"column":101,"offset":16682},"end":{"line":205,"column":127,"offset":16708},"indent":[]}}],"position":{"start":{"line":205,"column":99,"offset":16680},"end":{"line":205,"column":129,"offset":16710},"indent":[]}}],"position":{"start":{"line":205,"column":4,"offset":16585},"end":{"line":205,"column":129,"offset":16710},"indent":[]}}],"position":{"start":{"line":205,"column":1,"offset":16582},"end":{"line":205,"column":129,"offset":16710},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Scroll to the bottom of the page to find the ","position":{"start":{"line":206,"column":4,"offset":16714},"end":{"line":206,"column":49,"offset":16759},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Field Maps","position":{"start":{"line":206,"column":51,"offset":16761},"end":{"line":206,"column":61,"offset":16771},"indent":[]}}],"position":{"start":{"line":206,"column":49,"offset":16759},"end":{"line":206,"column":63,"offset":16773},"indent":[]}},{"type":"text","value":" section.","position":{"start":{"line":206,"column":63,"offset":16773},"end":{"line":206,"column":72,"offset":16782},"indent":[]}}],"position":{"start":{"line":206,"column":4,"offset":16714},"end":{"line":206,"column":72,"offset":16782},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":16711},"end":{"line":206,"column":72,"offset":16782},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"In the mapping for the field ","position":{"start":{"line":207,"column":4,"offset":16786},"end":{"line":207,"column":33,"offset":16815},"indent":[]}},{"type":"inlineCode","value":"id","position":{"start":{"line":207,"column":33,"offset":16815},"end":{"line":207,"column":37,"offset":16819},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":207,"column":37,"offset":16819},"end":{"line":207,"column":38,"offset":16820},"indent":[]}},{"type":"text","value":"→","position":{"start":{"line":207,"column":38,"offset":16820},"end":{"line":207,"column":44,"offset":16826},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":207,"column":44,"offset":16826},"end":{"line":207,"column":45,"offset":16827},"indent":[]}},{"type":"inlineCode","value":"x_pd_integration_incident","position":{"start":{"line":207,"column":45,"offset":16827},"end":{"line":207,"column":72,"offset":16854},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":207,"column":72,"offset":16854},"end":{"line":207,"column":73,"offset":16855},"indent":[]}}],"position":{"start":{"line":207,"column":4,"offset":16786},"end":{"line":207,"column":73,"offset":16855},"indent":[]}}],"position":{"start":{"line":207,"column":1,"offset":16783},"end":{"line":207,"column":73,"offset":16855},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":16514},"end":{"line":207,"column":73,"offset":16855},"indent":[1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Ensure that ","position":{"start":{"line":208,"column":5,"offset":16860},"end":{"line":208,"column":17,"offset":16872},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Coalesce","position":{"start":{"line":208,"column":19,"offset":16874},"end":{"line":208,"column":27,"offset":16882},"indent":[]}}],"position":{"start":{"line":208,"column":17,"offset":16872},"end":{"line":208,"column":29,"offset":16884},"indent":[]}},{"type":"text","value":" is ","position":{"start":{"line":208,"column":29,"offset":16884},"end":{"line":208,"column":33,"offset":16888},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"true","position":{"start":{"line":208,"column":35,"offset":16890},"end":{"line":208,"column":39,"offset":16894},"indent":[]}}],"position":{"start":{"line":208,"column":33,"offset":16888},"end":{"line":208,"column":41,"offset":16896},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":208,"column":41,"offset":16896},"end":{"line":208,"column":42,"offset":16897},"indent":[]}}],"position":{"start":{"line":208,"column":5,"offset":16860},"end":{"line":208,"column":42,"offset":16897},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":16856},"end":{"line":208,"column":42,"offset":16897},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If it is false, set it to true.","position":{"start":{"line":209,"column":5,"offset":16902},"end":{"line":209,"column":36,"offset":16933},"indent":[]}}],"position":{"start":{"line":209,"column":5,"offset":16902},"end":{"line":209,"column":36,"offset":16933},"indent":[]}}],"position":{"start":{"line":209,"column":1,"offset":16898},"end":{"line":209,"column":36,"offset":16933},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":16856},"end":{"line":209,"column":36,"offset":16933},"indent":[1]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"ServiceNow Troubleshooting Guide\",\"slug\":\"servicenow-troubleshooting-guide\",\"excerpt\":\"Identifying and resolving common issues with the ServiceNow integration.\",\"hidden\":false,\"createdAt\":\"2017-09-22T20:27:15.584Z\",\"updatedAt\":\"2019-09-05T17:24:51.470Z\"}","position":{"start":{"line":211,"column":1,"offset":16935},"end":{"line":211,"column":293,"offset":17227},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":211,"column":293,"offset":17227}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ServiceNow Troubleshooting Guide\",\n  \"slug\": \"servicenow-troubleshooting-guide\",\n  \"excerpt\": \"Identifying and resolving common issues with the ServiceNow integration.\",\n  \"hidden\": false,\n  \"createdAt\": \"2017-09-22T20:27:15.584Z\",\n  \"updatedAt\": \"2019-09-05T17:24:51.470Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Common Issues and Resolution\\\"\\n}\\n\", \"[/block]\"), mdx(\"h2\", {\n    \"id\": \"i-cannot-find-the-pagerduty-app-in-the-system-menu\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#i-cannot-find-the-pagerduty-app-in-the-system-menu\",\n    \"aria-label\": \"i cannot find the pagerduty app in the system menu permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"I cannot find the PagerDuty app in the system menu\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Make sure the PagerDuty app has been added to your current instance from the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://store.servicenow.com\"\n  }), \"ServiceNow store\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you just installed the app, try a hard refresh in your browser, or log out and back in again, as the left menu may just not have been reloaded after the install process. This is the most common issue.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install the app to your current instance by going to System Applications, selecting Applications, and clicking the Downloads tab.\")), mdx(\"h3\", {\n    \"id\": \"i-did-all-the-above-but-i-still-cant-see-the-app-what-now\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#i-did-all-the-above-but-i-still-cant-see-the-app-what-now\",\n    \"aria-label\": \"i did all the above but i still cant see the app what now permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"I did all the above, but I still can't see the app. What now?\"), mdx(\"p\", null, \"Check to see if you have any plugins that could prevent the installation from succeeding. We've seen one instance where a customer had a plugin installed that tried to encrypt each attachment within ServiceNow, which lead to the install process of the PagerDuty app looking like it succeeded but in reality it failed, so they couldn't find PagerDuty in the left-hand navigation menu.\"), mdx(\"h2\", {\n    \"id\": \"servicenow-incidents-do-not-trigger-pagerduty-incidents-or-updates-to-the-incident-in-servicenow-dont-translate-to-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#servicenow-incidents-do-not-trigger-pagerduty-incidents-or-updates-to-the-incident-in-servicenow-dont-translate-to-pagerduty\",\n    \"aria-label\": \"servicenow incidents do not trigger pagerduty incidents or updates to the incident in servicenow dont translate to pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"ServiceNow incidents do not trigger PagerDuty incidents, or updates to the incident in ServiceNow don't translate to PagerDuty\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check that the REST API connection by going to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Test REST API Connection\"), \". Check that the conditions for triggering are met.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Check your main ServiceNow app settings, under \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty \", \"\\u2192\", \" Configuration \", \"\\u2192\", \" PagerDuty Settings\"), \". Is auto-provisioning disabled? If so, then check to see what the value is in the field \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Default PagerDuty User ID to use if auto-provisioning is disabled\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"See \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"doc:servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-\"\n  }), \"\\u201CWhen is an incident sent to PagerDuty?\\u201D\"), \", in our ServiceNow integration FAQ page.\\n\", \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"warning\\\",\\n\\\"body\\\": \\\"The \\\\\\\"Default PagerDuty User ID\\\\\\\" configuration property in the ServiceNow app needs to be a PagerDuty ID, rather than an email address or ServiceNow user ID. PagerDuty IDs are upper case alphanumeric strings that begin with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"P\"), \" (see: \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"/v1/docs/servicenow-faq#section-where-do-the-special-pagerduty-field-values-come-from-\"\n  }), \"Where do the special PagerDuty field values come from?\"), \"). \\\\n\\\\nThere should be only one user that has the given PagerDuty user ID in your ServiceNow instance, and the email address of that user should match the user with that ID in PagerDuty. Otherwise, some of the API calls that the integration needs to make may not succeed.\\\\n\\\\nThis value is used when making the REST API requests to create incidents in PagerDuty, if auto-provisioning is disabled. Thus, if it is set improperly, the requests may not succeed.\\\",\\n\\\"title\\\": \\\"Default PagerDuty User ID\\\"\\n}\\n\", \"[/block]\")), mdx(\"h2\", {\n    \"id\": \"incidents-in-servicenow-are-not-updated-or-created-from-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#incidents-in-servicenow-are-not-updated-or-created-from-pagerduty\",\n    \"aria-label\": \"incidents in servicenow are not updated or created from pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Incidents in ServiceNow are not updated or created from PagerDuty\"), mdx(\"p\", null, \"Most synchronization of data and events from PagerDuty to ServiceNow happens through webhooks sent from PagerDuty to ServiceNow. For this reason, if you notice incidents are not updating or getting created from PagerDuty, the webhook import process is what will need to be examined.\"), mdx(\"h3\", {\n    \"id\": \"check-webhook-authentication-and-permissions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-webhook-authentication-and-permissions\",\n    \"aria-label\": \"check webhook authentication and permissions permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check webhook authentication and permissions\"), mdx(\"p\", null, \"To test all settings, go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Configuration\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Test ServiceNow User Authentication.\"), \" You should see the message:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"x_pd_integration (PagerDutyTest): ServiceNow user authentication test successful (200)\\n\")), mdx(\"p\", null, \"If you see the following instead:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"x_pd_integration (PagerDutyTest): ServiceNow user authentication test failed (403)\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Ensure that the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ServiceNow user for authentication\"), \" and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"ServiceNow password for authentication\"), \" configured in \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Settings\"), \" are valid credentials for a ServiceNow web service access user\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Ensure that the password is consistent between the user and the setting in the PagerDuty Configuration properties.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Ensure that the user for webhook authentication has the following roles:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"itil\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rest_service\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.admin\"))))), mdx(\"p\", null, \"If the password or username have changed in ServiceNow, you must also update the credentials in the ServiceNow extensions on your PagerDuty services. Alternately, in all versions 3.5 and later, you can delete the extensions, set the value of the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook\"), \" field to blank in your provisioned assignment groups and configuration items, and then re-provision them.\"), mdx(\"h3\", {\n    \"id\": \"check-extensions-on-pagerduty-services\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-extensions-on-pagerduty-services\",\n    \"aria-label\": \"check extensions on pagerduty services permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check extensions on PagerDuty services\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Check that the URL in the extensions is correct. The host it points to should be the same subdomain of ServiceNow as the one that you have integrated with PagerDuty.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"If you have provisioned your services and webhooks in PagerDuty from a development or staging instance of ServiceNow, you will need to update your extension URLs to reflect your production instance of ServiceNow, or the bidirectional integration will not work, because webhooks would in this case be sent to the development/staging instance of ServiceNow.\"))), mdx(\"h3\", {\n    \"id\": \"check-for-assignment-groups-matching-the-escalation-policy\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-for-assignment-groups-matching-the-escalation-policy\",\n    \"aria-label\": \"check for assignment groups matching the escalation policy permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check for assignment groups matching the escalation policy\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Make sure the escalation policy is assigned the incident in PagerDuty, whose corresponding incident in ServiceNow wasn\\u2019t updated (or for which no ServiceNow incident was created), has a corresponding assignment group in ServiceNow\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Because the escalation policy is assigned the incident, ensure there is an assignment group that has its \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Escalation\"), \" field set to the escalation policy\\u2019s ID.\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"You may need to add the two PagerDuty fields to the group form or list view to view their values.\"))), mdx(\"h3\", {\n    \"id\": \"check-webhook-import-records\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-webhook-import-records\",\n    \"aria-label\": \"check webhook import records permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check webhook import records\"), mdx(\"p\", null, \"Check to see if the webhook messages have been saved in ServiceNow. In ServiceNow, go to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Imports\"), \" \", \"\\u2192\", \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Webhook Import Rows\"), \" and look for records with creation time that coincides with the time that the incident in PagerDuty was triggered, acknowledged or resolved.\"), mdx(\"h3\", {\n    \"id\": \"check-for-required-fields\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-for-required-fields\",\n    \"aria-label\": \"check for required fields permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check for required fields\"), mdx(\"p\", null, \"If you can see that webhooks are getting through from PagerDuty to ServiceNow, but are not creating/updating an incident, try manually closing an incident in ServiceNow. If manually closing an incident requires you to enter values for certain fields, your required fields have likely been customized. Create \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/docs/advanced-servicenow-configuration#section-inbound-field-rules\"\n  }), \"inbound field rules\"), \" so that the required fields have a default value. \"), mdx(\"h3\", {\n    \"id\": \"check-for-interfering-state-field-values\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-for-interfering-state-field-values\",\n    \"aria-label\": \"check for interfering state field values permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check for interfering state field values\"), mdx(\"p\", null, \"Check to see if you have any custom choices set up for the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"State\"), \" field in the ServiceNow incidents model:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Right click on the label of the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"State\"), \" field (i.e. that would say \\\"New\\\" or \\\"Resolved\\\"), \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configure Dictionary\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Switch to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Advanced view\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Choices\"), \" tab and look for entries with higher numbers in the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Value\"), \" field.\")), mdx(\"p\", null, \"The integration follows the same convention as the out-of-box state values of ServiceNow. Higher numbers imply a more advanced state (i.e. a 6 or higher would be done/resolved or some variant thereof). If the state of the incident that did not automatically resolve is of a higher numeric value, but the incident did not resolve, it is because it was treated as already resolved.\"), mdx(\"p\", null, \"To correct this, you will need to modify the custom choice values that you have configured for the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"State\"), \" field to be lower than 6, so that they are treated as an unresolved state (if they reflect that).\"), mdx(\"h3\", {\n    \"id\": \"check-for-interfering-data-policies\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#check-for-interfering-data-policies\",\n    \"aria-label\": \"check for interfering data policies permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Check For Interfering Data Policies\"), mdx(\"p\", null, \"Data policies, which allow the ServiceNow administrator to create validation rules on tables, can stop the webhook import process from actually committing the changes from PagerDuty to the ServiceNow incident record, and thus block functionality of the integration such as automatic resolution of incidents.\"), mdx(\"p\", null, \"When a data policy does this, there will not be any clear indication of it in the application-scoped logs. Rather, in the system logs, there will be an error-level log entry created at the time of the webhook import, with a message beginning with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Data Policy Exception\"), \".\"), mdx(\"p\", null, \"Fortunately, as of version 4 of the integration, inbound field rules give you the ability to automatically fill fields in the incident, and this can be used to fill fields as desired in order satisfy data policies.\"), mdx(\"p\", null, \"To address this:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"System Policy \", \"\\u2192\", \" Data Policies\"), \", and in the list view\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create a new filter on the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Table\"), \" field: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"=incident\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Make note of all the fields, and the constraints\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty \", \"\\u2192\", \" Configuration \", \"\\u2192\", \" Inbound Field Rules\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"For each incident field that was part of the conditions in the data policy:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Create a new inbound field rule\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Set the webhook type to \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Acknowledge\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Resolve\"), \" based on which of these events the ServiceNow incidents aren't being updated for\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Fill the field with a default value, or dynamically based on the webhook payload.\")), mdx(\"p\", null, \"Main article: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"doc:advanced-servicenow-configuration#section-inbound-field-rules\"\n  }), \"Advanced ServiceNow Configuration: Inbound Field Rules\"), \" \"), mdx(\"h2\", {\n    \"id\": \"an-inbound-field-rule-is-not-filling-its-target-field-with-the-desired-value\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#an-inbound-field-rule-is-not-filling-its-target-field-with-the-desired-value\",\n    \"aria-label\": \"an inbound field rule is not filling its target field with the desired value permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"An inbound field rule is not filling its target field with the desired value\"), mdx(\"p\", null, \"The most common causes include:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A business rule or some other process is overwriting the changes to the field after it is initially set by the field rule.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The inbound field rule only applies to a specific webhook event type (i.e. Trigger/Resolve), and the change didn't occur at the specified time because that's not when the relevant webhook type came through.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The inbound field rule is disabled\")), mdx(\"p\", null, \"To troubleshoot:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty \", \"\\u2192\", \" Configuration \", \"\\u2192\", \" Inbound Field Rules\"), \" and verify:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"That \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Enabled\"), \" is \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"true\"), \" for the inbound field rule in question\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty webhook type\"), \" is the expected type\")), mdx(\"ol\", {\n    \"start\": 2\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"System Definition \", \"\\u2192\", \" Business Rules\"), \" and look for all rules that modify the field, as follows:\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable the field \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Set field values\"), \" in the list view\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Search filter for table: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"=incident\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Filter out all rows with blank values for \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Set field values\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If there is more than one page of results, search for all records such that \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Set fields values\"), \" contains the column name, i.e. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"*business_service\"), \". If you find any that modify this field, that may explain why the field is not getting set according to the inbound field rule: it is being overwritten by the business rule.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If nothing turns up, look at all business rules that include running a script, to see if any of the scripts include setting the value of the field in question.\")), mdx(\"h2\", {\n    \"id\": \"some-user-actions-are-not-updated-in-servicenow-from-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#some-user-actions-are-not-updated-in-servicenow-from-pagerduty\",\n    \"aria-label\": \"some user actions are not updated in servicenow from pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Some user actions are not updated in ServiceNow from PagerDuty.\"), mdx(\"p\", null, \"Check the user's email address in ServiceNow to make sure it matches the user's email address in PagerDuty, and that the user is provisioned.\"), mdx(\"h2\", {\n    \"id\": \"incident-notes-are-not-syncing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#incident-notes-are-not-syncing\",\n    \"aria-label\": \"incident notes are not syncing permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Incident notes are not syncing\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The user posting the note might not be \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"doc:servicenow#section-provisioning-linking-objects-between-systems\"\n  }), \"provisioned in PagerDuty\"), \", i.e. does not have a PagerDuty user ID assigned, and automatic provisioning (the option \\\"Automatically create a PagerDuty user if one is not found matching the user's email\\\") is disabled, and one of the following applies:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There is no value set for the option \\\"Default PagerDuty User ID to use if auto-provisioning is disabled\\\" in \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration \", \"\\u2192\", \" PagerDuty Settings\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There is an incorrect/invalid value set for this option. The value must be a PagerDuty user ID, which is the uppercase alphanumeric code at the end of a given user's profile URL.\")))), mdx(\"h2\", {\n    \"id\": \"i-just-upgraded-and-dont-see-the-option-to-migrate-webhooks-how-do-i-run-the-migration\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#i-just-upgraded-and-dont-see-the-option-to-migrate-webhooks-how-do-i-run-the-migration\",\n    \"aria-label\": \"i just upgraded and dont see the option to migrate webhooks how do i run the migration permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"I just upgraded and don't see the option to migrate webhooks. How do I run the migration?\"), mdx(\"p\", null, \"You can reenable the menu item to bring it back up and run the migration. To do this:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"System Definition \", \"\\u2192\", \" Application Menus\"), \" in ServiceNow.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Search by Title for the PagerDuty menu and click its name to open and edit it when it comes up.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Under the menu items, look for the \\\"MIGRATE WEBHOOKS\\\" one and check the box next to it.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Actions on selected rows\"), \" dropdown, select \\\"Change active state\\\".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Refresh the page, go to the PagerDuty application in the system menu, and you should find the menu item.\")), mdx(\"h2\", {\n    \"id\": \"my-servicenow-is-firing-off-hundreds-or-thousands-of-emails-or-worknote-updates-on-an-incident\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#my-servicenow-is-firing-off-hundreds-or-thousands-of-emails-or-worknote-updates-on-an-incident\",\n    \"aria-label\": \"my servicenow is firing off hundreds or thousands of emails or worknote updates on an incident permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"My ServiceNow is firing off hundreds or thousands of emails or worknote updates on an incident?\"), mdx(\"p\", null, \"While feedback loops can result from custom business rules and/or automation in ServiceNow, it is also possible in the integration to make the mistake of creating a webhook-powered feedback loop between ServiceNow and PagerDuty. \"), mdx(\"p\", null, \"This can happen if there are any business rules or other automated processes that alter the assignment group of the ServiceNow incident, and caution is not exercised when manually setting the integration fields. To give a high-level overview of an example of how this can possibly happen, let us assume the following configuration:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There is a business rule that automatically changes the assignment group to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" if it is placed into assignment group \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Both assignment group \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \" and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" are tied to PagerDuty escalation policy \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Z.\"))), mdx(\"p\", null, \"The feedback loop is as follows:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Incident changes assignment group to (or is created in) \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"PagerDuty incident triggered and assigned to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Z\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Webhook (escalation restarted; \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"incident.delegate\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"incident.trigger\"), \" webhook).\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Webhook import in ServiceNow assigns incident to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Automation changes assignment to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Loop repeats.\")), mdx(\"h2\", {\n    \"id\": \"duplicate-incidents\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#duplicate-incidents\",\n    \"aria-label\": \"duplicate incidents permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Duplicate Incidents\"), mdx(\"h3\", {\n    \"id\": \"servicenow-is-creating-duplicate-incidents-in-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#servicenow-is-creating-duplicate-incidents-in-pagerduty\",\n    \"aria-label\": \"servicenow is creating duplicate incidents in pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"ServiceNow is creating duplicate incidents in PagerDuty\"), mdx(\"p\", null, \"This is happening because something is circumventing the methods designed into the PagerDuty integration to avoid triggering duplicate incidents.\\n\", \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"info\\\",\\n\\\"title\\\": \\\"How it works\\\",\\n\\\"body\\\": \\\"The integration uses the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Incident\"), \" field in the ServiceNow incident as a sort of semaphore in order to prevent race conditions, by filling it with a placeholder value: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"---waiting---\"), \" before it is later filled with the PagerDuty incident ID once the incident in PagerDuty is created. \\\\n\\\\nThis placeholder value is filled in immediately when the business rule runs, and the business rule's conditions exclude the case where the field has a value that starts with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"---\"), \" in it. Thus, if two updates happen in succession, before the incident triggers in PagerDuty, the business rule still won't run twice.\\\\n\\\\nThe incident is updated again when the PagerDuty REST API is being called to trigger the incident. To prevent other updates from triggering the same business rule again, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"current.update()\"), \" is called to commit the incident with the placeholder value to the database.\\\"\\n}\\n\", \"[/block]\", \"\\nAssuming that there have been no customizations to the out-of-box PagerDuty integration, the most likely cause is an automation, i.e. separate business rule, that is triggering a secondary automatic update on the incident record after the initial one. The business rule \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PD Trigger PagerDuty Incident\"), \" is set to run \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"after\"), \", with order = 100, meaning that it runs \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"after\"), \" the changes are committed to the database. So, any two updates that happen in rapid succession and asynchronously risk triggering the PagerDuty incident triggering business rule twice.\"), mdx(\"p\", null, \"To resolve this, one will need to first find out how the secondary updates are taking place, as follows:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"System Logs \", \"\\u2192\", \" Events\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Find events of name \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.trigger_incident\"), \" around the time of the duplicate triggering.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Observe the values of:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"param1\"), \", the last worknotes entry,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"param2\"), \", a comma-delineated list of extra parameters: current user \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sys_id\"), \", the operation (insert or update), and a boolean for whether or not the value of the assignment group or configuration item changed.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User ID\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User name\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Identify the event that was raised by the automated process based on how the event was submitted, vis-\\xE0-vis the available attributes.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Find some attribute of the automated update operation that can be used to distinguish it from others, i.e. made by a human.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Add conditions to the business rule \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Trigger PagerDuty Incident\"), \" that exclude updates which have the distinguishing characteristics of the automated updates.\")), mdx(\"h2\", {\n    \"id\": \"pagerduty-is-creating-duplicate-incidents-in-servicenow\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#pagerduty-is-creating-duplicate-incidents-in-servicenow\",\n    \"aria-label\": \"pagerduty is creating duplicate incidents in servicenow permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"PagerDuty is creating duplicate incidents in ServiceNow\"), mdx(\"p\", null, \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"info\\\",\\n\\\"title\\\": \\\"How it works\\\",\\n\\\"body\\\": \\\"The PagerDuty App receives webhooks and saves them in an import table, and uses an import transform map to translate them to updates to existing incidents or insertion of new incidents. It uses the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Incident\"), \" field in the ServiceNow incident to identify existing incidents\\\"\\n}\\n\", \"[/block]\"), mdx(\"h3\", {\n    \"id\": \"verify-that-coalescing-on-incident-id-is-enabled-in-the-import-transform-map\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#verify-that-coalescing-on-incident-id-is-enabled-in-the-import-transform-map\",\n    \"aria-label\": \"verify that coalescing on incident id is enabled in the import transform map permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Verify that coalescing on incident ID is enabled in the import transform map\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Go to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty \", \"\\u2192\", \" Imports \", \"\\u2192\", \" Webhook Import Service\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Scroll to the bottom of the page and follow the link to the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Webhook Import\"), \" under \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Web Service Transform Maps\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Scroll to the bottom of the page to find the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Field Maps\"), \" section.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In the mapping for the field \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"id\"), \" \", \"\\u2192\", \" \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_incident\"), \":\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ensure that \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Coalesce\"), \" is \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"true\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If it is false, set it to true.\")));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"ServiceNow Troubleshooting Guide\",\n  \"slug\": \"servicenow-troubleshooting-guide\",\n  \"excerpt\": \"Identifying and resolving common issues with the ServiceNow integration.\",\n  \"hidden\": false,\n  \"createdAt\": \"2017-09-22T20:27:15.584Z\",\n  \"updatedAt\": \"2019-09-05T17:24:51.470Z\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`[block:api-header]`}{`\n{\n\"title\": \"Common Issues and Resolution\"\n}\n`}{`[/block]`}</p>\n    <h2 {...{\n      \"id\": \"i-cannot-find-the-pagerduty-app-in-the-system-menu\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#i-cannot-find-the-pagerduty-app-in-the-system-menu\",\n        \"aria-label\": \"i cannot find the pagerduty app in the system menu permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`I cannot find the PagerDuty app in the system menu`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`Make sure the PagerDuty app has been added to your current instance from the `}<a parentName=\"li\" {...{\n          \"href\": \"https://store.servicenow.com\"\n        }}>{`ServiceNow store`}</a>{`.`}</li>\n      <li parentName=\"ul\">{`If you just installed the app, try a hard refresh in your browser, or log out and back in again, as the left menu may just not have been reloaded after the install process. This is the most common issue.`}</li>\n      <li parentName=\"ul\">{`Install the app to your current instance by going to System Applications, selecting Applications, and clicking the Downloads tab.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"i-did-all-the-above-but-i-still-cant-see-the-app-what-now\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#i-did-all-the-above-but-i-still-cant-see-the-app-what-now\",\n        \"aria-label\": \"i did all the above but i still cant see the app what now permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`I did all the above, but I still can't see the app. What now?`}</h3>\n    <p>{`Check to see if you have any plugins that could prevent the installation from succeeding. We've seen one instance where a customer had a plugin installed that tried to encrypt each attachment within ServiceNow, which lead to the install process of the PagerDuty app looking like it succeeded but in reality it failed, so they couldn't find PagerDuty in the left-hand navigation menu.`}</p>\n    <h2 {...{\n      \"id\": \"servicenow-incidents-do-not-trigger-pagerduty-incidents-or-updates-to-the-incident-in-servicenow-dont-translate-to-pagerduty\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#servicenow-incidents-do-not-trigger-pagerduty-incidents-or-updates-to-the-incident-in-servicenow-dont-translate-to-pagerduty\",\n        \"aria-label\": \"servicenow incidents do not trigger pagerduty incidents or updates to the incident in servicenow dont translate to pagerduty permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`ServiceNow incidents do not trigger PagerDuty incidents, or updates to the incident in ServiceNow don't translate to PagerDuty`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`Check that the REST API connection by going to `}<strong parentName=\"li\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"li\">{`Configuration`}</strong>{` `}{`→`}{` `}<strong parentName=\"li\">{`Test REST API Connection`}</strong>{`. Check that the conditions for triggering are met.`}</li>\n      <li parentName=\"ol\">{`Check your main ServiceNow app settings, under `}<strong parentName=\"li\">{`PagerDuty `}{`→`}{` Configuration `}{`→`}{` PagerDuty Settings`}</strong>{`. Is auto-provisioning disabled? If so, then check to see what the value is in the field `}<strong parentName=\"li\">{`Default PagerDuty User ID to use if auto-provisioning is disabled`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`See `}<a parentName=\"li\" {...{\n          \"href\": \"doc:servicenow-faq#section-when-is-an-incident-sent-to-pagerduty-\"\n        }}>{`“When is an incident sent to PagerDuty?”`}</a>{`, in our ServiceNow integration FAQ page.\n`}{`[block:callout]`}{`\n{\n\"type\": \"warning\",\n\"body\": \"The \\\\\"Default PagerDuty User ID\\\\\" configuration property in the ServiceNow app needs to be a PagerDuty ID, rather than an email address or ServiceNow user ID. PagerDuty IDs are upper case alphanumeric strings that begin with `}<inlineCode parentName=\"li\">{`P`}</inlineCode>{` (see: `}<a parentName=\"li\" {...{\n          \"href\": \"/v1/docs/servicenow-faq#section-where-do-the-special-pagerduty-field-values-come-from-\"\n        }}>{`Where do the special PagerDuty field values come from?`}</a>{`). \\\\n\\\\nThere should be only one user that has the given PagerDuty user ID in your ServiceNow instance, and the email address of that user should match the user with that ID in PagerDuty. Otherwise, some of the API calls that the integration needs to make may not succeed.\\\\n\\\\nThis value is used when making the REST API requests to create incidents in PagerDuty, if auto-provisioning is disabled. Thus, if it is set improperly, the requests may not succeed.\",\n\"title\": \"Default PagerDuty User ID\"\n}\n`}{`[/block]`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"incidents-in-servicenow-are-not-updated-or-created-from-pagerduty\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#incidents-in-servicenow-are-not-updated-or-created-from-pagerduty\",\n        \"aria-label\": \"incidents in servicenow are not updated or created from pagerduty permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Incidents in ServiceNow are not updated or created from PagerDuty`}</h2>\n    <p>{`Most synchronization of data and events from PagerDuty to ServiceNow happens through webhooks sent from PagerDuty to ServiceNow. For this reason, if you notice incidents are not updating or getting created from PagerDuty, the webhook import process is what will need to be examined.`}</p>\n    <h3 {...{\n      \"id\": \"check-webhook-authentication-and-permissions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-webhook-authentication-and-permissions\",\n        \"aria-label\": \"check webhook authentication and permissions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check webhook authentication and permissions`}</h3>\n    <p>{`To test all settings, go to `}<strong parentName=\"p\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Configuration`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Test ServiceNow User Authentication.`}</strong>{` You should see the message:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`x_pd_integration (PagerDutyTest): ServiceNow user authentication test successful (200)\n`}</code></pre>\n    <p>{`If you see the following instead:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`x_pd_integration (PagerDutyTest): ServiceNow user authentication test failed (403)\n`}</code></pre>\n    <ol>\n      <li parentName=\"ol\">{`Ensure that the `}<strong parentName=\"li\">{`ServiceNow user for authentication`}</strong>{` and `}<strong parentName=\"li\">{`ServiceNow password for authentication`}</strong>{` configured in `}<strong parentName=\"li\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"li\">{`Configuration`}</strong>{` `}{`→`}{` `}<strong parentName=\"li\">{`PagerDuty Settings`}</strong>{` are valid credentials for a ServiceNow web service access user`}</li>\n      <li parentName=\"ol\">{`Ensure that the password is consistent between the user and the setting in the PagerDuty Configuration properties.`}</li>\n      <li parentName=\"ol\">{`Ensure that the user for webhook authentication has the following roles:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`itil`}</inlineCode></li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`rest_service`}</inlineCode>{`.`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`x_pd_integration.admin`}</inlineCode></li>\n        </ul>\n      </li>\n    </ol>\n    <p>{`If the password or username have changed in ServiceNow, you must also update the credentials in the ServiceNow extensions on your PagerDuty services. Alternately, in all versions 3.5 and later, you can delete the extensions, set the value of the `}<em parentName=\"p\">{`PagerDuty Webhook`}</em>{` field to blank in your provisioned assignment groups and configuration items, and then re-provision them.`}</p>\n    <h3 {...{\n      \"id\": \"check-extensions-on-pagerduty-services\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-extensions-on-pagerduty-services\",\n        \"aria-label\": \"check extensions on pagerduty services permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check extensions on PagerDuty services`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Check that the URL in the extensions is correct. The host it points to should be the same subdomain of ServiceNow as the one that you have integrated with PagerDuty.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`If you have provisioned your services and webhooks in PagerDuty from a development or staging instance of ServiceNow, you will need to update your extension URLs to reflect your production instance of ServiceNow, or the bidirectional integration will not work, because webhooks would in this case be sent to the development/staging instance of ServiceNow.`}</p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"check-for-assignment-groups-matching-the-escalation-policy\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-for-assignment-groups-matching-the-escalation-policy\",\n        \"aria-label\": \"check for assignment groups matching the escalation policy permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check for assignment groups matching the escalation policy`}</h3>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Make sure the escalation policy is assigned the incident in PagerDuty, whose corresponding incident in ServiceNow wasn’t updated (or for which no ServiceNow incident was created), has a corresponding assignment group in ServiceNow`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Because the escalation policy is assigned the incident, ensure there is an assignment group that has its `}<em parentName=\"p\">{`PagerDuty Escalation`}</em>{` field set to the escalation policy’s ID.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`You may need to add the two PagerDuty fields to the group form or list view to view their values.`}</p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"check-webhook-import-records\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-webhook-import-records\",\n        \"aria-label\": \"check webhook import records permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check webhook import records`}</h3>\n    <p>{`Check to see if the webhook messages have been saved in ServiceNow. In ServiceNow, go to `}<strong parentName=\"p\">{`PagerDuty`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Imports`}</strong>{` `}{`→`}{` `}<strong parentName=\"p\">{`Webhook Import Rows`}</strong>{` and look for records with creation time that coincides with the time that the incident in PagerDuty was triggered, acknowledged or resolved.`}</p>\n    <h3 {...{\n      \"id\": \"check-for-required-fields\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-for-required-fields\",\n        \"aria-label\": \"check for required fields permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check for required fields`}</h3>\n    <p>{`If you can see that webhooks are getting through from PagerDuty to ServiceNow, but are not creating/updating an incident, try manually closing an incident in ServiceNow. If manually closing an incident requires you to enter values for certain fields, your required fields have likely been customized. Create `}<a parentName=\"p\" {...{\n        \"href\": \"https://support.pagerduty.com/docs/advanced-servicenow-configuration#section-inbound-field-rules\"\n      }}>{`inbound field rules`}</a>{` so that the required fields have a default value. `}</p>\n    <h3 {...{\n      \"id\": \"check-for-interfering-state-field-values\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-for-interfering-state-field-values\",\n        \"aria-label\": \"check for interfering state field values permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check for interfering state field values`}</h3>\n    <p>{`Check to see if you have any custom choices set up for the `}<em parentName=\"p\">{`State`}</em>{` field in the ServiceNow incidents model:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Right click on the label of the `}<em parentName=\"li\">{`State`}</em>{` field (i.e. that would say \"New\" or \"Resolved\"), `}</li>\n      <li parentName=\"ol\">{`Select `}<strong parentName=\"li\">{`Configure Dictionary`}</strong></li>\n      <li parentName=\"ol\">{`Switch to `}<strong parentName=\"li\">{`Advanced view`}</strong></li>\n      <li parentName=\"ol\">{`Go to the `}<strong parentName=\"li\">{`Choices`}</strong>{` tab and look for entries with higher numbers in the `}<strong parentName=\"li\">{`Value`}</strong>{` field.`}</li>\n    </ol>\n    <p>{`The integration follows the same convention as the out-of-box state values of ServiceNow. Higher numbers imply a more advanced state (i.e. a 6 or higher would be done/resolved or some variant thereof). If the state of the incident that did not automatically resolve is of a higher numeric value, but the incident did not resolve, it is because it was treated as already resolved.`}</p>\n    <p>{`To correct this, you will need to modify the custom choice values that you have configured for the `}<strong parentName=\"p\">{`State`}</strong>{` field to be lower than 6, so that they are treated as an unresolved state (if they reflect that).`}</p>\n    <h3 {...{\n      \"id\": \"check-for-interfering-data-policies\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#check-for-interfering-data-policies\",\n        \"aria-label\": \"check for interfering data policies permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Check For Interfering Data Policies`}</h3>\n    <p>{`Data policies, which allow the ServiceNow administrator to create validation rules on tables, can stop the webhook import process from actually committing the changes from PagerDuty to the ServiceNow incident record, and thus block functionality of the integration such as automatic resolution of incidents.`}</p>\n    <p>{`When a data policy does this, there will not be any clear indication of it in the application-scoped logs. Rather, in the system logs, there will be an error-level log entry created at the time of the webhook import, with a message beginning with `}<inlineCode parentName=\"p\">{`Data Policy Exception`}</inlineCode>{`.`}</p>\n    <p>{`Fortunately, as of version 4 of the integration, inbound field rules give you the ability to automatically fill fields in the incident, and this can be used to fill fields as desired in order satisfy data policies.`}</p>\n    <p>{`To address this:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`System Policy `}{`→`}{` Data Policies`}</strong>{`, and in the list view`}</li>\n      <li parentName=\"ol\">{`Create a new filter on the `}<strong parentName=\"li\">{`Table`}</strong>{` field: `}<inlineCode parentName=\"li\">{`=incident`}</inlineCode></li>\n      <li parentName=\"ol\">{`Make note of all the fields, and the constraints`}</li>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`PagerDuty `}{`→`}{` Configuration `}{`→`}{` Inbound Field Rules`}</strong></li>\n      <li parentName=\"ol\">{`For each incident field that was part of the conditions in the data policy:`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Create a new inbound field rule`}</li>\n      <li parentName=\"ul\">{`Set the webhook type to `}<em parentName=\"li\">{`Acknowledge`}</em>{` or `}<em parentName=\"li\">{`Resolve`}</em>{` based on which of these events the ServiceNow incidents aren't being updated for`}</li>\n      <li parentName=\"ul\">{`Fill the field with a default value, or dynamically based on the webhook payload.`}</li>\n    </ul>\n    <p>{`Main article: `}<a parentName=\"p\" {...{\n        \"href\": \"doc:advanced-servicenow-configuration#section-inbound-field-rules\"\n      }}>{`Advanced ServiceNow Configuration: Inbound Field Rules`}</a>{` `}</p>\n    <h2 {...{\n      \"id\": \"an-inbound-field-rule-is-not-filling-its-target-field-with-the-desired-value\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#an-inbound-field-rule-is-not-filling-its-target-field-with-the-desired-value\",\n        \"aria-label\": \"an inbound field rule is not filling its target field with the desired value permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`An inbound field rule is not filling its target field with the desired value`}</h2>\n    <p>{`The most common causes include:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`A business rule or some other process is overwriting the changes to the field after it is initially set by the field rule.`}</li>\n      <li parentName=\"ul\">{`The inbound field rule only applies to a specific webhook event type (i.e. Trigger/Resolve), and the change didn't occur at the specified time because that's not when the relevant webhook type came through.`}</li>\n      <li parentName=\"ul\">{`The inbound field rule is disabled`}</li>\n    </ul>\n    <p>{`To troubleshoot:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`PagerDuty `}{`→`}{` Configuration `}{`→`}{` Inbound Field Rules`}</strong>{` and verify:`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`That `}<strong parentName=\"li\">{`Enabled`}</strong>{` is `}<em parentName=\"li\">{`true`}</em>{` for the inbound field rule in question`}</li>\n      <li parentName=\"ul\">{`The `}<strong parentName=\"li\">{`PagerDuty webhook type`}</strong>{` is the expected type`}</li>\n    </ul>\n    <ol {...{\n      \"start\": 2\n    }}>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`System Definition `}{`→`}{` Business Rules`}</strong>{` and look for all rules that modify the field, as follows:`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Enable the field `}<strong parentName=\"li\">{`Set field values`}</strong>{` in the list view`}</li>\n      <li parentName=\"ul\">{`Search filter for table: `}<inlineCode parentName=\"li\">{`=incident`}</inlineCode></li>\n      <li parentName=\"ul\">{`Filter out all rows with blank values for `}<strong parentName=\"li\">{`Set field values`}</strong></li>\n      <li parentName=\"ul\">{`If there is more than one page of results, search for all records such that `}<strong parentName=\"li\">{`Set fields values`}</strong>{` contains the column name, i.e. `}<inlineCode parentName=\"li\">{`*business_service`}</inlineCode>{`. If you find any that modify this field, that may explain why the field is not getting set according to the inbound field rule: it is being overwritten by the business rule.`}</li>\n      <li parentName=\"ul\">{`If nothing turns up, look at all business rules that include running a script, to see if any of the scripts include setting the value of the field in question.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"some-user-actions-are-not-updated-in-servicenow-from-pagerduty\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#some-user-actions-are-not-updated-in-servicenow-from-pagerduty\",\n        \"aria-label\": \"some user actions are not updated in servicenow from pagerduty permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Some user actions are not updated in ServiceNow from PagerDuty.`}</h2>\n    <p>{`Check the user's email address in ServiceNow to make sure it matches the user's email address in PagerDuty, and that the user is provisioned.`}</p>\n    <h2 {...{\n      \"id\": \"incident-notes-are-not-syncing\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#incident-notes-are-not-syncing\",\n        \"aria-label\": \"incident notes are not syncing permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Incident notes are not syncing`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`The user posting the note might not be `}<a parentName=\"li\" {...{\n          \"href\": \"doc:servicenow#section-provisioning-linking-objects-between-systems\"\n        }}>{`provisioned in PagerDuty`}</a>{`, i.e. does not have a PagerDuty user ID assigned, and automatic provisioning (the option \"Automatically create a PagerDuty user if one is not found matching the user's email\") is disabled, and one of the following applies:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`There is no value set for the option \"Default PagerDuty User ID to use if auto-provisioning is disabled\" in `}<strong parentName=\"li\">{`Configuration `}{`→`}{` PagerDuty Settings`}</strong>{`.`}</li>\n          <li parentName=\"ul\">{`There is an incorrect/invalid value set for this option. The value must be a PagerDuty user ID, which is the uppercase alphanumeric code at the end of a given user's profile URL.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"i-just-upgraded-and-dont-see-the-option-to-migrate-webhooks-how-do-i-run-the-migration\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#i-just-upgraded-and-dont-see-the-option-to-migrate-webhooks-how-do-i-run-the-migration\",\n        \"aria-label\": \"i just upgraded and dont see the option to migrate webhooks how do i run the migration permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`I just upgraded and don't see the option to migrate webhooks. How do I run the migration?`}</h2>\n    <p>{`You can reenable the menu item to bring it back up and run the migration. To do this:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`System Definition `}{`→`}{` Application Menus`}</strong>{` in ServiceNow.`}</li>\n      <li parentName=\"ol\">{`Search by Title for the PagerDuty menu and click its name to open and edit it when it comes up.`}</li>\n      <li parentName=\"ol\">{`Under the menu items, look for the \"MIGRATE WEBHOOKS\" one and check the box next to it.`}</li>\n      <li parentName=\"ol\">{`In the `}<strong parentName=\"li\">{`Actions on selected rows`}</strong>{` dropdown, select \"Change active state\".`}</li>\n      <li parentName=\"ol\">{`Refresh the page, go to the PagerDuty application in the system menu, and you should find the menu item.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"my-servicenow-is-firing-off-hundreds-or-thousands-of-emails-or-worknote-updates-on-an-incident\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#my-servicenow-is-firing-off-hundreds-or-thousands-of-emails-or-worknote-updates-on-an-incident\",\n        \"aria-label\": \"my servicenow is firing off hundreds or thousands of emails or worknote updates on an incident permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`My ServiceNow is firing off hundreds or thousands of emails or worknote updates on an incident?`}</h2>\n    <p>{`While feedback loops can result from custom business rules and/or automation in ServiceNow, it is also possible in the integration to make the mistake of creating a webhook-powered feedback loop between ServiceNow and PagerDuty. `}</p>\n    <p>{`This can happen if there are any business rules or other automated processes that alter the assignment group of the ServiceNow incident, and caution is not exercised when manually setting the integration fields. To give a high-level overview of an example of how this can possibly happen, let us assume the following configuration:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`There is a business rule that automatically changes the assignment group to `}<strong parentName=\"li\">{`B`}</strong>{` if it is placed into assignment group `}<strong parentName=\"li\">{`A`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`Both assignment group `}<strong parentName=\"li\">{`A`}</strong>{` and `}<strong parentName=\"li\">{`B`}</strong>{` are tied to PagerDuty escalation policy `}<strong parentName=\"li\">{`Z.`}</strong></li>\n    </ul>\n    <p>{`The feedback loop is as follows:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Incident changes assignment group to (or is created in) `}<strong parentName=\"li\">{`B`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`PagerDuty incident triggered and assigned to `}<strong parentName=\"li\">{`Z`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`Webhook (escalation restarted; `}<inlineCode parentName=\"li\">{`incident.delegate`}</inlineCode>{` or `}<inlineCode parentName=\"li\">{`incident.trigger`}</inlineCode>{` webhook).`}</li>\n      <li parentName=\"ol\">{`Webhook import in ServiceNow assigns incident to `}<strong parentName=\"li\">{`A`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`Automation changes assignment to `}<strong parentName=\"li\">{`B`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`Loop repeats.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"duplicate-incidents\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#duplicate-incidents\",\n        \"aria-label\": \"duplicate incidents permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Duplicate Incidents`}</h2>\n    <h3 {...{\n      \"id\": \"servicenow-is-creating-duplicate-incidents-in-pagerduty\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#servicenow-is-creating-duplicate-incidents-in-pagerduty\",\n        \"aria-label\": \"servicenow is creating duplicate incidents in pagerduty permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`ServiceNow is creating duplicate incidents in PagerDuty`}</h3>\n    <p>{`This is happening because something is circumventing the methods designed into the PagerDuty integration to avoid triggering duplicate incidents.\n`}{`[block:callout]`}{`\n{\n\"type\": \"info\",\n\"title\": \"How it works\",\n\"body\": \"The integration uses the `}<strong parentName=\"p\">{`PagerDuty Incident`}</strong>{` field in the ServiceNow incident as a sort of semaphore in order to prevent race conditions, by filling it with a placeholder value: `}<inlineCode parentName=\"p\">{`---waiting---`}</inlineCode>{` before it is later filled with the PagerDuty incident ID once the incident in PagerDuty is created. \\\\n\\\\nThis placeholder value is filled in immediately when the business rule runs, and the business rule's conditions exclude the case where the field has a value that starts with `}<inlineCode parentName=\"p\">{`---`}</inlineCode>{` in it. Thus, if two updates happen in succession, before the incident triggers in PagerDuty, the business rule still won't run twice.\\\\n\\\\nThe incident is updated again when the PagerDuty REST API is being called to trigger the incident. To prevent other updates from triggering the same business rule again, `}<inlineCode parentName=\"p\">{`current.update()`}</inlineCode>{` is called to commit the incident with the placeholder value to the database.\"\n}\n`}{`[/block]`}{`\nAssuming that there have been no customizations to the out-of-box PagerDuty integration, the most likely cause is an automation, i.e. separate business rule, that is triggering a secondary automatic update on the incident record after the initial one. The business rule `}<strong parentName=\"p\">{`PD Trigger PagerDuty Incident`}</strong>{` is set to run `}<em parentName=\"p\">{`after`}</em>{`, with order = 100, meaning that it runs `}<em parentName=\"p\">{`after`}</em>{` the changes are committed to the database. So, any two updates that happen in rapid succession and asynchronously risk triggering the PagerDuty incident triggering business rule twice.`}</p>\n    <p>{`To resolve this, one will need to first find out how the secondary updates are taking place, as follows:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`System Logs `}{`→`}{` Events`}</strong></li>\n      <li parentName=\"ol\">{`Find events of name `}<inlineCode parentName=\"li\">{`x_pd_integration.trigger_incident`}</inlineCode>{` around the time of the duplicate triggering.`}</li>\n      <li parentName=\"ol\">{`Observe the values of:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`param1`}</inlineCode>{`, the last worknotes entry,`}</li>\n          <li parentName=\"ul\"><inlineCode parentName=\"li\">{`param2`}</inlineCode>{`, a comma-delineated list of extra parameters: current user `}<inlineCode parentName=\"li\">{`sys_id`}</inlineCode>{`, the operation (insert or update), and a boolean for whether or not the value of the assignment group or configuration item changed.`}</li>\n          <li parentName=\"ul\">{`User ID`}</li>\n          <li parentName=\"ul\">{`User name`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">{`Identify the event that was raised by the automated process based on how the event was submitted, vis-à-vis the available attributes.`}</li>\n      <li parentName=\"ol\">{`Find some attribute of the automated update operation that can be used to distinguish it from others, i.e. made by a human.`}</li>\n      <li parentName=\"ol\">{`Add conditions to the business rule `}<strong parentName=\"li\">{`PD Trigger PagerDuty Incident`}</strong>{` that exclude updates which have the distinguishing characteristics of the automated updates.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"pagerduty-is-creating-duplicate-incidents-in-servicenow\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#pagerduty-is-creating-duplicate-incidents-in-servicenow\",\n        \"aria-label\": \"pagerduty is creating duplicate incidents in servicenow permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`PagerDuty is creating duplicate incidents in ServiceNow`}</h2>\n    <p>{`[block:callout]`}{`\n{\n\"type\": \"info\",\n\"title\": \"How it works\",\n\"body\": \"The PagerDuty App receives webhooks and saves them in an import table, and uses an import transform map to translate them to updates to existing incidents or insertion of new incidents. It uses the `}<strong parentName=\"p\">{`PagerDuty Incident`}</strong>{` field in the ServiceNow incident to identify existing incidents\"\n}\n`}{`[/block]`}</p>\n    <h3 {...{\n      \"id\": \"verify-that-coalescing-on-incident-id-is-enabled-in-the-import-transform-map\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#verify-that-coalescing-on-incident-id-is-enabled-in-the-import-transform-map\",\n        \"aria-label\": \"verify that coalescing on incident id is enabled in the import transform map permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Verify that coalescing on incident ID is enabled in the import transform map`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<strong parentName=\"li\">{`PagerDuty `}{`→`}{` Imports `}{`→`}{` Webhook Import Service`}</strong></li>\n      <li parentName=\"ol\">{`Scroll to the bottom of the page and follow the link to the `}<strong parentName=\"li\">{`PagerDuty Webhook Import`}</strong>{` under `}<strong parentName=\"li\">{`Web Service Transform Maps`}</strong></li>\n      <li parentName=\"ol\">{`Scroll to the bottom of the page to find the `}<strong parentName=\"li\">{`Field Maps`}</strong>{` section.`}</li>\n      <li parentName=\"ol\">{`In the mapping for the field `}<inlineCode parentName=\"li\">{`id`}</inlineCode>{` `}{`→`}{` `}<inlineCode parentName=\"li\">{`x_pd_integration_incident`}</inlineCode>{`:`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`Ensure that `}<strong parentName=\"li\">{`Coalesce`}</strong>{` is `}<strong parentName=\"li\">{`true`}</strong>{`.`}</li>\n      <li parentName=\"ul\">{`If it is false, set it to true.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}