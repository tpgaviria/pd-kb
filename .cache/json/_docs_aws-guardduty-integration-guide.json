{"data":{"mdx":{"id":"71ddb7b6-0cbf-53a8-9198-51e53e13b5ae","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Amazon GuardDuty Integration Guide | PagerDuty\",\n  \"slug\": \"aws-guardduty-integration-guide\",\n  \"excerpt\": \"Integration Guide for Amazon GuardDuty\",\n  \"hidden\": false,\n  \"createdAt\": \"2018-10-30T12:55:02.453Z\",\n  \"updatedAt\": \"2020-05-21T23:15:50.299Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"#Integration Overview\"), mdx(\"p\", null, \"PagerDuty\\u2019s integration with Amazon GuardDuty allows you to automate response workflows for  security issues that could affect your AWS infrastructure. PagerDuty ensures that the right people are notified about things like unauthorized behavior, and you can use PagerDuty\\u2019s alert grouping to reduce noise by grouping similar alerts into a single issue. This is a one-way integration, sending findings to PagerDuty.\"), mdx(\"p\", null, \"Follow the instructions below to configure Amazon GuardDuty with PagerDuty.\\xA0If you have any questions or need any assistance, please contact our support team at \", mdx(\"a\", {\n    href: \"mailto:support@pagerduty.com\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"mailto:support@pagerduty.com\"\n  }), \"support@pagerduty.com\")), \".\"), mdx(\"h1\", null, \"In PagerDuty\"), mdx(\"p\", null, \"There are two ways that Amazon GuardDuty can be integrated with PagerDuty: via Global Event Rules or through an integration on a PagerDuty Service.\"), mdx(\"p\", null, \"##Integrating with Global Event Rules\"), mdx(\"p\", null, \"Integrating with Global Event Rules may be beneficial if you want to build different routing rules based on the payload coming from AWS. If you would like to learn more, please visit our article on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/docs/global-event-rules\"\n  }), \"Global Event Rules\"), \".  \"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"From the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration\"), \" menu, select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Event Rules\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"On the Event Rules screen, copy your \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integration Key\"), \".\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/85a2b6c-cloudwatch-copy-key.png\\\",\\n\\\"cloudwatch-copy-key.png\\\",\\n2146,\\n980,\\n\\\"#f7f6f7\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Once you have your \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integration Key\"), \", the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integration URL\"), \" will be:\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"https://events.pagerduty.com/x-ere/[YOUR_INTEGRATION_KEY_HERE]\")), mdx(\"p\", null, \"You can now proceed to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/v1/docs/aws-guardduty-integration-guide#section-in-the-aws-management-console\"\n  }), \"In the AWS Management Console\"), \" section below. \"), mdx(\"p\", null, \"##Integrating with a PagerDuty Service\"), mdx(\"p\", null, \"Integrating with a PagerDuty Service directly can be beneficial if you don\\u2019t need to route alerts from AWS to different responders based on the event payload. You can still use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/docs/event-management#section-configure-event-rules-for-a-service\"\n  }), \"service-level event rules\"), \" to perform actions such as suppressing.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"From the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration\"), \" menu, select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Services\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"On your Services page: If you are creating a new service for your integration, click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"+Add New Service\"), \". It is recommended that you create a service specifically for Amazon GuardDuty notifications.\")), mdx(\"p\", null, \"If you are adding your integration to an existing service, click the name of the service you want to add the integration to. Then click the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Integrations\"), \" tab and click the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Add a new integration\"), \" link.\"), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select Amazon GuardDuty from the\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \" Integration Type\"), \" menu and enter an \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integration Name\"), \".\\nIf you are creating a new service for your integration, in General Settings, enter a \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name\"), \" for your new service. Then, in Incident Settings, specify the\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \" Escalation Policy\"), \", \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Notification Urgency\"), \", and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Incident Behavior\"), \" for your new service.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Add Service\"), \" or\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \" Add Integration\"), \" button to save your new integration. You will be redirected to the Integrations page for your service.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Copy the\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \" Integration URL\"), \" for your new integration.\")), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/6e9a2c4-GuardDuty-Integration-URL.png\\\",\\n\\\"GuardDuty-Integration-URL.png\\\",\\n1692,\\n384,\\n\\\"#f5f2f2\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"h1\", null, \"In the AWS Management Console\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Services\"), \" search bar, search and select Simple Notification Service (SNS). On the SNS dashboard, select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Topics\"), \" and click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create Topic\"), \". This will be used to route alerts to PagerDuty from AWS.\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/bec2dcd-amazon-cloudwatch-create-topic.png\\\",\\n\\\"amazon-cloudwatch-create-topic.png\\\",\\n1780,\\n510,\\n\\\"#f6f5f4\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Enter a \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Topic name\"), \" (you may want to name your topic after your PagerDuty service\\u2019s name) and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Display name\"), \", then click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create topic\"), \". \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Now that your topic has been created, Select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Subscriptions\"), \" in the left hand menu and click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create Subscription\"), \".\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/ae53715-amazon-cloudwatch-create-subscription.png\\\",\\n\\\"amazon-cloudwatch-create-subscription.png\\\",\\n2280,\\n536,\\n\\\"#f5f4f3\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Make sure \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"HTTPS\"), \" is the selected Protocol. Paste your \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integration URL\"), \" from step 5 (above) into the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Endpoint\"), \" field, ensure that the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Enable raw message delivery\"), \" checkbox is \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"unchecked\"), \" and click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Create Subscription\"), \".\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/f40ed65-amazon-cloudwatch-subscription-details.png\\\",\\n\\\"amazon-cloudwatch-subscription-details.png\\\",\\n2072,\\n1062,\\n\\\"#f6f7f8\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Your subscription should be automatically confirmed. Click the refresh icon to make sure the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Subscription ID\"), \" is not \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PendingConfirmation\"), \".\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/3c37dd4-GuardDuty-Pending-Confirmation.png\\\",\\n\\\"GuardDuty-Pending-Confirmation.png\\\",\\n3035,\\n478,\\n\\\"#f2f2f2\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Next, in the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Services\"), \" search bar, search and select the Amazon GuardDuty console. If this is your first time \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://docs.aws.amazon.com/guardduty/latest/ug/guardduty_settingup.html#guardduty_enable-gd\"\n  }), \"setting up this service\"), \", search for GuardDuty, and click Enable GuardDuty. \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Once you have enabled GuardDuty, you can begin building CloudWatch Event Rules to send alerts to PagerDuty. Navigate to the CloudWatch console.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Events\"), \", then click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Get Started\"), \" to create a rule. One or more rules can be created to send specific alerts to PagerDuty when a GuardDuty finding is opened.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"GuardDuty\"), \" as the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Service Name\"), \", then select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"GuardDuty Finding\"), \" as the Event Type.\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/1c619e7-GuardDuty-Create-Rule.png\\\",\\n\\\"GuardDuty-Create-Rule.png\\\",\\n1158,\\n1216,\\n\\\"#f2f1f0\\\"\\n]\", \",\\n\\\"sizing\\\": \\\"full\\\"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Add a target\"), \" and select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"SNS topic\"), \", then select \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Your Topic Name\"), \" (the SNS topic you created above in step 1) and then click \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configure Details\"), \".\")), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/17dfcd9-GuardDuty-Targets.png\\\",\\n\\\"GuardDuty-Targets.png\\\",\\n1563,\\n532,\\n\\\"#f6f2f3\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\n11. Assign a Name like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"GuardDuty-to-PD-Findings\"), \" and click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create Rule\"), \".\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/068719a-GuardDuty-Configure-Rule.png\\\",\\n\\\"GuardDuty-Configure-Rule.png\\\",\\n1562,\\n726,\\n\\\"#f4f6f8\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\n12. To ensure configuration was successful, navigate back to the Amazon GuardDuty console to generate sample findings, which should trigger sample events in PagerDuty. Select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Settings\"), \", then select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Generate Sample Findings\"), \" and then click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Findings\"), \" in the left navigation bar. You will see the sample findings that have been generated. In PagerDuty, you will see the correlating sample alert.\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/390393a-GuardDuty-Sample-Findings.png\\\",\\n\\\"GuardDuty-Sample-Findings.png\\\",\\n2396,\\n1244,\\n\\\"#f6f6f6\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\"), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/3488e87-GuardDuty-Findings.png\\\",\\n\\\"GuardDuty-Findings.png\\\",\\n2282,\\n730,\\n\\\"#f0ede7\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nCongratulations, you have now integrated Amazon GuardDuty with PagerDuty! For more information on how to adjust settings to deduplicate events within PagerDuty, please visit our article on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://support.pagerduty.com/docs/event-management\"\n  }), \"Event Management\"), \".\"), mdx(\"h2\", {\n    \"id\": \"faq\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#faq\",\n    \"aria-label\": \"faq permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"FAQ\"), mdx(\"h3\", {\n    \"id\": \"why-are-my-cloudwatch-events-not-triggering-incidents-in-pagerduty\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#why-are-my-cloudwatch-events-not-triggering-incidents-in-pagerduty\",\n    \"aria-label\": \"why are my cloudwatch events not triggering incidents in pagerduty permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Why are my CloudWatch events not triggering incidents in PagerDuty?\"), mdx(\"p\", null, \"Events that are not sent properly from CloudWatch will be dropped and will not trigger alerts in PagerDuty. This integration expects to find in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Message\"), \" property a nested JSON-encoded object from which meaningful data about the alert can be extracted to compose the PagerDuty incident. You can find details on Amazon's SNS Message attributes here: \"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html\"\n  }), \"https://docs.aws.amazon.com/sns/latest/dg/sns-message-attributes.html\")), mdx(\"p\", null, \"AWS also has some troubleshooting docs on their side which outline some things to look for on the CloudWatch side:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/CWE_Troubleshooting.html#NeverDeliveredToTarget\"\n  }), \"https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/CWE_Troubleshooting.html#NeverDeliveredToTarget\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#in-pagerduty","title":"In PagerDuty"},{"url":"#in-the-aws-management-console","title":"In the AWS Management Console","items":[{"url":"#faq","title":"FAQ","items":[{"url":"#why-are-my-cloudwatch-events-not-triggering-incidents-in-pagerduty","title":"Why are my CloudWatch events not triggering incidents in PagerDuty?"}]}]}]},"frontmatter":{"title":"Amazon GuardDuty Integration Guide | PagerDuty"}}},"pageContext":{"id":"71ddb7b6-0cbf-53a8-9198-51e53e13b5ae"}}