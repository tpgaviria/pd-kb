{"componentChunkName":"component---src-components-article-template-js","path":"/docs/servicenow-using-the-clone-data-preserver","result":{"data":{"mdx":{"id":"bb25461f-fe71-51b4-a7a6-d6128cef929e","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ServiceNow: Using the Clone Data Preserver\",\n  \"slug\": \"servicenow-using-the-clone-data-preserver\",\n  \"hidden\": false,\n  \"createdAt\": \"2018-08-22T18:17:11.299Z\",\n  \"updatedAt\": \"2020-05-01T19:57:01.942Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In some cases, you may want to clone your ServiceNow production data to a new dev instance. While there can be many motivations for doing so, problems with the PagerDuty integration can occur if the data is cloned without using a Clone Data Preserver. In this article we'll discuss how to avoid common issues that come with replicating an environment in ServiceNow.\"), mdx(\"h2\", {\n    \"id\": \"what-is-the-clone-data-preserver\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#what-is-the-clone-data-preserver\",\n    \"aria-label\": \"what is the clone data preserver permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"What is the Clone Data Preserver?\"), mdx(\"p\", null, \"The Clone Data Preserver is a feature within ServiceNow that you can use to define what data should \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not\"), \" be replaced when cloning one environment into another. \"), mdx(\"h2\", {\n    \"id\": \"why-should-i-use-this\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#why-should-i-use-this\",\n    \"aria-label\": \"why should i use this permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Why should I use this?\"), mdx(\"p\", null, \"When you clone your environment, you also clone the PagerDuty integration. When this happens you lose PagerDuty configuration in the target destination, such as the CI or AG mappings, service IDs, and API keys. To clone the PagerDuty integration and have it remain in a functional state, you'll need to utilize the Clone Data Preserver to preserve certain PagerDuty fields beforehand. In the walkthrough below, we'll be creating the Clone Data Preservers in our Production environment, prior to cloning anything to our Dev instance.\\n\", \"[block:callout]\", \"\\n{\\n\\\"type\\\": \\\"info\\\",\\n\\\"title\\\": \\\"Required Permissions\\\",\\n\\\"body\\\": \\\"Please keep in mind that in order to use the Clone Data Preserver feature, your ServiceNow role must include \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"clone_admin\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\"), \"\\\"\\n}\\n\", \"[/block]\"), mdx(\"p\", null, \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Creating the Clone Data Preservers by Importing an Update Set\\\"\\n}\\n\", \"[/block]\", \"\\nAs an alternative to creating the Clone Data Preservers manually, you can import one of the following update sets to the origin ServiceNow instance. In keeping with our prod to dev example, you would import the appropriate update set onto your prod instance before cloning over to your new dev instance. \"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/PagerDuty/servicenow-updatesets\"\n  }), \"This update set\"), \" will work for both v5 and v6 of the PagerDuty integration.\"), mdx(\"p\", null, \"Note that this update set only preserves the PagerDuty Settings configuration. To preserve the mappings for Users, Assignment Groups, and Configuration Items, a ServiceNow administrator can follow the instructions below to manually preserve those records.\\n\", \"[block:api-header]\", \"\\n{\\n\\\"title\\\": \\\"Creating the Clone Data Preservers Manually\\\"\\n}\\n\", \"[/block]\", \"\\nTo begin, navigate to System Clone :fa-arrow-right: Preserve Data, and select New. We'll begin by addressing the PagerDuty fields in the sys_properties table. In total, we will make 4 separate Clone Data Preservers.\"), mdx(\"p\", null, \"Once you've created a new record for the Clone Data Preserver, select the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sys_properties\"), \" table, as shown in the below screenshot. Try to make the name of the Clone Data Preserver as descriptive as possible for your own reference later.\"), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/903b701-Clone_Data_Preserver.png\\\",\\n\\\"Clone_Data_Preserver.png\\\",\\n2162,\\n632,\\n\\\"#f3f3f4\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nFrom here, we're going to be creating \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"OR\"), \" conditions for the following Names. \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.default_user OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.instance_url OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.sn2pd_mapping OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.default_service OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.api_key OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.webhook_restapi OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.sn_auth_user OR\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Name Is\"), \" x_pd_integration.sn_auth_userpwd\")), mdx(\"p\", null, \"Go ahead and save your changes. Once this Clone Data Preserver is created, we'll \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"create another for the \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"sys_user\"), \" table.\"), \" \"), mdx(\"p\", null, \"Navigate to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"System Clone :fa-arrow-right: Preserve Data\"), \", and select \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"New\"), \".  Select \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sys_user\"), \" as your table, and add the following condition and save your changes:\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/22badca-CDP-User-Mapping.png\\\",\\n\\\"CDP-User-Mapping.png\\\",\\n2802,\\n760,\\n\\\"#f7f8f8\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nCreate a new Clone Data Preserver for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"sys_user_group\"), \" table with the following conditions:\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/3939763-CDP-AG-Mappings.png\\\",\\n\\\"CDP-AG-Mappings.png\\\",\\n2800,\\n1106,\\n\\\"#f9f9f9\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nLastly, create a new Clone Data Preserver for the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cmdb_ci \"), \" table with the following conditions:\\n\", \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/e3eac54-CDP-CI-Mappings.png\\\",\\n\\\"CDP-CI-Mappings.png\\\",\\n2806,\\n848,\\n\\\"#f8f8f8\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nNote that for the Users, Assignment Groups, and Configuration Items preservers above, it will preserve the entire record in the target instance, not just the PagerDuty ID values within that record. Additionally, these conditions are tailored for the out-of-box integration. Customers who have implemented customizations to the PagerDuty ID Fields may need to alter their queries for each Clone Data Preserver.\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#what-is-the-clone-data-preserver","title":"What is the Clone Data Preserver?"},{"url":"#why-should-i-use-this","title":"Why should I use this?"}]},"frontmatter":{"title":"ServiceNow: Using the Clone Data Preserver"}}},"pageContext":{"id":"bb25461f-fe71-51b4-a7a6-d6128cef929e"}},"staticQueryHashes":[]}