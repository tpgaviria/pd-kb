{"componentChunkName":"component---src-components-article-template-js","path":"/docs/servicenow-integration-advanced-topices","result":{"data":{"mdx":{"id":"a8933020-73f9-5ef6-ab1e-2899908794b1","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ServiceNow Integration: Advanced Topics\",\n  \"slug\": \"servicenow-integration-advanced-topices\",\n  \"excerpt\": \"A guide to the inner workings of the integration between PagerDuty and ServiceNow.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"A broad overview of what the integration does can be seen in the following diagram in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.pagerduty.com/docs/guides/ServiceNow-integration-guide/\"\n  }), \"Integration Guide\"), \":\"), mdx(\"p\", null, \"[block:image]\", \"\\n{\\n\\\"images\\\": [\\n{\\n\\\"image\\\": \", \"[\\n\\\"https://files.readme.io/77affae-SN-PD-Integration-Diagram.png\\\",\\n\\\"SN-PD-Integration-Diagram.png\\\",\\n2060,\\n890,\\n\\\"#212121\\\"\\n]\", \"\\n}\\n]\\n}\\n\", \"[/block]\", \"\\nSome familiarity with the components that drive each aspect of the integration workflow, and the functions they serve, can be useful for fine-grained troubleshooting or in planning how to implement a custom solution.\"), mdx(\"p\", null, \"If you are having trouble with your ServiceNow integration, it is recommended that you first review the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/servicenow-troubleshooting-guide\"\n  }), \"ServiceNow Troubleshooting Guide\"), \".\"), mdx(\"h1\", null, \"Disclaimer\"), mdx(\"p\", null, \"If you modify any component of the integration, note that upgrading the application will not work as expected, and customizations are not supported by PagerDuty.\"), mdx(\"p\", null, \"Please see \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://community.pagerduty.com/t/upgrading-a-servicenow-app-with-manual-changes/257\"\n  }), \"Upgrading a ServiceNow App With Manual Changes\"), \" for more information on this process.\"), mdx(\"p\", null, \"Also, note, the internal structure of the application is subject to change. Descriptions given here have been reviewed and confirmed as applicable to ServiceNow versions 3.2 and 3.5 as of this writing.\"), mdx(\"h1\", null, \"Introduction\"), mdx(\"p\", null, \"In the ServiceNow Enterprise integration app for PagerDuty, the components are not only visible, but also can be modified.\"), mdx(\"p\", null, \"All of the source code that performs the actions underpinning the integration is in the JavaScript language, and can be viewed by going to the \\\"Advanced\\\" section or tab of any component's view. The application's components can be accessed by going to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty \", \"\\u25BA\", \" Configuration \", \"\\u25BA\", \" Configuration files\"), \". There you will find a page with the following tabs:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Business Rules\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Script Actions \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Script Includes \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"UI Actions \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Processors\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"UI Pages\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Macros\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Application Files\")), mdx(\"h2\", {\n    \"id\": \"terminology\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#terminology\",\n    \"aria-label\": \"terminology permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Terminology\"), mdx(\"h3\", {\n    \"id\": \"assignment-versus-escalation-and-delegation\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#assignment-versus-escalation-and-delegation\",\n    \"aria-label\": \"assignment versus escalation and delegation permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Assignment versus Escalation and Delegation\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"assignment\"), \" has a slightly different meaning in PagerDuty than it does in ServiceNow. When an incident is \\\"assigned\\\" to a user in PagerDuty, that means, in effect, it was escalated to them and they are the agents who will be notified. When an incident is first triggered, it is considered to be assigned to the first targets in the escalation policy until escalated. However, it will not assign the incident to anyone in ServiceNow until someone acknowledges it, in which case the corresponding ServiceNow incident will be assigned to them.\"), mdx(\"p\", null, \"When an incident in ServiceNow is assigned to a user, that similarly escalates the incident to that user in PagerDuty.\"), mdx(\"p\", null, \"The integration will also assign the ServiceNow incident to the user who acknowledged it in PagerDuty, since it is assumed that the user who acknowledged it is the one who will be working on it.\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"delegation\"), \" refers to the act of reassigning a PagerDuty incident to a different escalation policy, or level of an escalation policy, removing it from the current escalation policy flow and starting a new escalation process.\"), mdx(\"h3\", {\n    \"id\": \"provisioned-versus-linked\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#provisioned-versus-linked\",\n    \"aria-label\": \"provisioned versus linked permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Provisioned versus Linked\"), mdx(\"p\", null, \"The term \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"provisioned\"), \" refers to when the item in ServiceNow has an analogous record in PagerDuty, identified by one or more metadata fields, referred to as the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"integration fields\"), \". For assignment groups, these will be \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Escalation\"), \", which will contain the IDs of a PagerDuty \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/services-and-integrations\"\n  }), \"Service\"), \" / \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/escalation-policies\"\n  }), \"Escalation Policy\"), \" pair, and in version 3.5 and later, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook\"), \", which will contain the ID of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n  }), \"extension\"), \" used for the two-way integration. Users are provisioned if their \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty User\"), \" field refers to the ID of a currently-existing user in PagerDuty. Unprovisioned records will have these fields blank, or referencing nonexistent records if the records were deleted in PagerDuty.\"), mdx(\"p\", null, \"An incident is considered \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"linked\"), \" if it is associated with a PagerDuty incident, in which case its status, work notes and other information pertaining to the incident can be synchronized between systems.\"), mdx(\"h2\", {\n    \"id\": \"troubleshooting-with-verbose-logging\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#troubleshooting-with-verbose-logging\",\n    \"aria-label\": \"troubleshooting with verbose logging permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Troubleshooting With Verbose Logging\"), mdx(\"p\", null, \"To get the most detailed information about what is happening and in what order, set \\\"Logging verbosity level\\\" to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"debug\"), \" in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty \", \"\\u25BA\", \" Configuration \", \"\\u25BA\", \" Properties\"), \". Each call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gs.debug\"), \" in the script source will then show up in the application-scope logs, which can be viewed  under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty \", \"\\u25BA\", \" Support \", \"\\u25BA\", \" Logs\"), \".\"), mdx(\"h2\", {\n    \"id\": \"the-core-components\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#the-core-components\",\n    \"aria-label\": \"the core components permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"The Core Components\"), mdx(\"p\", null, \"Most of the tasks performed to synchronize data between PagerDuty and ServiceNow are taken in the following application files, under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Script Includes\"), \":\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty:\"), \" Utilities for obtaining PagerDuty metadata, and functions for performing actions on  incidents, i.e. assigning to a user, synchronizing worknotes, and triggering new incidents.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDutyInbound:\"), \" Functions that handle receipt and processing of webhooks from PagerDuty\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDutyProvisioning:\"), \" Handles the creation of objects in PagerDuty from ServiceNow, or in the case of users, finding existing ones that match analogous ones in ServiceNow.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty_REST:\"), \" Core functions for making REST API requests, and in version 3.2.1 and earlier, Events API requests.\")), mdx(\"p\", null, \"Each of the above defines a class constructor named after the script include. Methods of these classes are called throughout the rest of the application.\"), mdx(\"p\", null, \"Another important file, which handles the importing of webhook data into ServiceNow incidents, is the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook Import\"), \" Table Transform Map, which can be found under the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Application Files\"), \" tab.\"), mdx(\"h1\", null, \"Linking Objects Between Systems: The Provisioning Process\"), mdx(\"p\", null, \"For any user or assignment group in ServiceNow to be recognized in the integration, it must be provisioned. Either (groups or users) can be provisioned by clicking \\\"Provision PagerDuty Service\\\" or \\\"Provision PagerDuty User\\\" under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Related Links\"), \" in the view of the group or user.\"), mdx(\"p\", null, \"This process will make the necessary REST API calls in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyProvisioning\"), \" object, note the ID of the created (or existing) records, and save them in one of the following fields:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"User:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty ID\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_id\"), \": ID of a user in PagerDuty. When provisioning, if a user with identical login email to the user being provisioned is found, that user will be used, rather than creating a new user.\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Group:\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty escalation\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_escalation\"), \": ID of an escalation policy in PagerDuty.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty service\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_service\"), \": ID of a service in PagerDuty\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PagerDuty webhook\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_pagerduty_webhook\"), \" (v3.5 and later): ID of the extension on the PagerDuty service.\")))), mdx(\"h2\", {\n    \"id\": \"when-users-are-auto-provisioned\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#when-users-are-auto-provisioned\",\n    \"aria-label\": \"when users are auto provisioned permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"When Users Are Auto-Provisioned\"), mdx(\"p\", null, \"As of version 3.x, users in PagerDuty are automatically provisioned for ServiceNow users, or the ServiceNow user's record will be linked to a PagerDuty user if one exists with the same email address, in only the scenario wherein they provision an assignment group. The user performing the provisioning is themselves auto-provisioned and then automatically added as the initial member of the new escalation policy in PagerDuty.\"), mdx(\"h2\", {\n    \"id\": \"special-usage-of-the-integration-fields\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#special-usage-of-the-integration-fields\",\n    \"aria-label\": \"special usage of the integration fields permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Special Usage of the Integration Fields\"), mdx(\"p\", null, \"Note, one can obtain the ID of any object in PagerDuty by going to its main view page and looking in the URL in your web browser. The ID should be a string of uppercase alphanumeric characters beginning with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"P\"), \", and will be close to the end of the URL. By this method, one can manually \\\"Provision\\\" objects by forcefully setting the appropriate fields in the ServiceNow objects according to existing records. \"), mdx(\"p\", null, \"In short, for the bidirectional integration, the following is how the fields are used:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a ServiceNow incident is to trigger a PagerDuty incident, the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Service\"), \" field of the assignment group is used to tell which PagerDuty service to trigger it on..\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"When a PagerDuty incident is to open a ServiceNow incident via webhook import, the assignment group is looked up by value of the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Escalation\"), \" field.\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"It is preferable to avoid associating more than one ServiceNow group with the same escalation policy.\"), \" This is because the webhook transform map, if it finds more than one assignment group with the same escalation policy ID, will assign the ServiceNow incident to the first assignment group that it finds whose \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_pagerduty_escalation\"), \" column value matches the escalation policy ID in the webhook.\"), mdx(\"p\", null, \"However, conversely, it should be possible to manually associate an assignment group with multiple services, which all use the same escalation policy, and have the integration still work smoothly. This is because (see \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty to ServiceNow: The Webhook Import Process\"), \") it identifies the assignment group by escalation policy ID, and there's one escalation policy for all the services, so the service ID has no bearing in this part of the process. \"), mdx(\"p\", null, \"In the opposite direction, ServiceNow incidents can only trigger incidents in PagerDuty on one service: the one whose ID is stored in the assignment group's \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" field. \"), mdx(\"h2\", {\n    \"id\": \"avoiding-feedback-loops\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#avoiding-feedback-loops\",\n    \"aria-label\": \"avoiding feedback loops permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Avoiding Feedback Loops\"), mdx(\"p\", null, \"While many forms of automation feedback loops can result entirely from poorly-designed business rules in ServiceNow (and this is beyond the scope of this article), it is also possible in the integration to make the mistake of creating a webhook-powered feedback loop between ServiceNow and PagerDuty.\"), mdx(\"p\", null, \"This can happen if there are any business rules or other automated processes that alter the assignment group of the ServiceNow incident, and caution is not exercised when manually setting the integration fields. To give an example of how this can happen, let us assume the following configuration:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"There is a business rule that automatically changes the assignment group to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" if it is placed into assignment group \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Both assignment group \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \" and \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" are tied to PagerDuty escalation policy \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Z.\"))), mdx(\"p\", null, \"The feedback loop is as follows:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Incident changes assignment group to (or is created in) \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" \", \"\\u21A9\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"PagerDuty incident triggered and assigned to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Z\"), \" \", \"\\u21A9\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Webhook (escalation restarted; \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"incident.delegate\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"incident.trigger\"), \" webhook) \", \"\\u21A9\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Webhook import in ServiceNow assigns incident to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A\"), \" \", \"\\u21A9\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Automation changes assignment to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"B\"), \" \", \"\\u21A9\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Loop repeats. \", \"\\u21A9\")), mdx(\"h1\", null, \"ServiceNow to PagerDuty: The Business Rules\"), mdx(\"p\", null, \"All aspects of the integration that concern any flow of data from ServiceNow to PagerDuty are handled by business rules. Basically, it begins when an event such as an insertion, update or deletion takes place on an incident. If the conditions of a business rule are met, the rule and its associated script are run, which invokes a transaction with the PagerDuty API to perform the necessary actions in PagerDuty.\"), mdx(\"p\", null, \"If you are unfamiliar with ServiceNow business rules, the two-part video series \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://hi.service-now.com/kb_view.do?sysparm_article=KB0540192\"\n  }), \"Business Rules | Best Practices\"), \" from the ServiceNow knowledge base is highly recommended, as is the article \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://wiki.servicenow.com/index.php?title=Business_Rules#gsc.tab=0\"\n  }), \"Business Rules\"), \" in the ServiceNow Wiki.\"), mdx(\"p\", null, \"When troubleshooting the flow of information from ServiceNow to PagerDuty, it will sometimes help to examine the incident to see if it passes the conditions of the relevant business rules. To view the conditions of any given business rule, open the record and enter the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Edit\"), \" view, but do not save. Once the page loads, you will see the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Filter Conditions\"), \" in a modifiable, human-readable display.\"), mdx(\"p\", null, \"It is worth noting, the PagerDuty API calls do not always take place specifically within the business rules themselves. Rather, the business rule will raise an event that is handled by a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Script Action\"), \".\"), mdx(\"h2\", {\n    \"id\": \"how-pagerduty-incidents-are-triggered\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#how-pagerduty-incidents-are-triggered\",\n    \"aria-label\": \"how pagerduty incidents are triggered permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"How PagerDuty Incidents Are Triggered\"), mdx(\"p\", null, \"Consider the event named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.trigger_incident\"), \", handled by the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Trigger Incident\"), \" script action. This event is raised by one of the following business rules:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Trigger PagerDuty Incident:\"), \" An incident that has no corresponding PagerDuty incident is created (or updated) in ServiceNow, having Priority 1 or 2, and its assignment group has been provisioned in ServiceNow;\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Group Assign Trigger New Incident:\"), \" A preexisting incident that was previously tied to a PagerDuty incident, but that was \\\"unlinked\\\" by assigning it to a non-provisioned assignment group (per the business rule \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"PD Unlink if not PagerDuty group\"), \"), is assigned to a provisioned group, and it is P1/P2.\")), mdx(\"p\", null, \"In any case, the service in PagerDuty on which the incident will be triggered is determined by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Service\"), \" field in the ServiceNow assignment group to which the incident is assigned.\"), mdx(\"h2\", {\n    \"id\": \"how-pagerduty-incidents-are-resolved\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#how-pagerduty-incidents-are-resolved\",\n    \"aria-label\": \"how pagerduty incidents are resolved permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"How PagerDuty Incidents Are Resolved\"), mdx(\"p\", null, \"The following business rules resolve PagerDuty incidents from ServiceNow:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Resolve PagerDuty Incident:\"), \" the incident's \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"State\"), \" field must change to 6 or 7 (resolved/closed) and the incident must be linked. This raises the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.resolve_incident\"), \" event, handled by the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Resolve Incident\"), \" script action. The \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.resolveIncident\"), \" function is called to resolve the incident.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Unlink if not PagerDuty group:\"), \" if a linked incident is assigned to a non-provisioned assignment group, it is assumed that it will be handled outside of the PagerDuty incident response process. Hence, the PagerDuty incident will be resolved. This process happens as follows:\", mdx(\"ol\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Incident\"), \" field on the ServiceNow incident record is set to to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"---unlinked---\"), \". \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"This sets off the business rule \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Resolve Incident on Unlink\"), \".\")))), mdx(\"p\", null, \"The latter of these raises the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.resolve_on_unreference\"), \" event, handled by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Resolve on Unreference\"), \" script action, which calls \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.resolveOnUnreference\"), \" to resolve and post a worknote to the PagerDuty incident to indicate that it was resolved for this reason.\"), mdx(\"h2\", {\n    \"id\": \"reassignment-and-delegation\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#reassignment-and-delegation\",\n    \"aria-label\": \"reassignment and delegation permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Reassignment and Delegation\"), mdx(\"p\", null, \"Incidents in ServiceNow, when assigned to a user or assignment group, may trigger one of the following business rules:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD User Assign:\"), \" If a provisioned user is assigned a linked incident, this escalates the PagerDuty incident to the user in PagerDuty, by raising the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration.assign_incident_user\"), \" event, which is handled by the \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty User Assign Incident\"), \" script action, which calls the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.assignIncidentToUser\"), \" function.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PD Group Policy Assign:\"), \" if the assignment group of a linked incident changes, and the new assignment group is provisioned, the corresponding PagerDuty incident will be delegated to the Escalation Policy in PagerDuty specified by the assignment group's \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Escalation\"), \" field. This will restart escalation and notify the new assignees in the target policy.\")), mdx(\"h2\", {\n    \"id\": \"worknote-synchronization\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#worknote-synchronization\",\n    \"aria-label\": \"worknote synchronization permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Worknote Synchronization\"), mdx(\"p\", null, \"Worknotes are copied from ServiceNow to PagerDuty through the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PD Copy worknote to PagerDuty incident\"), \" business rule, which triggers the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.post_worknote\"), \" event, which then invokes the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.postIncidentNote\"), \" function. This runs on any update of a linked incident wherein the work notes change.\"), mdx(\"p\", null, \"The process that runs in the opposite direction is also initiated by a business rule, apart from just the UI Action \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Refresh PagerDuty Notes\"), \", which appears as an action in the context menu for any given linked incident. The action used is actually a form of polling (since posting worknotes do not trigger webhooks, this is necessary). Hence, the HTTPS request is actually initiated from the ServiceNow application. It is done through the business rule \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PD Update Worknotes from PagerDuty Notes\"), \", raising the event \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration.import_notes\"), \" (handled by the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Import Notes from PagerDuty incident\"), \" script action). In both cases, the functions \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.getIncidentNotes\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDuty.createNoteImports\"), \" are used to import and save notes from PagerDuty.\"), mdx(\"p\", null, \"Worknotes from PagerDuty are imported to ServiceNow incidents as follows, as of version 3.5:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.getIncidentNotes\"), \" is called\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"If there are any notes on the incident, the function \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"PagerDuty.createNoteImports\"), \" is called to create note import records\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Note Import\"), \" table transform map is run on each new note import record to update the work notes on the incident in question.\")), mdx(\"h1\", null, \"PagerDuty to ServiceNow: The Webhook Import Process\"), mdx(\"p\", null, \"Real-time updates to incidents in PagerDuty are communicated to ServiceNow through \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/extensions-and-add-ons#section-extensions\"\n  }), \"extensions\"), \", created on each PagerDuty service that corresponds to a provisioned assignment group in ServiceNow. When a group is initially provisioned, an extension will also be created on the service. In version 3.5 and later, an extension on the service will be provisioned automatically if one does not already exist, whenever a new incident is created.\"), mdx(\"p\", null, \"The extensions, also known as webhooks, specify URLs in the ServiceNow instances to which JSON-encoded data is sent via HTTPS/POST requests.\"), mdx(\"h2\", {\n    \"id\": \"initial-receiving-and-importing-of-the-webhook\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#initial-receiving-and-importing-of-the-webhook\",\n    \"aria-label\": \"initial receiving and importing of the webhook permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Initial receiving and importing of the webhook\"), mdx(\"p\", null, \"The first point of entry into the ServiceNow application is the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Webhook Post\"), \" Scripted REST Resource, found in the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Application Files\"), \" tab. This component handles the receipt of the payload, validation of the webhook key / endpoint path, and generating the response. The processing of the data itself is done by the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound\"), \" Script Include, via a call to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound.processRestWebhook\"), \".\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound\"), \" handles the saving of data. It is passed an array, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"messages\"), \", containing one or more webhook event objects as described in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview\"\n  }), \"Webhooks Overview\"), \".\"), mdx(\"p\", null, \"Finally, in the function \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PagerDutyInbound._processData\"), \", an import record is created for each webhook event, in the table \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_webhook_import\"), \". Data saved in this table by this process, and hence a record of webhooks received, can be viewed in ServiceNow under \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty \", \"\\u25BA\", \" Imports \", \"\\u25BA\", \" Webhook Import Rows\"), \".\"), mdx(\"h2\", {\n    \"id\": \"translating-webhook-imports-to-servicenow-incidents\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#translating-webhook-imports-to-servicenow-incidents\",\n    \"aria-label\": \"translating webhook imports to servicenow incidents permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Translating webhook imports to ServiceNow incidents\"), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PagerDuty Webhook Import\"), \" table transform map, found in the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Application Files\"), \" tab, takes records in the webhook import table and translates them to ServiceNow incident records. The PagerDuty escalation policy ID is used to identify the corresponding assignment group to which the incident should be assigned in ServiceNow; the assignment group should have its \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"PagerDuty Escalation\"), \" field set to the ID (which is used to identify it) of an escalation policy in PagerDuty.\"), mdx(\"p\", null, \"In 3.5 and later, the process of finding existing records in the target table (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"task\"), \"), \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"coalescing\"), \", uses the PagerDuty Incident field. That is to say, it looks for an existing incident whose \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"x_pd_integration_incident\"), \" column matches the value of given import record's \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" column. In 3.2.1 and earlier, this was done based on the incident key field. If no existing match is found, a new incident is created within the assignment group corresponding to the escalation policy to which the incident was assigned.\"), mdx(\"p\", null, \"Within the scope of the script, for each webhook import, the following variables dictate the actions that will be taken:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"source\"), \": The import record. The field \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"source.message_type\"), \" is of particular interest; it will be one of the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://v2.developer.pagerduty.com/docs/webhooks-overview#webhook-types\"\n  }), \"Webhook Types\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"action\"), \": This will be \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"insert\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"update\"), \" depending on whether a new incident record is being created, or an existing incident is being updated.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"assignOnAckOnly\"), \": This is a boolean, determined by the setting \\\"Only assign based on an acknowledgment from PagerDuty user\\\": this determines whether the ServiceNow incident should be assigned based on acknowledgment from PagerDuty, or if the integration should synchronize incident assignment between ServiceNow and PagerDuty with each webhook update.\")), mdx(\"p\", null, \"At the end of it all, the properties of the incident to be created or updated will be stored in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"target\"), \" variable (a GlideRecord object), and the change will be saved after the script exits.\"), mdx(\"h2\", {\n    \"id\": \"the-incident-link-process-in-32\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#the-incident-link-process-in-32\",\n    \"aria-label\": \"the incident link process in 32 permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"The Incident Link Process in 3.2\"), mdx(\"p\", null, \"Before the introduction of synchronous incident creation in the REST API, the integration app would use the following process to link incidents between systems:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"A ServiceNow incident triggers a PagerDuty incident.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"When the event is received through the PagerDuty Events API, The ServiceNow incident's PagerDuty incident ID field is set to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"---waiting---\"), \", and the incident key is set based on the response from the API. At this point in time, the incident ID, which is needed for the full bidirectional integration, is not available.\", \"*\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The event from ServiceNow, through the Events API, triggers a resulting incident.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The webhook extension for the service on which the incident is triggered sends a webhook payload of type \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"incident.trigger\"), \" back to ServiceNow. The payload contains both the incident key and the incident ID.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"ServiceNow receives and processes the webhook payload into a webhook import row\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"PagerDuty Webhook Import\"), \" table transform map finds the ServiceNow record with a query on the incident key field, \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"x_pd_integration_incident_key\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The import transform map updates the incident ID field, and the incident is linked.\")), mdx(\"p\", null, \"For this reason, ServiceNow-integrated services (with ServiceNow integration app version 3.2.x could not be configured to create alerts and incidents, because this deprecates the incident key, making it null in webhooks, and thus rendering the webhook import unable to find existing records. Refer to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/docs/alerts#section-alerts-and-bidirectional-integrations\"\n  }), \"Alerts and bidirectional integrations\"), \" for further details.\"), mdx(\"p\", null, \"This also formed the basis for many difficult issues that arose in customized ServiceNow integration apps. If troubleshooting an integration app that is based on 3.2.x and has been customized, it is recommended that you log the value of the incident key field and enable it in list/form views, to identify if anything happens to it that would interfere with the integration process.\"), mdx(\"p\", null, \"*\", \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"For the curious:\"), \" the advantage behind this design is to be able to process and deduplicate potentially far higher quantities of data more efficiently, before creating from the events (or de-duplicating events into) corresponding incidents. Incidents represent actionable items for humans to work on resolving, versus events/alerts, which represent data from monitoring tools, and can be noisy / overabundant.\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#disclaimer","title":"Disclaimer"},{"url":"#introduction","title":"Introduction","items":[{"url":"#terminology","title":"Terminology","items":[{"url":"#assignment-versus-escalation-and-delegation","title":"Assignment versus Escalation and Delegation"},{"url":"#provisioned-versus-linked","title":"Provisioned versus Linked"}]},{"url":"#troubleshooting-with-verbose-logging","title":"Troubleshooting With Verbose Logging"},{"url":"#the-core-components","title":"The Core Components"}]},{"url":"#linking-objects-between-systems-the-provisioning-process","title":"Linking Objects Between Systems: The Provisioning Process","items":[{"url":"#when-users-are-auto-provisioned","title":"When Users Are Auto-Provisioned"},{"url":"#special-usage-of-the-integration-fields","title":"Special Usage of the Integration Fields"},{"url":"#avoiding-feedback-loops","title":"Avoiding Feedback Loops"}]},{"url":"#servicenow-to-pagerduty-the-business-rules","title":"ServiceNow to PagerDuty: The Business Rules","items":[{"url":"#how-pagerduty-incidents-are-triggered","title":"How PagerDuty Incidents Are Triggered"},{"url":"#how-pagerduty-incidents-are-resolved","title":"How PagerDuty Incidents Are Resolved"},{"url":"#reassignment-and-delegation","title":"Reassignment and Delegation"},{"url":"#worknote-synchronization","title":"Worknote Synchronization"}]},{"url":"#pagerduty-to-servicenow-the-webhook-import-process","title":"PagerDuty to ServiceNow: The Webhook Import Process","items":[{"url":"#initial-receiving-and-importing-of-the-webhook","title":"Initial receiving and importing of the webhook"},{"url":"#translating-webhook-imports-to-servicenow-incidents","title":"Translating webhook imports to ServiceNow incidents"},{"url":"#the-incident-link-process-in-32","title":"The Incident Link Process in 3.2"}]}]},"frontmatter":{"title":"ServiceNow Integration: Advanced Topics"}}},"pageContext":{"id":"a8933020-73f9-5ef6-ab1e-2899908794b1"}},"staticQueryHashes":[]}